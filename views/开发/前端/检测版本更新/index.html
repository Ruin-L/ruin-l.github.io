<!DOCTYPE html>
<html lang="zh-CN" dir="ltr">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>检测版本更新 | 葵花宝典</title>
    <meta name="description" content="基于vitepress的开发手册">
    <meta name="generator" content="VitePress v1.6.3">
    <link rel="preload stylesheet" href="/assets/style.ld4O-y-U.css" as="style">
    <link rel="preload stylesheet" href="/vp-icons.css" as="style">
    
    <script type="module" src="/assets/app.zoLgmVJI.js"></script>
    <link rel="preload" href="/assets/inter-roman-latin.Di8DUHzh.woff2" as="font" type="font/woff2" crossorigin="">
    <link rel="modulepreload" href="/assets/chunks/theme.CQJz5i5I.js">
    <link rel="modulepreload" href="/assets/chunks/framework.CuZ66bTI.js">
    <link rel="modulepreload" href="/assets/views_开发_前端_检测版本更新_index.md.CWu55Bom.lean.js">
    <link rel="icon" href="https://jiashu.jsdmirror.com/gh/Ruin-L/image/img/logo_transparent.png">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black">
    <script>(function(){const t=()=>{const n=document.documentElement.classList.contains("dark")?"#1b1b1f":"#ffffff",e=document.querySelector('meta[name="theme-color"]')||document.createElement("meta");e.name="theme-color",e.content=n,document.head.appendChild(e)};t(),new MutationObserver(t).observe(document.documentElement,{attributes:!0,attributeFilter:["class"]})})();</script>
    <script id="check-dark-mode">(()=>{const e=localStorage.getItem("vitepress-theme-appearance")||"auto",a=window.matchMedia("(prefers-color-scheme: dark)").matches;(!e||e==="auto"?a:e==="dark")&&document.documentElement.classList.add("dark")})();</script>
    <script id="check-mac-os">document.documentElement.classList.toggle("mac",/Mac|iPhone|iPod|iPad/i.test(navigator.platform));</script>
    <link rel="manifest" href="/manifest.webmanifest">
    <script id="vite-plugin-pwa:register-sw" src="/registerSW.js"></script>
  </head>
  <body>
    <div id="app"><div class="Layout" data-v-fb823837><!--[--><!--[--><!--[--><!--]--><!--]--><!--]--><!--[--><span tabindex="-1" data-v-c2583e2a></span><a href="#VPContent" class="VPSkipLink visually-hidden" data-v-c2583e2a>Skip to content</a><!--]--><!----><header class="VPNav" data-v-fb823837 data-v-926ee3e5><div class="VPNavBar" data-v-926ee3e5 data-v-bd305079><div class="wrapper" data-v-bd305079><div class="container" data-v-bd305079><div class="title" data-v-bd305079><div class="VPNavBarTitle has-sidebar" data-v-bd305079 data-v-5d8f5674><a class="title" href="/" data-v-5d8f5674><!--[--><!--]--><!--[--><img class="VPImage logo" src="https://jiashu.jsdmirror.com/gh/Ruin-L/image/img/logo_transparent.png" alt data-v-561d8443><!--]--><span data-v-5d8f5674>葵花宝典</span><!--[--><!--]--></a></div></div><div class="content" data-v-bd305079><div class="content-body" data-v-bd305079><!--[--><!--]--><div class="VPNavBarSearch search" data-v-bd305079><!--[--><!----><div id="local-search"><button type="button" class="DocSearch DocSearch-Button" aria-label="搜索文档"><span class="DocSearch-Button-Container"><span class="vp-icon DocSearch-Search-Icon"></span><span class="DocSearch-Button-Placeholder">搜索文档</span></span><span class="DocSearch-Button-Keys"><kbd class="DocSearch-Button-Key"></kbd><kbd class="DocSearch-Button-Key">K</kbd></span></button></div><!--]--></div><nav aria-labelledby="main-nav-aria-label" class="VPNavBarMenu menu" data-v-bd305079 data-v-32165a07><span id="main-nav-aria-label" class="visually-hidden" data-v-32165a07> Main Navigation </span><!--[--><!--[--><a class="VPLink link VPNavBarMenuLink" href="/" tabindex="0" data-v-32165a07 data-v-bb565b1a><!--[--><span data-v-bb565b1a>主页</span><!--]--></a><!--]--><!--[--><div class="VPFlyout VPNavBarMenuGroup" data-v-32165a07 data-v-a4c1a72e><button type="button" class="button" aria-haspopup="true" aria-expanded="false" data-v-a4c1a72e><span class="text" data-v-a4c1a72e><!----><span data-v-a4c1a72e>开发</span><span class="vpi-chevron-down text-icon" data-v-a4c1a72e></span></span></button><div class="menu" data-v-a4c1a72e><div class="VPMenu" data-v-a4c1a72e data-v-8f6f944e><div class="items" data-v-8f6f944e><!--[--><!--[--><div class="VPMenuLink" data-v-8f6f944e data-v-5ad18df3><a class="VPLink link" href="/views/开发/前端/" data-v-5ad18df3><!--[--><span data-v-5ad18df3>前端</span><!--]--></a></div><!--]--><!--[--><div class="VPMenuLink" data-v-8f6f944e data-v-5ad18df3><a class="VPLink link" href="/views/开发/后端/" data-v-5ad18df3><!--[--><span data-v-5ad18df3>后端</span><!--]--></a></div><!--]--><!--]--></div><!--[--><!--]--></div></div></div><!--]--><!--[--><div class="VPFlyout VPNavBarMenuGroup" data-v-32165a07 data-v-a4c1a72e><button type="button" class="button" aria-haspopup="true" aria-expanded="false" data-v-a4c1a72e><span class="text" data-v-a4c1a72e><!----><span data-v-a4c1a72e>软件</span><span class="vpi-chevron-down text-icon" data-v-a4c1a72e></span></span></button><div class="menu" data-v-a4c1a72e><div class="VPMenu" data-v-a4c1a72e data-v-8f6f944e><div class="items" data-v-8f6f944e><!--[--><!--[--><div class="VPMenuLink" data-v-8f6f944e data-v-5ad18df3><a class="VPLink link" href="/views/软件/网络代理/" data-v-5ad18df3><!--[--><span data-v-5ad18df3>网络代理</span><!--]--></a></div><!--]--><!--[--><div class="VPMenuLink" data-v-8f6f944e data-v-5ad18df3><a class="VPLink link" href="/views/软件/数据库应用/" data-v-5ad18df3><!--[--><span data-v-5ad18df3>数据库应用</span><!--]--></a></div><!--]--><!--[--><div class="VPMenuLink" data-v-8f6f944e data-v-5ad18df3><a class="VPLink link" href="/views/软件/系统操作/" data-v-5ad18df3><!--[--><span data-v-5ad18df3>系统操作</span><!--]--></a></div><!--]--><!--[--><div class="VPMenuLink" data-v-8f6f944e data-v-5ad18df3><a class="VPLink link" href="/views/软件/其他/" data-v-5ad18df3><!--[--><span data-v-5ad18df3>其他</span><!--]--></a></div><!--]--><!--]--></div><!--[--><!--]--></div></div></div><!--]--><!--[--><a class="VPLink link VPNavBarMenuLink" href="/views/硬件/" tabindex="0" data-v-32165a07 data-v-bb565b1a><!--[--><span data-v-bb565b1a>硬件</span><!--]--></a><!--]--><!--[--><a class="VPLink link VPNavBarMenuLink" href="/views/生活/" tabindex="0" data-v-32165a07 data-v-bb565b1a><!--[--><span data-v-bb565b1a>生活</span><!--]--></a><!--]--><!--[--><a class="VPLink link VPNavBarMenuLink" href="/views/关于/" tabindex="0" data-v-32165a07 data-v-bb565b1a><!--[--><span data-v-bb565b1a>关于</span><!--]--></a><!--]--><!--]--></nav><!----><div class="VPNavBarAppearance appearance" data-v-bd305079 data-v-bbd7606b><button class="VPSwitch VPSwitchAppearance" type="button" role="switch" title aria-checked="false" data-v-bbd7606b data-v-712515db data-v-25a1dd36><span class="check" data-v-25a1dd36><span class="icon" data-v-25a1dd36><!--[--><span class="vpi-sun sun" data-v-712515db></span><span class="vpi-moon moon" data-v-712515db></span><!--]--></span></span></button></div><div class="VPSocialLinks VPNavBarSocialLinks social-links" data-v-bd305079 data-v-7000d30c data-v-b2f1cba0><!--[--><a class="VPSocialLink no-icon" href="https://github.com/Ruin-L?tab=repositories" aria-label="github" target="_blank" rel="noopener" data-v-b2f1cba0 data-v-c576253b><span class="vpi-social-github"></span></a><!--]--></div><div class="VPFlyout VPNavBarExtra extra" data-v-bd305079 data-v-7fcad3f2 data-v-a4c1a72e><button type="button" class="button" aria-haspopup="true" aria-expanded="false" aria-label="extra navigation" data-v-a4c1a72e><span class="vpi-more-horizontal icon" data-v-a4c1a72e></span></button><div class="menu" data-v-a4c1a72e><div class="VPMenu" data-v-a4c1a72e data-v-8f6f944e><!----><!--[--><!--[--><!----><div class="group" data-v-7fcad3f2><div class="item appearance" data-v-7fcad3f2><p class="label" data-v-7fcad3f2>外观</p><div class="appearance-action" data-v-7fcad3f2><button class="VPSwitch VPSwitchAppearance" type="button" role="switch" title aria-checked="false" data-v-7fcad3f2 data-v-712515db data-v-25a1dd36><span class="check" data-v-25a1dd36><span class="icon" data-v-25a1dd36><!--[--><span class="vpi-sun sun" data-v-712515db></span><span class="vpi-moon moon" data-v-712515db></span><!--]--></span></span></button></div></div></div><div class="group" data-v-7fcad3f2><div class="item social-links" data-v-7fcad3f2><div class="VPSocialLinks social-links-list" data-v-7fcad3f2 data-v-b2f1cba0><!--[--><a class="VPSocialLink no-icon" href="https://github.com/Ruin-L?tab=repositories" aria-label="github" target="_blank" rel="noopener" data-v-b2f1cba0 data-v-c576253b><span class="vpi-social-github"></span></a><!--]--></div></div></div><!--]--><!--]--></div></div></div><!--[--><!--[--><!--[--><!--[--><div class="VPFlyout VPNolebaseEnhancedReadabilitiesMenu VPNolebaseEnhancedReadabilitiesMenuFlyout" aria-label="阅读增强" role="menuitem" data-v-a4c1a72e><button type="button" class="button" aria-haspopup="true" aria-expanded="false" data-v-a4c1a72e><span class="text" data-v-a4c1a72e><span class="i-icon-park-outline:book-open option-icon" data-v-a4c1a72e></span><!----><span class="vpi-chevron-down text-icon" data-v-a4c1a72e></span></span></button><div class="menu" data-v-a4c1a72e><div class="VPMenu" data-v-a4c1a72e data-v-8f6f944e><!----><!--[--><!--]--></div></div></div><!--]--><!--]--><!--]--><!--]--><button type="button" class="VPNavBarHamburger hamburger" aria-label="mobile navigation" aria-expanded="false" aria-controls="VPNavScreen" data-v-bd305079 data-v-13fd5f73><span class="container" data-v-13fd5f73><span class="top" data-v-13fd5f73></span><span class="middle" data-v-13fd5f73></span><span class="bottom" data-v-13fd5f73></span></span></button></div></div></div></div><div class="divider" data-v-bd305079><div class="divider-line" data-v-bd305079></div></div></div><!----></header><div class="VPLocalNav has-sidebar empty" data-v-fb823837 data-v-7773398d><div class="container" data-v-7773398d><button class="menu" aria-expanded="false" aria-controls="VPSidebarNav" data-v-7773398d><span class="vpi-align-left menu-icon" data-v-7773398d></span><span class="menu-text" data-v-7773398d>菜单</span></button><div class="VPLocalNavOutlineDropdown" style="--vp-vh:0px;" data-v-7773398d data-v-d4a1c179><button data-v-d4a1c179>返回顶部</button><!----></div></div></div><aside class="VPSidebar" data-v-fb823837 data-v-953387ba><div class="curtain" data-v-953387ba></div><nav class="nav" id="VPSidebarNav" aria-labelledby="sidebar-aria-label" tabindex="-1" data-v-953387ba><span class="visually-hidden" id="sidebar-aria-label" data-v-953387ba> Sidebar Navigation </span><!--[--><!--]--><!--[--><div class="no-transition group" data-v-b3c36b0e><section class="VPSidebarItem level-0 has-active" data-v-b3c36b0e data-v-968f68b0><div class="item" role="button" tabindex="0" data-v-968f68b0><div class="indicator" data-v-968f68b0></div><h2 class="text" data-v-968f68b0>开发</h2><!----></div><div class="items" data-v-968f68b0><!--[--><section class="VPSidebarItem level-1 collapsible is-link has-active" data-v-968f68b0 data-v-968f68b0><div class="item" tabindex="0" data-v-968f68b0><div class="indicator" data-v-968f68b0></div><a class="VPLink link link" href="/views/开发/前端/" data-v-968f68b0><!--[--><h3 class="text" data-v-968f68b0>前端</h3><!--]--></a><div class="caret" role="button" aria-label="toggle section" tabindex="0" data-v-968f68b0><span class="vpi-chevron-right caret-icon" data-v-968f68b0></span></div></div><div class="items" data-v-968f68b0><!--[--><div class="VPSidebarItem level-2 collapsible is-link" data-v-968f68b0 data-v-968f68b0><div class="item" tabindex="0" data-v-968f68b0><div class="indicator" data-v-968f68b0></div><a class="VPLink link link" href="/views/开发/前端/axios/" data-v-968f68b0><!--[--><p class="text" data-v-968f68b0>axios</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-2 collapsible is-link" data-v-968f68b0 data-v-968f68b0><div class="item" tabindex="0" data-v-968f68b0><div class="indicator" data-v-968f68b0></div><a class="VPLink link link" href="/views/开发/前端/css/" data-v-968f68b0><!--[--><p class="text" data-v-968f68b0>css</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-2 collapsible is-link" data-v-968f68b0 data-v-968f68b0><div class="item" tabindex="0" data-v-968f68b0><div class="indicator" data-v-968f68b0></div><a class="VPLink link link" href="/views/开发/前端/echarts/" data-v-968f68b0><!--[--><p class="text" data-v-968f68b0>echarts</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-2 collapsible is-link" data-v-968f68b0 data-v-968f68b0><div class="item" tabindex="0" data-v-968f68b0><div class="indicator" data-v-968f68b0></div><a class="VPLink link link" href="/views/开发/前端/echarts滚动条隐藏/" data-v-968f68b0><!--[--><p class="text" data-v-968f68b0>echarts滚动条隐藏</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-2 collapsible is-link" data-v-968f68b0 data-v-968f68b0><div class="item" tabindex="0" data-v-968f68b0><div class="indicator" data-v-968f68b0></div><a class="VPLink link link" href="/views/开发/前端/github工作流搭建/" data-v-968f68b0><!--[--><p class="text" data-v-968f68b0>github工作流搭建</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-2 collapsible is-link" data-v-968f68b0 data-v-968f68b0><div class="item" tabindex="0" data-v-968f68b0><div class="indicator" data-v-968f68b0></div><a class="VPLink link link" href="/views/开发/前端/html/" data-v-968f68b0><!--[--><p class="text" data-v-968f68b0>html</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-2 collapsible is-link" data-v-968f68b0 data-v-968f68b0><div class="item" tabindex="0" data-v-968f68b0><div class="indicator" data-v-968f68b0></div><a class="VPLink link link" href="/views/开发/前端/ios编辑vitepress文档攻略/" data-v-968f68b0><!--[--><p class="text" data-v-968f68b0>ios编辑vitepress文档攻略</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-2 collapsible is-link" data-v-968f68b0 data-v-968f68b0><div class="item" tabindex="0" data-v-968f68b0><div class="indicator" data-v-968f68b0></div><a class="VPLink link link" href="/views/开发/前端/javaScript/" data-v-968f68b0><!--[--><p class="text" data-v-968f68b0>javaScript</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-2 collapsible is-link" data-v-968f68b0 data-v-968f68b0><div class="item" tabindex="0" data-v-968f68b0><div class="indicator" data-v-968f68b0></div><a class="VPLink link link" href="/views/开发/前端/pinia/" data-v-968f68b0><!--[--><p class="text" data-v-968f68b0>pinia</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-2 collapsible is-link" data-v-968f68b0 data-v-968f68b0><div class="item" tabindex="0" data-v-968f68b0><div class="indicator" data-v-968f68b0></div><a class="VPLink link link" href="/views/开发/前端/print/" data-v-968f68b0><!--[--><p class="text" data-v-968f68b0>print</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-2 collapsible is-link" data-v-968f68b0 data-v-968f68b0><div class="item" tabindex="0" data-v-968f68b0><div class="indicator" data-v-968f68b0></div><a class="VPLink link link" href="/views/开发/前端/pwa应用/" data-v-968f68b0><!--[--><p class="text" data-v-968f68b0>pwa应用</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-2 collapsible is-link" data-v-968f68b0 data-v-968f68b0><div class="item" tabindex="0" data-v-968f68b0><div class="indicator" data-v-968f68b0></div><a class="VPLink link link" href="/views/开发/前端/td-design/" data-v-968f68b0><!--[--><p class="text" data-v-968f68b0>td-design</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-2 collapsible is-link" data-v-968f68b0 data-v-968f68b0><div class="item" tabindex="0" data-v-968f68b0><div class="indicator" data-v-968f68b0></div><a class="VPLink link link" href="/views/开发/前端/typeScript/" data-v-968f68b0><!--[--><p class="text" data-v-968f68b0>typeScript</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-2 collapsible is-link" data-v-968f68b0 data-v-968f68b0><div class="item" tabindex="0" data-v-968f68b0><div class="indicator" data-v-968f68b0></div><a class="VPLink link link" href="/views/开发/前端/uniapp/" data-v-968f68b0><!--[--><p class="text" data-v-968f68b0>uniapp</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-2 collapsible is-link" data-v-968f68b0 data-v-968f68b0><div class="item" tabindex="0" data-v-968f68b0><div class="indicator" data-v-968f68b0></div><a class="VPLink link link" href="/views/开发/前端/vite/" data-v-968f68b0><!--[--><p class="text" data-v-968f68b0>vite</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-2 collapsible is-link" data-v-968f68b0 data-v-968f68b0><div class="item" tabindex="0" data-v-968f68b0><div class="indicator" data-v-968f68b0></div><a class="VPLink link link" href="/views/开发/前端/VitePress 优化代码块样式/" data-v-968f68b0><!--[--><p class="text" data-v-968f68b0>VitePress 优化代码块样式</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-2 collapsible is-link" data-v-968f68b0 data-v-968f68b0><div class="item" tabindex="0" data-v-968f68b0><div class="indicator" data-v-968f68b0></div><a class="VPLink link link" href="/views/开发/前端/VitePress 图片查看器插件/" data-v-968f68b0><!--[--><p class="text" data-v-968f68b0>VitePress 图片查看器插件</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-2 collapsible is-link" data-v-968f68b0 data-v-968f68b0><div class="item" tabindex="0" data-v-968f68b0><div class="indicator" data-v-968f68b0></div><a class="VPLink link link" href="/views/开发/前端/vitepress显示git历史记录/" data-v-968f68b0><!--[--><p class="text" data-v-968f68b0>vitepress显示git历史记录</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-2 collapsible is-link" data-v-968f68b0 data-v-968f68b0><div class="item" tabindex="0" data-v-968f68b0><div class="indicator" data-v-968f68b0></div><a class="VPLink link link" href="/views/开发/前端/vitepress路由动画效果/" data-v-968f68b0><!--[--><p class="text" data-v-968f68b0>vitepress路由动画效果</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-2 collapsible is-link" data-v-968f68b0 data-v-968f68b0><div class="item" tabindex="0" data-v-968f68b0><div class="indicator" data-v-968f68b0></div><a class="VPLink link link" href="/views/开发/前端/vitepress阅读增强实现/" data-v-968f68b0><!--[--><p class="text" data-v-968f68b0>vitepress阅读增强实现</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-2 collapsible is-link" data-v-968f68b0 data-v-968f68b0><div class="item" tabindex="0" data-v-968f68b0><div class="indicator" data-v-968f68b0></div><a class="VPLink link link" href="/views/开发/前端/VitePress集成评论系统/" data-v-968f68b0><!--[--><p class="text" data-v-968f68b0>VitePress集成评论系统</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-2 collapsible is-link" data-v-968f68b0 data-v-968f68b0><div class="item" tabindex="0" data-v-968f68b0><div class="indicator" data-v-968f68b0></div><a class="VPLink link link" href="/views/开发/前端/vue/" data-v-968f68b0><!--[--><p class="text" data-v-968f68b0>vue</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-2 collapsible is-link" data-v-968f68b0 data-v-968f68b0><div class="item" tabindex="0" data-v-968f68b0><div class="indicator" data-v-968f68b0></div><a class="VPLink link link" href="/views/开发/前端/使用 C-lodop 进行打印/" data-v-968f68b0><!--[--><p class="text" data-v-968f68b0>使用 C-lodop 进行打印</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-2 collapsible is-link" data-v-968f68b0 data-v-968f68b0><div class="item" tabindex="0" data-v-968f68b0><div class="indicator" data-v-968f68b0></div><a class="VPLink link link" href="/views/开发/前端/兼容旧版浏览器/" data-v-968f68b0><!--[--><p class="text" data-v-968f68b0>兼容旧版浏览器</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-2 collapsible is-link" data-v-968f68b0 data-v-968f68b0><div class="item" tabindex="0" data-v-968f68b0><div class="indicator" data-v-968f68b0></div><a class="VPLink link link" href="/views/开发/前端/暗黑切换动画/" data-v-968f68b0><!--[--><p class="text" data-v-968f68b0>暗黑切换动画</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-2 collapsible is-link" data-v-968f68b0 data-v-968f68b0><div class="item" tabindex="0" data-v-968f68b0><div class="indicator" data-v-968f68b0></div><a class="VPLink link link" href="/views/开发/前端/检测版本更新/" data-v-968f68b0><!--[--><p class="text" data-v-968f68b0>检测版本更新</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-2 collapsible is-link" data-v-968f68b0 data-v-968f68b0><div class="item" tabindex="0" data-v-968f68b0><div class="indicator" data-v-968f68b0></div><a class="VPLink link link" href="/views/开发/前端/浏览器硬刷新/" data-v-968f68b0><!--[--><p class="text" data-v-968f68b0>浏览器硬刷新</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-2 collapsible is-link" data-v-968f68b0 data-v-968f68b0><div class="item" tabindex="0" data-v-968f68b0><div class="indicator" data-v-968f68b0></div><a class="VPLink link link" href="/views/开发/前端/解决vscode同名文件后缀显示copy/" data-v-968f68b0><!--[--><p class="text" data-v-968f68b0>解决vscode同名文件后缀显示copy</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-2 collapsible is-link" data-v-968f68b0 data-v-968f68b0><div class="item" tabindex="0" data-v-968f68b0><div class="indicator" data-v-968f68b0></div><a class="VPLink link link" href="/views/开发/前端/闭包/" data-v-968f68b0><!--[--><p class="text" data-v-968f68b0>闭包</p><!--]--></a><!----></div><!----></div><!--]--></div></section><section class="VPSidebarItem level-1 collapsible is-link" data-v-968f68b0 data-v-968f68b0><div class="item" tabindex="0" data-v-968f68b0><div class="indicator" data-v-968f68b0></div><a class="VPLink link link" href="/views/开发/后端/" data-v-968f68b0><!--[--><h3 class="text" data-v-968f68b0>后端</h3><!--]--></a><div class="caret" role="button" aria-label="toggle section" tabindex="0" data-v-968f68b0><span class="vpi-chevron-right caret-icon" data-v-968f68b0></span></div></div><div class="items" data-v-968f68b0><!--[--><div class="VPSidebarItem level-2 collapsible is-link" data-v-968f68b0 data-v-968f68b0><div class="item" tabindex="0" data-v-968f68b0><div class="indicator" data-v-968f68b0></div><a class="VPLink link link" href="/views/开发/后端/express/" data-v-968f68b0><!--[--><p class="text" data-v-968f68b0>express</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-2 collapsible is-link" data-v-968f68b0 data-v-968f68b0><div class="item" tabindex="0" data-v-968f68b0><div class="indicator" data-v-968f68b0></div><a class="VPLink link link" href="/views/开发/后端/linux下systemctl的使用/" data-v-968f68b0><!--[--><p class="text" data-v-968f68b0>linux下systemctl的使用</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-2 collapsible is-link" data-v-968f68b0 data-v-968f68b0><div class="item" tabindex="0" data-v-968f68b0><div class="indicator" data-v-968f68b0></div><a class="VPLink link link" href="/views/开发/后端/mysql/" data-v-968f68b0><!--[--><p class="text" data-v-968f68b0>mysql</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-2 collapsible is-link" data-v-968f68b0 data-v-968f68b0><div class="item" tabindex="0" data-v-968f68b0><div class="indicator" data-v-968f68b0></div><a class="VPLink link link" href="/views/开发/后端/nginx/" data-v-968f68b0><!--[--><p class="text" data-v-968f68b0>nginx</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-2 collapsible is-link" data-v-968f68b0 data-v-968f68b0><div class="item" tabindex="0" data-v-968f68b0><div class="indicator" data-v-968f68b0></div><a class="VPLink link link" href="/views/开发/后端/vercel的使用/" data-v-968f68b0><!--[--><p class="text" data-v-968f68b0>vercel的使用</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-2 collapsible is-link" data-v-968f68b0 data-v-968f68b0><div class="item" tabindex="0" data-v-968f68b0><div class="indicator" data-v-968f68b0></div><a class="VPLink link link" href="/views/开发/后端/在linux后台部署express服务/" data-v-968f68b0><!--[--><p class="text" data-v-968f68b0>在linux后台部署express服务</p><!--]--></a><!----></div><!----></div><!--]--></div></section><!--]--></div></section></div><!--]--><!--[--><!--]--></nav></aside><div class="VPContent has-sidebar" id="VPContent" data-v-fb823837 data-v-8e9597a8><div class="VPDoc has-sidebar has-aside" data-v-8e9597a8 data-v-0da11ca0><!--[--><!--[--><!--[--><div class="shade">   </div><!--]--><!--]--><!--]--><div class="container" data-v-0da11ca0><div class="aside" data-v-0da11ca0><div class="aside-curtain" data-v-0da11ca0></div><div class="aside-container" data-v-0da11ca0><div class="aside-content" data-v-0da11ca0><div class="VPDocAside" data-v-0da11ca0 data-v-e40cbdf1><!--[--><!--]--><!--[--><!--]--><nav aria-labelledby="doc-outline-aria-label" class="VPDocAsideOutline" data-v-e40cbdf1 data-v-cdf7aeb8><div class="content" data-v-cdf7aeb8><div class="outline-marker" data-v-cdf7aeb8></div><div aria-level="2" class="outline-title" id="doc-outline-aria-label" role="heading" data-v-cdf7aeb8>本页目录</div><ul class="VPDocOutlineItem root" data-v-cdf7aeb8 data-v-32af7ddb><!--[--><!--]--></ul></div></nav><!--[--><!--]--><div class="spacer" data-v-e40cbdf1></div><!--[--><!--]--><!----><!--[--><!--]--><!--[--><!--]--></div></div></div></div><div class="content" data-v-0da11ca0><div class="content-container" data-v-0da11ca0><!--[--><!--]--><main class="main" data-v-0da11ca0><div style="position:relative;" class="vp-doc _views_%E5%BC%80%E5%8F%91_%E5%89%8D%E7%AB%AF_%E6%A3%80%E6%B5%8B%E7%89%88%E6%9C%AC%E6%9B%B4%E6%96%B0_" data-v-0da11ca0><div><h1 id="检测版本更新" tabindex="-1">检测版本更新 <a class="header-anchor" href="#检测版本更新" aria-label="Permalink to &quot;检测版本更新&quot;">​</a></h1><p>实际项目开发中，我们在服务器中更新前端代码后，用户并不能直接知道当前浏览的页面已经更新发生变化。因此我们需要在项目里写一个检测脚本以及版本号控制文件，每次打包的时候都会更新版本号文件，检测脚本会检测当前版本号和实际版本号是否一致，如果不一致则提示用户刷新获取最新版本号。</p><h2 id="在-src-目录下-utils-文件夹内-创建检测版本号脚本文件-update-version-ts" tabindex="-1">在 src 目录下 utils 文件夹内，创建检测版本号脚本文件(update-version.ts) <a class="header-anchor" href="#在-src-目录下-utils-文件夹内-创建检测版本号脚本文件-update-version-ts" aria-label="Permalink to &quot;在 src 目录下 utils 文件夹内，创建检测版本号脚本文件(update-version.ts)&quot;">​</a></h2><div class="language-typescript vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">typescript</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">/**</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"> * 更新版本信息脚本</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"> * 在构建过程中自动更新 version.json 文件</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"> */</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">import</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> fs </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">from</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &#39;node:fs&#39;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">import</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> path, { dirname } </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">from</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &#39;node:path&#39;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">import</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> { fileURLToPath } </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">from</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &#39;node:url&#39;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// 获取当前文件的目录路径</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> __filename</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> fileURLToPath</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">import</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">.</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">meta</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">.url)</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> __dirname</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> dirname</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(__filename)</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// 版本信息</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> now</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> new</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> Date</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">()</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> dateStr</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> `${</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">now</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">getFullYear</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">()</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">}-${</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">String</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">(</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">now</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">getMonth</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">() </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">+</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 1</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">).</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">padStart</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">(</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">  2</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">,</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">  &#39;0&#39;</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">)</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">}-${</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">String</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">(</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">now</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">getDate</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">()).</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">padStart</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">(</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">2</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">, </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;0&#39;</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">)</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">}`</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> timeStr</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> `${</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">String</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">(</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">now</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">getHours</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">()).</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">padStart</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">(</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">2</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">, </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;0&#39;</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">)</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">}:${</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">String</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">(</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  now</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">getMinutes</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">()</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">).</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">padStart</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">(</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">2</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">, </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;0&#39;</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">)</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">}:${</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">String</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">(</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">now</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">getSeconds</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">()).</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">padStart</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">(</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">2</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">, </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;0&#39;</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">)</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">}`</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">interface</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> VersionInfo</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">  version</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">:</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> string</span></span>
<span class="line"><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">  buildTime</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">:</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> string</span></span>
<span class="line"><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">  environment</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">:</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> string</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// 不再需要检查构建序号，直接使用时间戳作为版本号</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">try</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">  if</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (fs.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">existsSync</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(path.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">resolve</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(__dirname, </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;../../public/version.json&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">))) {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> currentVersionInfo</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> JSON</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">parse</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">      fs.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">readFileSync</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        path.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">resolve</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(__dirname, </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;../../public/version.json&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">),</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">        &#39;utf8&#39;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">      )</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    )</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    console.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">log</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">`当前版本: ${</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">currentVersionInfo</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">.</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">version</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">}, 更新为时间格式版本`</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">} </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">catch</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (error) {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  console.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">error</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;读取当前版本信息失败&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, error)</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// 设置版本格式为 YYYY-MM-DD HH:MM:SS</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> versionFormat</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> `${</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">dateStr</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">} ${</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">timeStr</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">}`</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> versionInfo</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">:</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> VersionInfo</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  version: versionFormat,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  buildTime: now.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">toISOString</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(),</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  environment: process.env.</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">NODE_ENV</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> ||</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &#39;production&#39;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// 版本文件路径</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// 确保路径正确解析到 pc-front/public/version.json</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> versionFilePath</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> path.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">resolve</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(__dirname, </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;../../public/version.json&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// 写入版本信息</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">fs.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">writeFileSync</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(versionFilePath, </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">JSON</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">stringify</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(versionInfo, </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">null</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">2</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">), </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;utf8&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">console.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">log</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">`版本信息已更新: ${</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">JSON</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">stringify</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">(</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">versionInfo</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">)</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">}`</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">console.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">log</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">`当前版本时间戳: ${</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">versionFormat</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">}`</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br><span class="line-number">40</span><br><span class="line-number">41</span><br><span class="line-number">42</span><br><span class="line-number">43</span><br><span class="line-number">44</span><br><span class="line-number">45</span><br><span class="line-number">46</span><br><span class="line-number">47</span><br><span class="line-number">48</span><br><span class="line-number">49</span><br><span class="line-number">50</span><br><span class="line-number">51</span><br><span class="line-number">52</span><br><span class="line-number">53</span><br><span class="line-number">54</span><br><span class="line-number">55</span><br><span class="line-number">56</span><br><span class="line-number">57</span><br><span class="line-number">58</span><br><span class="line-number">59</span><br><span class="line-number">60</span><br><span class="line-number">61</span><br></div></div><div class="danger custom-block"><p class="custom-block-title">注意事项</p><p>需要注意下载 fs、path 依赖，并且根据自己项目的实际情况，更改目录的路径。</p></div><h2 id="在上述目录里创建版本检测服务-versioncheck-ts" tabindex="-1">在上述目录里创建版本检测服务 (versionCheck.ts) <a class="header-anchor" href="#在上述目录里创建版本检测服务-versioncheck-ts" aria-label="Permalink to &quot;在上述目录里创建版本检测服务 (versionCheck.ts)&quot;">​</a></h2><div class="language-typescript vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">typescript</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">/**</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"> * 版本检测服务</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"> * 定期检查应用版本并提示用户更新</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"> */</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">import</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> { NotifyPlugin } </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">from</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &#39;tdesign-vue-next&#39;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">import</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> { h } </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">from</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &#39;vue&#39;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">interface</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> VersionInfo</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">  version</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">:</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> string</span></span>
<span class="line"><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">  buildTime</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">:</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> string</span></span>
<span class="line"><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">  environment</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">:</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> string</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">let</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> currentVersion</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">:</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> string</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> |</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> null</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> null</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">let</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> checkInterval</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">:</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> number</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> |</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> null</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> null</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">let</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> isUpdateNotificationShown </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> false</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">/**</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"> * 获取当前版本信息</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"> */</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">export</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> const</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> fetchVersionInfo</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> async</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> ()</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">:</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> Promise</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&lt;</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">VersionInfo</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt; </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">  try</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">    // 确保使用正确的路径访问version.json</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> response</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> await</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> fetch</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">`/version.json?t=${</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">new</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> Date</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">().</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">getTime</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">()</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">}`</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    if</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">!</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">response.ok) {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">      throw</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> new</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> Error</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;无法获取版本信息&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    }</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    return</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> await</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> response.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">json</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">()</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  } </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">catch</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (error) {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    console.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">error</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;获取版本信息失败:&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, error)</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    return</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">      version: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;0.0.0&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">      buildTime: </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">new</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> Date</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">().</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">toISOString</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(),</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">      environment: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;unknown&#39;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">/**</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"> * 检查版本更新</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"> */</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">export</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> const</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> checkVersion</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> async</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> ()</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">:</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> Promise</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&lt;</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">boolean</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt; </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">  try</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> versionInfo</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> await</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> fetchVersionInfo</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">()</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">    // 首次加载，保存当前版本</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    if</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">!</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">currentVersion) {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">      currentVersion </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> versionInfo.version</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">      return</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> false</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    }</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">    // 版本不一致，需要更新</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    if</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (currentVersion </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">!==</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> versionInfo.version) {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">      return</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> true</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    }</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    return</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> false</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  } </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">catch</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (error) {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    console.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">error</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;检查版本更新失败:&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, error)</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    return</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> false</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">/**</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"> * 显示更新提示</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"> */</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">export</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> const</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> showUpdateNotification</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> () </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">  // 如果已经显示了更新提示，则不再重复显示</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">  if</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (isUpdateNotificationShown) {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    return</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  }</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">  // 标记已显示更新提示</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  isUpdateNotificationShown </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> true</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">  const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> notify</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> NotifyPlugin.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">warning</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">({</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    title: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;有新的版本需要更新&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    content: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;点击后将刷新页面获取最新版本！&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    footer: </span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">h</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;div&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, { class: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;t-notification__detail&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> }, [</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">      h</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">        &#39;t-button&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">          class: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;t-notification__detail-item&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">          theme: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;default&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">          variant: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;text&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">          onClick</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: () </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> window.location.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">reload</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">()</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        },</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">        &#39;立即刷新&#39;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">      ),</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">      h</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">        &#39;t-button&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">          class: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;t-notification__detail-item&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">          theme: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;primary&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">          variant: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;text&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">          onClick</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: () </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">            isUpdateNotificationShown </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> false</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">            NotifyPlugin.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">close</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(notify)</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">          }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        },</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">        &#39;稍后提醒我&#39;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">      )</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    ]),</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    duration: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">0</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  })</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">/**</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"> * 启动版本检测服务</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"> * </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">@param</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> intervalTime</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"> 检测间隔时间(毫秒)，默认5分钟</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"> */</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">export</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> const</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> startVersionCheck</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">intervalTime</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 1000</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">  // 重置通知标志</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  isUpdateNotificationShown </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> false</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">  // 初始化获取当前版本</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">  fetchVersionInfo</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">().</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">then</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">((</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">info</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    currentVersion </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> info.version</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    console.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">log</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;当前应用版本:&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, currentVersion)</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  })</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">  // 清除可能存在的旧定时器</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">  if</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (checkInterval) {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    window.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">clearInterval</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(checkInterval)</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  }</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">  // 设置定期检查</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  checkInterval </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> window.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">setInterval</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">async</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> () </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> needUpdate</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> await</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> checkVersion</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">()</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    if</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (needUpdate) {</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">      showUpdateNotification</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">()</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  }, intervalTime)</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">  return</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> () </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    if</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (checkInterval) {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">      window.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">clearInterval</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(checkInterval)</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">      checkInterval </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> null</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">/**</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"> * 停止版本检测服务</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"> */</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">export</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> const</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> stopVersionCheck</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> () </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">  if</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (checkInterval) {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    window.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">clearInterval</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(checkInterval)</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    checkInterval </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> null</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  }</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">  // 重置通知标志</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  isUpdateNotificationShown </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> false</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br><span class="line-number">40</span><br><span class="line-number">41</span><br><span class="line-number">42</span><br><span class="line-number">43</span><br><span class="line-number">44</span><br><span class="line-number">45</span><br><span class="line-number">46</span><br><span class="line-number">47</span><br><span class="line-number">48</span><br><span class="line-number">49</span><br><span class="line-number">50</span><br><span class="line-number">51</span><br><span class="line-number">52</span><br><span class="line-number">53</span><br><span class="line-number">54</span><br><span class="line-number">55</span><br><span class="line-number">56</span><br><span class="line-number">57</span><br><span class="line-number">58</span><br><span class="line-number">59</span><br><span class="line-number">60</span><br><span class="line-number">61</span><br><span class="line-number">62</span><br><span class="line-number">63</span><br><span class="line-number">64</span><br><span class="line-number">65</span><br><span class="line-number">66</span><br><span class="line-number">67</span><br><span class="line-number">68</span><br><span class="line-number">69</span><br><span class="line-number">70</span><br><span class="line-number">71</span><br><span class="line-number">72</span><br><span class="line-number">73</span><br><span class="line-number">74</span><br><span class="line-number">75</span><br><span class="line-number">76</span><br><span class="line-number">77</span><br><span class="line-number">78</span><br><span class="line-number">79</span><br><span class="line-number">80</span><br><span class="line-number">81</span><br><span class="line-number">82</span><br><span class="line-number">83</span><br><span class="line-number">84</span><br><span class="line-number">85</span><br><span class="line-number">86</span><br><span class="line-number">87</span><br><span class="line-number">88</span><br><span class="line-number">89</span><br><span class="line-number">90</span><br><span class="line-number">91</span><br><span class="line-number">92</span><br><span class="line-number">93</span><br><span class="line-number">94</span><br><span class="line-number">95</span><br><span class="line-number">96</span><br><span class="line-number">97</span><br><span class="line-number">98</span><br><span class="line-number">99</span><br><span class="line-number">100</span><br><span class="line-number">101</span><br><span class="line-number">102</span><br><span class="line-number">103</span><br><span class="line-number">104</span><br><span class="line-number">105</span><br><span class="line-number">106</span><br><span class="line-number">107</span><br><span class="line-number">108</span><br><span class="line-number">109</span><br><span class="line-number">110</span><br><span class="line-number">111</span><br><span class="line-number">112</span><br><span class="line-number">113</span><br><span class="line-number">114</span><br><span class="line-number">115</span><br><span class="line-number">116</span><br><span class="line-number">117</span><br><span class="line-number">118</span><br><span class="line-number">119</span><br><span class="line-number">120</span><br><span class="line-number">121</span><br><span class="line-number">122</span><br><span class="line-number">123</span><br><span class="line-number">124</span><br><span class="line-number">125</span><br><span class="line-number">126</span><br><span class="line-number">127</span><br><span class="line-number">128</span><br><span class="line-number">129</span><br><span class="line-number">130</span><br><span class="line-number">131</span><br><span class="line-number">132</span><br><span class="line-number">133</span><br><span class="line-number">134</span><br><span class="line-number">135</span><br><span class="line-number">136</span><br><span class="line-number">137</span><br><span class="line-number">138</span><br><span class="line-number">139</span><br><span class="line-number">140</span><br><span class="line-number">141</span><br><span class="line-number">142</span><br><span class="line-number">143</span><br><span class="line-number">144</span><br><span class="line-number">145</span><br><span class="line-number">146</span><br><span class="line-number">147</span><br><span class="line-number">148</span><br><span class="line-number">149</span><br><span class="line-number">150</span><br><span class="line-number">151</span><br><span class="line-number">152</span><br><span class="line-number">153</span><br><span class="line-number">154</span><br></div></div><h2 id="在-pubilc-目录里新建-version-json-版本号文件" tabindex="-1">在 pubilc 目录里新建 version.json，版本号文件 <a class="header-anchor" href="#在-pubilc-目录里新建-version-json-版本号文件" aria-label="Permalink to &quot;在 pubilc 目录里新建 version.json，版本号文件&quot;">​</a></h2><div class="language-json vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">json</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">{</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">  &quot;version&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;2025-08-29 16:23:20&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">  &quot;buildTime&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;2025-08-29T08:23:20.574Z&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">  &quot;environment&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;production&quot;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><h2 id="在入口文件-main-ts-里引入版本检测方法" tabindex="-1">在入口文件 main.ts 里引入版本检测方法 <a class="header-anchor" href="#在入口文件-main-ts-里引入版本检测方法" aria-label="Permalink to &quot;在入口文件 main.ts 里引入版本检测方法&quot;">​</a></h2><div class="language-typescript vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">typescript</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">/* eslint-disable simple-import-sort/imports */</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">import</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> { createApp } </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">from</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &#39;vue&#39;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">import</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> App </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">from</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &#39;./App.vue&#39;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">import</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> router </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">from</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &#39;./router&#39;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">import</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> { store } </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">from</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &#39;./store&#39;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">import</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> { startVersionCheck } </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">from</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &#39;./utils/versionCheck&#39;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> app</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> createApp</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(App)</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">app.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">use</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(store)</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">app.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">use</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(router)</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">app.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">mount</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;#app&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// 启动版本检测服务 (20秒检查一次)</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">startVersionCheck</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">1000</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> *</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 20</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br></div></div><h2 id="在-package-json-文件里新增打包命令脚本" tabindex="-1">在 package.json 文件里新增打包命令脚本 <a class="header-anchor" href="#在-package-json-文件里新增打包命令脚本" aria-label="Permalink to &quot;在 package.json 文件里新增打包命令脚本&quot;">​</a></h2><div class="language-json vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">json</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">  &quot;scripts&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: {</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">    &quot;build&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;tsx src/utils/update-version.ts &amp;&amp; vite build --mode release&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  }</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><blockquote><p>如果没有安装 tsx，需要先执行 npm i tsx 或者 pnpm add tsx 进行安装，上述主要改动其实就是新增了 tsx src/utils/update-version.ts，这样每次打包的时候就会更新版本号。</p></blockquote><h2 id="补充" tabindex="-1">补充 <a class="header-anchor" href="#补充" aria-label="Permalink to &quot;补充&quot;">​</a></h2><p>可以在网页的最底部显示当前的版本号，方便识别线上版本是否为正确版本。</p><p><img src="https://jiashu.jsdmirror.com/gh/Ruin-L/image@main/img/20250902105557169.png" alt=""></p><!--[--><!----><div class="vp-nolebase-git-changelog vp-nolebase-git-changelog-contributors vp-nolebase-git-changelog-contributors-container vp-nolebase-git-changelog-contributors-list" flex flex-wrap gap-4 pt-2><!--[--><!--[--><div class="flex items-center gap-2"><img src="https://gravatar.com/avatar/aae7ff69032346a77c469b2638035dce7e378982af058bbc5f5b9a5011560b6b?d=retro" alt="The avatar of contributor named as 刘引" class="h-8 w-8 rounded-full"> 刘引</div><!--]--><!--]--></div><!--]--><!--[--><h2 id="页面历史" data-v-507ac613>页面历史 <a class="header-anchor" href="#页面历史" aria-label="Permalink to &#39;页面历史&#39;" data-v-507ac613></a></h2><div class="bg-$vp-custom-block-details-bg vp-nolebase-git-changelog vp-nolebase-git-changelog-history vp-nolebase-git-changelog-history-list vp-nolebase-git-changelog-history-container" rounded-lg p-4 data-v-507ac613><label cursor-pointer data-v-507ac613><div class="vp-nolebase-git-changelog-title flex select-none items-center justify-between" transition="color ease-in-out" text="&lt;sm:xs" duration-200 data-v-507ac613><span class="vp-nolebase-git-changelog-last-edited-title inline-flex items-center gap-3" data-v-507ac613><div class="i-octicon:history-16" data-v-507ac613></div><span data-v-507ac613>最后编辑于 大约 1 个月前</span></span><div class="i-octicon:sort-desc-16" ml-auto mr-4 cursor-pointer data-v-507ac613></div><span class="vp-nolebase-git-changelog-view-full-history-title inline-flex cursor-pointer items-center gap-3" data-v-507ac613><span class="&lt;sm:hidden" data-v-507ac613>查看完整历史</span><svg class="rotate-0 i-octicon:chevron-down-16" transition="transform ease-in-out" duration-200 data-v-507ac613></svg></span></div></label><div style="display:none;" class="grid grid-cols-[30px_auto] mt-3 gap-1.5 children:my-auto -ml-1.5" text="&lt;sm:xs" data-v-507ac613><!--[--><!--[--><!--[--><div class="i-octicon:git-commit-16 m-auto rotate-90 transform op-30" data-v-7ab22c21></div><div flex gap-1 align-baseline data-v-7ab22c21><a href="https://github.com/Ruin-L/program-doc-source/commit/480a8c483eca9b1ffbed8dce27aff7ce10b461fe" target="_blank" class="no-icon" data-v-7ab22c21><code class="text-xs text-$vp-c-brand-1 hover:text-$vp-c-brand-1" transition="color ease-in-out" duration-200 data-v-7ab22c21>480a8c4</code></a><span data-v-7ab22c21>-</span><span data-v-7ab22c21><span class="text-sm &lt;sm:text-xs" data-v-7ab22c21>feat: 将图片CDN域名从jsdelivr迁移到jiashu.jsdmirror.com</span><!----><!----></span></div><!--]--><!--]--><!--[--><!--[--><div class="i-octicon:git-commit-16 m-auto rotate-90 transform op-30" data-v-7ab22c21></div><div flex gap-1 align-baseline data-v-7ab22c21><a href="https://github.com/Ruin-L/program-doc-source/commit/01ab1d3ffb4fffbfe1ff441b8ea20ea265a62819" target="_blank" class="no-icon" data-v-7ab22c21><code class="text-xs text-$vp-c-brand-1 hover:text-$vp-c-brand-1" transition="color ease-in-out" duration-200 data-v-7ab22c21>01ab1d3</code></a><span data-v-7ab22c21>-</span><span data-v-7ab22c21><span class="text-sm &lt;sm:text-xs" data-v-7ab22c21>feat: 优化前端构建流程并新增版本号自动更新功能</span><!----><!----></span></div><!--]--><!--]--><!--[--><!--[--><div class="i-octicon:git-commit-16 m-auto rotate-90 transform op-30" data-v-7ab22c21></div><div flex gap-1 align-baseline data-v-7ab22c21><a href="https://github.com/Ruin-L/program-doc-source/commit/3f20841597f25fafaeb546bdf74092608d144959" target="_blank" class="no-icon" data-v-7ab22c21><code class="text-xs text-$vp-c-brand-1 hover:text-$vp-c-brand-1" transition="color ease-in-out" duration-200 data-v-7ab22c21>3f20841</code></a><span data-v-7ab22c21>-</span><span data-v-7ab22c21><span class="text-sm &lt;sm:text-xs" data-v-7ab22c21>feat: 更新workbox版本并调整前端文档目录结构</span><!----><!----></span></div><!--]--><!--]--><!--]--></div></div><!--]--></div></div></main><footer class="VPDocFooter" data-v-0da11ca0 data-v-62d762cd><!--[--><!--]--><div class="edit-info" data-v-62d762cd><div class="edit-link" data-v-62d762cd><a class="VPLink link vp-external-link-icon no-icon edit-link-button" href="https://github.com/Ruin-L/program-doc-source/blob/main/src/views/开发/前端/检测版本更新/index.md" target="_blank" rel="noreferrer" data-v-62d762cd><!--[--><span class="vpi-square-pen edit-link-icon" data-v-62d762cd></span> 在github上编辑此页<!--]--></a></div><div class="last-updated" data-v-62d762cd><p class="VPLastUpdated" data-v-62d762cd data-v-cdd36bc6>最后更新: <time datetime="2025-09-17T07:22:35.000Z" data-v-cdd36bc6></time></p></div></div><nav class="prev-next" aria-labelledby="doc-footer-aria-label" data-v-62d762cd><span class="visually-hidden" id="doc-footer-aria-label" data-v-62d762cd>Pager</span><div class="pager" data-v-62d762cd><a class="VPLink link pager-link prev" href="/views/开发/前端/暗黑切换动画/" data-v-62d762cd><!--[--><span class="desc" data-v-62d762cd>上一篇</span><span class="title" data-v-62d762cd>暗黑切换动画</span><!--]--></a></div><div class="pager" data-v-62d762cd><a class="VPLink link pager-link next" href="/views/开发/前端/浏览器硬刷新/" data-v-62d762cd><!--[--><span class="desc" data-v-62d762cd>下一篇</span><span class="title" data-v-62d762cd>浏览器硬刷新</span><!--]--></a></div></nav></footer><!--[--><!--[--><!--[--><div style="margin-top:2rem;"><!----></div><!--]--><!--]--><!--]--></div></div></div><!--[--><!--]--></div></div><footer class="VPFooter has-sidebar" data-v-fb823837 data-v-a6fcc56f><div class="container" data-v-a6fcc56f><!----><p class="copyright" data-v-a6fcc56f> Copyright © 2025 葵花宝典</p></div></footer><!--[--><!--]--></div></div>
    <script>window.__VP_HASH_MAP__=JSON.parse("{\"index.md\":\"_X5JrH6N\",\"views_关于_index.md\":\"FJGjQy7w\",\"views_开发_前端_axios_index.md\":\"C7B2zLAQ\",\"views_开发_前端_css_index.md\":\"BxpUJUjS\",\"views_开发_前端_echarts_index.md\":\"DDmBCbWS\",\"views_开发_前端_echarts滚动条隐藏_index.md\":\"DFtdYuM1\",\"views_开发_前端_github工作流搭建_index.md\":\"C9a_RemS\",\"views_开发_前端_html_index.md\":\"CPZjuYj8\",\"views_开发_前端_index.md\":\"DPlX-nSD\",\"views_开发_前端_ios编辑vitepress文档攻略_index.md\":\"DhJiQtgR\",\"views_开发_前端_javascript_index.md\":\"VgTikza9\",\"views_开发_前端_pinia_index.md\":\"DnI9qlc0\",\"views_开发_前端_print_index.md\":\"CEcGA34F\",\"views_开发_前端_pwa应用_index.md\":\"DRwaImtY\",\"views_开发_前端_td-design_index.md\":\"BiY_oQlh\",\"views_开发_前端_typescript_index.md\":\"D7gNivX0\",\"views_开发_前端_uniapp_index.md\":\"YbXG6kt-\",\"views_开发_前端_vite_index.md\":\"CyLKXAYT\",\"views_开发_前端_vitepress 优化代码块样式_index.md\":\"CTgg1nOw\",\"views_开发_前端_vitepress 图片查看器插件_index.md\":\"C_jzFXFH\",\"views_开发_前端_vitepress显示git历史记录_index.md\":\"0UkaqqLY\",\"views_开发_前端_vitepress路由动画效果_index.md\":\"uOj5oovW\",\"views_开发_前端_vitepress阅读增强实现_index.md\":\"M677RMTL\",\"views_开发_前端_vitepress集成评论系统_index.md\":\"CCn24Nl2\",\"views_开发_前端_vue_index.md\":\"D5Q-7tKn\",\"views_开发_前端_使用 c-lodop 进行打印_index.md\":\"CmjkTw6Q\",\"views_开发_前端_兼容旧版浏览器_index.md\":\"DZV0suvX\",\"views_开发_前端_暗黑切换动画_index.md\":\"B3KQG9CR\",\"views_开发_前端_检测版本更新_index.md\":\"CWu55Bom\",\"views_开发_前端_浏览器硬刷新_index.md\":\"CvgtDZUk\",\"views_开发_前端_解决vscode同名文件后缀显示copy_index.md\":\"B_POvP1L\",\"views_开发_前端_闭包_index.md\":\"BLH0lHGV\",\"views_开发_后端_express_index.md\":\"Cbar0uJ_\",\"views_开发_后端_index.md\":\"DqmjhVYa\",\"views_开发_后端_linux下systemctl的使用_index.md\":\"CIRFMz2h\",\"views_开发_后端_mysql_index.md\":\"CYDqO8JP\",\"views_开发_后端_nginx_index.md\":\"B7_wzF0n\",\"views_开发_后端_vercel的使用_index.md\":\"Cy4eBrTQ\",\"views_开发_后端_在linux后台部署express服务_index.md\":\"iu2dRwjg\",\"views_生活_index.md\":\"C7WJ7wvW\",\"views_生活_健康_胆囊息肉_index.md\":\"BuPiAY5d\",\"views_生活_食谱_index.md\":\"B0LH-lJ9\",\"views_生活_食谱_煎牛排_index.md\":\"DfaHmpAp\",\"views_生活_食谱_番茄炒蛋_index.md\":\"DNBALv7C\",\"views_生活_食谱_香煎三文鱼_index.md\":\"D6_FLKls\",\"views_硬件_cpu天梯图_index.md\":\"BnFu4UFD\",\"views_硬件_index.md\":\"CqOPeITO\",\"views_硬件_soc天梯图_index.md\":\"9-napGJr\",\"views_硬件_ssd硬盘_index.md\":\"CDW6mYLd\",\"views_硬件_内存条_index.md\":\"GncZaGc-\",\"views_硬件_散热器_index.md\":\"CfZqBe1-\",\"views_硬件_显卡梯图_index.md\":\"BdQxVA8Q\",\"views_硬件_显示器_index.md\":\"BZgQP0dH\",\"views_硬件_电源_index.md\":\"BW4y0rvF\",\"views_硬件_装机_index.md\":\"hE0fsAT8\",\"views_硬件_键盘_index.md\":\"P_3OooPx\",\"views_硬件_鼠标_index.md\":\"CxBWnc5z\",\"views_软件_其他_index.md\":\"CSh8klld\",\"views_软件_其他_picgo图床_index.md\":\"DnvZhx9r\",\"views_软件_数据库应用_index.md\":\"CNrukdAF\",\"views_软件_数据库应用_mysql的安装_index.md\":\"qWTLbC9r\",\"views_软件_数据库应用_navicat_index.md\":\"z-5sKR8M\",\"views_软件_系统操作_anygo开启虚拟定位_index.md\":\"Cwa_-Jpm\",\"views_软件_系统操作_index.md\":\"CD9frY3U\",\"views_软件_系统操作_web网页打包为安卓app_index.md\":\"D31CrmSu\",\"views_软件_系统操作_windows下浏览器指定地址全屏_index.md\":\"C1n-GGHZ\",\"views_软件_系统操作_windows应用开机自启_index.md\":\"Bm17L2q3\",\"views_软件_系统操作_结束端口占用_index.md\":\"fUr485lV\",\"views_软件_系统操作_解决mac软件安装包损坏_index.md\":\"DAqHGLcy\",\"views_软件_网络代理_clash_index.md\":\"CsfN0_0i\",\"views_软件_网络代理_devsidecar_index.md\":\"2w6Kwt0e\",\"views_软件_网络代理_index.md\":\"R6PMVtfP\",\"views_软件_网络代理_shadowrocket_index.md\":\"coh98_YH\"}");window.__VP_SITE_DATA__=JSON.parse("{\"lang\":\"zh-CN\",\"dir\":\"ltr\",\"title\":\"葵花宝典\",\"description\":\"基于vitepress的开发手册\",\"base\":\"/\",\"head\":[],\"router\":{\"prefetchLinks\":true},\"appearance\":true,\"themeConfig\":{\"logo\":\"https://jiashu.jsdmirror.com/gh/Ruin-L/image/img/logo_transparent.png\",\"search\":{\"provider\":\"local\",\"options\":{\"translations\":{\"button\":{\"buttonText\":\"搜索文档\",\"buttonAriaLabel\":\"搜索文档\"},\"modal\":{\"noResultsText\":\"无法找到相关结果\",\"resetButtonTitle\":\"清除查询条件\",\"footer\":{\"selectText\":\"选择\",\"navigateText\":\"切换\"}}}}},\"nav\":[{\"text\":\"主页\",\"link\":\"/\"},{\"text\":\"开发\",\"items\":[{\"text\":\"前端\",\"link\":\"/views/开发/前端/\"},{\"text\":\"后端\",\"link\":\"/views/开发/后端/\"}]},{\"text\":\"软件\",\"items\":[{\"text\":\"网络代理\",\"link\":\"/views/软件/网络代理/\"},{\"text\":\"数据库应用\",\"link\":\"/views/软件/数据库应用/\"},{\"text\":\"系统操作\",\"link\":\"/views/软件/系统操作/\"},{\"text\":\"其他\",\"link\":\"/views/软件/其他/\"}]},{\"text\":\"硬件\",\"link\":\"/views/硬件/\"},{\"text\":\"生活\",\"link\":\"/views/生活/\"},{\"text\":\"关于\",\"link\":\"/views/关于/\"}],\"footer\":{\"copyright\":\" Copyright © 2025 葵花宝典\"},\"sidebar\":{\"/views/关于/\":[{\"text\":\"关于\",\"items\":[]}],\"/views/开发/\":[{\"text\":\"开发\",\"items\":[{\"text\":\"前端\",\"link\":\"/views/开发/前端/\",\"collapsed\":false,\"items\":[{\"text\":\"axios\",\"link\":\"/views/开发/前端/axios/\",\"collapsed\":false,\"items\":[]},{\"text\":\"css\",\"link\":\"/views/开发/前端/css/\",\"collapsed\":false,\"items\":[]},{\"text\":\"echarts\",\"link\":\"/views/开发/前端/echarts/\",\"collapsed\":false,\"items\":[]},{\"text\":\"echarts滚动条隐藏\",\"link\":\"/views/开发/前端/echarts滚动条隐藏/\",\"collapsed\":false,\"items\":[]},{\"text\":\"github工作流搭建\",\"link\":\"/views/开发/前端/github工作流搭建/\",\"collapsed\":false,\"items\":[]},{\"text\":\"html\",\"link\":\"/views/开发/前端/html/\",\"collapsed\":false,\"items\":[]},{\"text\":\"ios编辑vitepress文档攻略\",\"link\":\"/views/开发/前端/ios编辑vitepress文档攻略/\",\"collapsed\":false,\"items\":[]},{\"text\":\"javaScript\",\"link\":\"/views/开发/前端/javaScript/\",\"collapsed\":false,\"items\":[]},{\"text\":\"pinia\",\"link\":\"/views/开发/前端/pinia/\",\"collapsed\":false,\"items\":[]},{\"text\":\"print\",\"link\":\"/views/开发/前端/print/\",\"collapsed\":false,\"items\":[]},{\"text\":\"pwa应用\",\"link\":\"/views/开发/前端/pwa应用/\",\"collapsed\":false,\"items\":[]},{\"text\":\"td-design\",\"link\":\"/views/开发/前端/td-design/\",\"collapsed\":false,\"items\":[]},{\"text\":\"typeScript\",\"link\":\"/views/开发/前端/typeScript/\",\"collapsed\":false,\"items\":[]},{\"text\":\"uniapp\",\"link\":\"/views/开发/前端/uniapp/\",\"collapsed\":false,\"items\":[]},{\"text\":\"vite\",\"link\":\"/views/开发/前端/vite/\",\"collapsed\":false,\"items\":[]},{\"text\":\"VitePress 优化代码块样式\",\"link\":\"/views/开发/前端/VitePress 优化代码块样式/\",\"collapsed\":false,\"items\":[]},{\"text\":\"VitePress 图片查看器插件\",\"link\":\"/views/开发/前端/VitePress 图片查看器插件/\",\"collapsed\":false,\"items\":[]},{\"text\":\"vitepress显示git历史记录\",\"link\":\"/views/开发/前端/vitepress显示git历史记录/\",\"collapsed\":false,\"items\":[]},{\"text\":\"vitepress路由动画效果\",\"link\":\"/views/开发/前端/vitepress路由动画效果/\",\"collapsed\":false,\"items\":[]},{\"text\":\"vitepress阅读增强实现\",\"link\":\"/views/开发/前端/vitepress阅读增强实现/\",\"collapsed\":false,\"items\":[]},{\"text\":\"VitePress集成评论系统\",\"link\":\"/views/开发/前端/VitePress集成评论系统/\",\"collapsed\":false,\"items\":[]},{\"text\":\"vue\",\"link\":\"/views/开发/前端/vue/\",\"collapsed\":false,\"items\":[]},{\"text\":\"使用 C-lodop 进行打印\",\"link\":\"/views/开发/前端/使用 C-lodop 进行打印/\",\"collapsed\":false,\"items\":[]},{\"text\":\"兼容旧版浏览器\",\"link\":\"/views/开发/前端/兼容旧版浏览器/\",\"collapsed\":false,\"items\":[]},{\"text\":\"暗黑切换动画\",\"link\":\"/views/开发/前端/暗黑切换动画/\",\"collapsed\":false,\"items\":[]},{\"text\":\"检测版本更新\",\"link\":\"/views/开发/前端/检测版本更新/\",\"collapsed\":false,\"items\":[]},{\"text\":\"浏览器硬刷新\",\"link\":\"/views/开发/前端/浏览器硬刷新/\",\"collapsed\":false,\"items\":[]},{\"text\":\"解决vscode同名文件后缀显示copy\",\"link\":\"/views/开发/前端/解决vscode同名文件后缀显示copy/\",\"collapsed\":false,\"items\":[]},{\"text\":\"闭包\",\"link\":\"/views/开发/前端/闭包/\",\"collapsed\":false,\"items\":[]}]},{\"text\":\"后端\",\"link\":\"/views/开发/后端/\",\"collapsed\":false,\"items\":[{\"text\":\"express\",\"link\":\"/views/开发/后端/express/\",\"collapsed\":false,\"items\":[]},{\"text\":\"linux下systemctl的使用\",\"link\":\"/views/开发/后端/linux下systemctl的使用/\",\"collapsed\":false,\"items\":[]},{\"text\":\"mysql\",\"link\":\"/views/开发/后端/mysql/\",\"collapsed\":false,\"items\":[]},{\"text\":\"nginx\",\"link\":\"/views/开发/后端/nginx/\",\"collapsed\":false,\"items\":[]},{\"text\":\"vercel的使用\",\"link\":\"/views/开发/后端/vercel的使用/\",\"collapsed\":false,\"items\":[]},{\"text\":\"在linux后台部署express服务\",\"link\":\"/views/开发/后端/在linux后台部署express服务/\",\"collapsed\":false,\"items\":[]}]}]}],\"/views/生活/\":[{\"text\":\"生活\",\"items\":[{\"text\":\"健康\",\"link\":\"/views/生活/健康/\",\"collapsed\":false,\"items\":[{\"text\":\"胆囊息肉\",\"link\":\"/views/生活/健康/胆囊息肉/\",\"collapsed\":false,\"items\":[]}]},{\"text\":\"食谱\",\"link\":\"/views/生活/食谱/\",\"collapsed\":false,\"items\":[{\"text\":\"煎牛排\",\"link\":\"/views/生活/食谱/煎牛排/\",\"collapsed\":false,\"items\":[]},{\"text\":\"番茄炒蛋\",\"link\":\"/views/生活/食谱/番茄炒蛋/\",\"collapsed\":false,\"items\":[]},{\"text\":\"香煎三文鱼\",\"link\":\"/views/生活/食谱/香煎三文鱼/\",\"collapsed\":false,\"items\":[]}]}]}],\"/views/硬件/\":[{\"text\":\"硬件\",\"items\":[{\"text\":\"cpu天梯图\",\"link\":\"/views/硬件/cpu天梯图/\",\"collapsed\":false,\"items\":[]},{\"text\":\"soc天梯图\",\"link\":\"/views/硬件/soc天梯图/\",\"collapsed\":false,\"items\":[]},{\"text\":\"ssd硬盘\",\"link\":\"/views/硬件/ssd硬盘/\",\"collapsed\":false,\"items\":[]},{\"text\":\"内存条\",\"link\":\"/views/硬件/内存条/\",\"collapsed\":false,\"items\":[]},{\"text\":\"散热器\",\"link\":\"/views/硬件/散热器/\",\"collapsed\":false,\"items\":[]},{\"text\":\"显卡梯图\",\"link\":\"/views/硬件/显卡梯图/\",\"collapsed\":false,\"items\":[]},{\"text\":\"显示器\",\"link\":\"/views/硬件/显示器/\",\"collapsed\":false,\"items\":[]},{\"text\":\"电源\",\"link\":\"/views/硬件/电源/\",\"collapsed\":false,\"items\":[]},{\"text\":\"装机\",\"link\":\"/views/硬件/装机/\",\"collapsed\":false,\"items\":[]},{\"text\":\"键盘\",\"link\":\"/views/硬件/键盘/\",\"collapsed\":false,\"items\":[]},{\"text\":\"鼠标\",\"link\":\"/views/硬件/鼠标/\",\"collapsed\":false,\"items\":[]}]}],\"/views/软件/\":[{\"text\":\"软件\",\"items\":[{\"text\":\"其他\",\"link\":\"/views/软件/其他/\",\"collapsed\":false,\"items\":[{\"text\":\"picgo图床\",\"link\":\"/views/软件/其他/picgo图床/\",\"collapsed\":false,\"items\":[]}]},{\"text\":\"数据库应用\",\"link\":\"/views/软件/数据库应用/\",\"collapsed\":false,\"items\":[{\"text\":\"mysql的安装\",\"link\":\"/views/软件/数据库应用/mysql的安装/\",\"collapsed\":false,\"items\":[]},{\"text\":\"navicat\",\"link\":\"/views/软件/数据库应用/navicat/\",\"collapsed\":false,\"items\":[]}]},{\"text\":\"系统操作\",\"link\":\"/views/软件/系统操作/\",\"collapsed\":false,\"items\":[{\"text\":\"anygo开启虚拟定位\",\"link\":\"/views/软件/系统操作/anygo开启虚拟定位/\",\"collapsed\":false,\"items\":[]},{\"text\":\"web网页打包为安卓app\",\"link\":\"/views/软件/系统操作/web网页打包为安卓app/\",\"collapsed\":false,\"items\":[]},{\"text\":\"windows下浏览器指定地址全屏\",\"link\":\"/views/软件/系统操作/windows下浏览器指定地址全屏/\",\"collapsed\":false,\"items\":[]},{\"text\":\"windows应用开机自启\",\"link\":\"/views/软件/系统操作/windows应用开机自启/\",\"collapsed\":false,\"items\":[]},{\"text\":\"结束端口占用\",\"link\":\"/views/软件/系统操作/结束端口占用/\",\"collapsed\":false,\"items\":[]},{\"text\":\"解决mac软件安装包损坏\",\"link\":\"/views/软件/系统操作/解决mac软件安装包损坏/\",\"collapsed\":false,\"items\":[]}]},{\"text\":\"网络代理\",\"link\":\"/views/软件/网络代理/\",\"collapsed\":false,\"items\":[{\"text\":\"clash\",\"link\":\"/views/软件/网络代理/clash/\",\"collapsed\":false,\"items\":[]},{\"text\":\"devSidecar\",\"link\":\"/views/软件/网络代理/devSidecar/\",\"collapsed\":false,\"items\":[]},{\"text\":\"shadowrocket\",\"link\":\"/views/软件/网络代理/shadowrocket/\",\"collapsed\":false,\"items\":[]}]}]}]},\"notFound\":{\"title\":\"页面未找到\",\"quote\":\"但如果你不改变方向，继续寻找，你可能会到达你想去的地方。\",\"linkLabel\":\"返回首页\",\"linkText\":\"返回主页\"},\"editLink\":{\"pattern\":\"https://github.com/Ruin-L/program-doc-source/blob/main/src/:path\",\"text\":\"在github上编辑此页\"},\"outlineTitle\":\"本页目录\",\"lastUpdatedText\":\"最后更新\",\"darkModeSwitchLabel\":\"外观\",\"sidebarMenuLabel\":\"菜单\",\"returnToTopLabel\":\"返回顶部\",\"docFooter\":{\"prev\":\"上一篇\",\"next\":\"下一篇\"},\"socialLinks\":[{\"icon\":\"github\",\"link\":\"https://github.com/Ruin-L?tab=repositories\"}]},\"locales\":{\"/\":{\"lang\":\"zh-CN\",\"label\":\"简体中文\",\"title\":\"葵花宝典\",\"description\":\"基于vitepress的开发手册\"}},\"scrollOffset\":134,\"cleanUrls\":true}");</script>
    
  </body>
</html>