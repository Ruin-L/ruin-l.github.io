import{_ as l,C as i,c as p,o as t,aB as h,G as a}from"./chunks/framework.B_fJ6ASn.js";const b=JSON.parse('{"title":"在 VitePress 中集成 Giscus 评论系统","description":"","frontmatter":{},"headers":[],"relativePath":"views/开发/前端/VitePress集成评论系统/index.md","filePath":"views/开发/前端/VitePress集成评论系统/index.md","lastUpdated":1766127925000}'),r={name:"views/开发/前端/VitePress集成评论系统/index.md"};function k(c,s,u,E,o,d){const n=i("NolebaseGitContributors"),e=i("NolebaseGitChangelog");return t(),p("div",null,[s[0]||(s[0]=h(`<h1 id="在-vitepress-中集成-giscus-评论系统" tabindex="-1">在 VitePress 中集成 Giscus 评论系统 <a class="header-anchor" href="#在-vitepress-中集成-giscus-评论系统" aria-label="Permalink to &quot;在 VitePress 中集成 Giscus 评论系统&quot;">​</a></h1><p>Giscus 是一个基于 GitHub Discussions 的评论系统。本文将详细介绍如何使用 <code>vitepress-plugin-comment-with-giscus</code> 插件在 VitePress 中集成 Giscus，包括针对私有仓库的特殊解决方案和 Giscus GitHub App 的安装过程。</p><h2 id="giscus-官方网站" tabindex="-1">Giscus 官方网站 <a class="header-anchor" href="#giscus-官方网站" aria-label="Permalink to &quot;Giscus 官方网站&quot;">​</a></h2><p>在开始之前，请访问 Giscus 的官方网站：<a href="https://giscus.app/" target="_blank" rel="noreferrer">https://giscus.app</a></p><p>这个网站提供了 Giscus 的详细说明、配置选项，也是获取必要配置信息的地方。</p><h2 id="针对私有仓库的解决方案" tabindex="-1">针对私有仓库的解决方案 <a class="header-anchor" href="#针对私有仓库的解决方案" aria-label="Permalink to &quot;针对私有仓库的解决方案&quot;">​</a></h2><p>如果您的 VitePress 项目仓库是私有的，您可以创建一个单独的公开仓库来专门用于 Giscus 评论系统。这种方法有以下优点：</p><ol><li>保护主要项目代码：您的 VitePress 项目代码仍然可以保持私有。</li><li>评论管理分离：将评论与主要项目分开管理可能更加方便。</li><li>保持 Giscus 的所有功能：由于使用公开仓库，您可以充分利用 Giscus 的所有特性。</li></ol><h3 id="步骤" tabindex="-1">步骤 <a class="header-anchor" href="#步骤" aria-label="Permalink to &quot;步骤&quot;">​</a></h3><ol><li><p>创建新的公共仓库：</p><ul><li>在 GitHub 上创建一个新的公共仓库，专门用于存储评论。</li><li>可以给它起一个相关的名字，比如 &quot;my-site-comments&quot;。</li></ul></li><li><p>在新仓库中启用 Discussions：</p><ul><li>进入仓库设置。</li><li>在 &quot;Features&quot; 部分启用 &quot;Discussions&quot;。</li></ul></li><li><p>安装 Giscus GitHub App： 这一步骤非常重要，下面是详细的操作指南： a. 访问 Giscus GitHub App 安装页面：<a href="https://github.com/apps/giscus" target="_blank" rel="noreferrer">https://github.com/apps/giscus</a> 这是安装 Giscus GitHub App 的直接链接，点击它将直接带您到安装页面。 b. 在安装页面上，点击绿色的 &quot;Install&quot; 按钮。 c. 选择安装位置：</p><ul><li>如果您有多个组织账户，GitHub 会询问您想在哪里安装 Giscus。</li><li>选择您的个人账户或包含新创建的公共仓库的组织。</li></ul><p>d. 配置仓库访问：</p><ul><li>在下一页，您可以选择将 Giscus 安装到所有仓库，或者只选择特定的仓库。</li><li>为了安全起见，建议选择 &quot;Only select repositories&quot;。</li><li>然后从列表中选择您新创建的用于评论的公共仓库。</li></ul><p>e. 确认安装：</p><ul><li>仔细检查您的选择是否正确。</li><li>点击 &quot;Install&quot; 按钮确认安装。</li></ul><p>f. 授权访问：</p><ul><li>GitHub 可能会要求您再次输入密码以确认此操作。</li></ul><p>g. 完成安装：</p><ul><li>安装完成后，您会被重定向到 Giscus 的配置页面或者您的 GitHub 设置页面。</li></ul><p>安装完成后，Giscus 就获得了访问您指定仓库 Discussions 的权限。这使得 Giscus 可以创建、读取和管理 Discussions，这是评论系统正常工作所必需的。</p></li><li><p>配置 Giscus：</p><ul><li>访问 <a href="https://giscus.app/" target="_blank" rel="noreferrer">Giscus 配置页面</a>。</li><li>使用新创建的公共仓库信息进行配置。</li><li>选择其他所需的设置（如语言、主题等）。</li></ul></li></ol><h2 id="在-vitepress-中集成-giscus" tabindex="-1">在 VitePress 中集成 Giscus <a class="header-anchor" href="#在-vitepress-中集成-giscus" aria-label="Permalink to &quot;在 VitePress 中集成 Giscus&quot;">​</a></h2><p>使用 <code>vitepress-plugin-comment-with-giscus</code> 插件可以简化集成过程。</p><h3 id="安装插件" tabindex="-1">安装插件 <a class="header-anchor" href="#安装插件" aria-label="Permalink to &quot;安装插件&quot;">​</a></h3><p>安装 <code>vitepress-plugin-comment-with-giscus</code> 插件：</p><p><strong>bash</strong></p><div class="language- vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span># 使用 npm</span></span>
<span class="line"><span>npm i vitepress-plugin-comment-with-giscus</span></span>
<span class="line"><span></span></span>
<span class="line"><span># 或者使用 yarn</span></span>
<span class="line"><span>yarn add vitepress-plugin-comment-with-giscus</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><h3 id="配置插件" tabindex="-1">配置插件 <a class="header-anchor" href="#配置插件" aria-label="Permalink to &quot;配置插件&quot;">​</a></h3><p>在 .vitepress/theme 目录下的 index.js 文件中添加以下配置：</p><div class="language-js vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">import</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> DefaultTheme </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">from</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &#39;vitepress/theme&#39;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">import</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> giscusTalk </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">from</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &#39;vitepress-plugin-comment-with-giscus&#39;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">import</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> { useData, useRoute } </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">from</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &#39;vitepress&#39;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">import</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> { toRefs } </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">from</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &#39;vue&#39;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">export</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> default</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">  ...</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">DefaultTheme,</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">  enhanceApp</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">ctx</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    DefaultTheme.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">enhanceApp</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(ctx)</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  },</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">  setup</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">() {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    const</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> { </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">frontmatter</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> } </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> toRefs</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">useData</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">())</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> route</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> useRoute</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">()</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">    giscusTalk</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">      {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        repo: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;your-username/your-repo-name&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        repoId: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;your-repo-id&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        category: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;Announcements&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// 或其他分类</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        categoryId: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;your-category-id&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        mapping: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;pathname&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        inputPosition: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;top&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        lang: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;zh-CN&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        lightTheme: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;light&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        darkTheme: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;transparent_dark&#39;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">      },</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">      {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        frontmatter,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        route</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">      },</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">      true</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    )</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br></div></div><h3 id="获取-giscus-配置" tabindex="-1">获取 Giscus 配置 <a class="header-anchor" href="#获取-giscus-配置" aria-label="Permalink to &quot;获取 Giscus 配置&quot;">​</a></h3><p>要获取必要的配置信息，请按照以下步骤操作：</p><h4 id="访问-giscus-配置页面" tabindex="-1">访问 Giscus 配置页面 <a class="header-anchor" href="#访问-giscus-配置页面" aria-label="Permalink to &quot;访问 Giscus 配置页面&quot;">​</a></h4><p>填写您的仓库信息（使用公共评论仓库的信息）并选择偏好设置 在生成的脚本中找到相应的配置值</p><h4 id="自定义选项" tabindex="-1">自定义选项 <a class="header-anchor" href="#自定义选项" aria-label="Permalink to &quot;自定义选项&quot;">​</a></h4><p>homePageShowComment: 设置是否在首页显示评论区（默认为 false） locales: 配置多语言支持 在 frontmatter 中使用 comment: false 可以在特定页面禁用评论</p>`,25)),a(n),a(e)])}const m=l(r,[["render",k]]);export{b as __pageData,m as default};
