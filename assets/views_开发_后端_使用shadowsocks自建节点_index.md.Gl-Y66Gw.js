import{_ as l,C as n,c as i,o as r,aB as c,G as a}from"./chunks/framework.B_fJ6ASn.js";const v=JSON.parse('{"title":"使用shadowsocks自建节点","description":"","frontmatter":{},"headers":[],"relativePath":"views/开发/后端/使用shadowsocks自建节点/index.md","filePath":"views/开发/后端/使用shadowsocks自建节点/index.md","lastUpdated":1769598864000}'),o={name:"views/开发/后端/使用shadowsocks自建节点/index.md"};function t(b,s,u,d,m,h){const p=n("NolebaseGitContributors"),e=n("NolebaseGitChangelog");return r(),i("div",null,[s[0]||(s[0]=c(`<h1 id="使用shadowsocks自建节点" tabindex="-1">使用shadowsocks自建节点 <a class="header-anchor" href="#使用shadowsocks自建节点" aria-label="Permalink to &quot;使用shadowsocks自建节点&quot;">​</a></h1><p>由于境内网络的一些波动，我们访问一些国外网站或者下载有一些依赖的时候经常遇到网络问题，这里推荐使用香港云服务器配合shadowsocks做转发，实现不限流量的访问。</p><h2 id="一、服务端安装shadowsocks" tabindex="-1">一、服务端安装shadowsocks <a class="header-anchor" href="#一、服务端安装shadowsocks" aria-label="Permalink to &quot;一、服务端安装shadowsocks&quot;">​</a></h2><p>1、更新系统依赖</p><p><code>sudo apt-get update</code></p><p><code>sudo apt-get upgrade -y</code></p><p>2、下载shadowsocks</p><p><code>sudo apt-get install shadowsocks-libev python3-pip -y</code></p><p>3、编辑配置文件</p><p><code>sudo vim /etc/shadowsocks-libev/config.json</code></p><div class="language- vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span>{</span></span>
<span class="line"><span>    &quot;server&quot;: &quot;0.0.0.0&quot;,</span></span>
<span class="line"><span>    &quot;server_port&quot;: 8388,</span></span>
<span class="line"><span>    &quot;password&quot;: &quot;your_password&quot;,</span></span>
<span class="line"><span>    &quot;timeout&quot;: 300,</span></span>
<span class="line"><span>    &quot;method&quot;: &quot;chacha20-ietf-poly1305&quot;,</span></span>
<span class="line"><span>    &quot;fast_open&quot;: false</span></span>
<span class="line"><span>}</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br></div></div><p>4、启动</p><div class="language- vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span>sudo systemctl start shadowsocks-libev</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br></div></div><p>5、设置开机自启</p><div class="language- vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span>sudo systemctl enable shadowsocks-libev</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br></div></div><p>6、查看启动状态</p><div class="language- vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span>sudo systemctl status shadowsocks-libev</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br></div></div><p>如果出现active (running) 字样则代表启动成功</p><h2 id="二、客户端安装" tabindex="-1">二、客户端安装 <a class="header-anchor" href="#二、客户端安装" aria-label="Permalink to &quot;二、客户端安装&quot;">​</a></h2><p>这里以windows的clash客户端为例</p><p>1、撰写配置文件</p><div class="language- vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span></span></span>
<span class="line"><span># Clash 配置文件（适配您的 Shadowsocks 节点）</span></span>
<span class="line"><span># 保存为 config.yaml 后，在 Clash 中通过 &quot;Profiles&quot; → &quot;Import&quot; 导入</span></span>
<span class="line"><span></span></span>
<span class="line"><span>port: 7890 # HTTP 代理端口（Clash 默认）</span></span>
<span class="line"><span>socks-port: 7891 # SOCKS5 代理端口（Clash 默认）</span></span>
<span class="line"><span>redir-port: 7892 # 透明代理端口（可选，一般不用）</span></span>
<span class="line"><span>allow-lan: false # 是否允许局域网设备连接（默认 false）</span></span>
<span class="line"><span>mode: rule # 代理模式：rule（规则分流）/ global（全局代理）/ direct（直连）</span></span>
<span class="line"><span>log-level: info # 日志级别：info/warning/error/debug</span></span>
<span class="line"><span>external-controller: 127.0.0.1:9090 # 控制面板地址（Clash Dashboard 用）</span></span>
<span class="line"><span>secret: &#39;&#39; # 控制面板密码（留空则无需密码）</span></span>
<span class="line"><span></span></span>
<span class="line"><span># 代理节点列表（核心：添加您的 Shadowsocks 节点）</span></span>
<span class="line"><span>proxies:</span></span>
<span class="line"><span>  - name: &#39;My-Shadowsocks-Server&#39; # 节点名称（自定义，如&quot;VPS-SS&quot;）</span></span>
<span class="line"><span>    type: ss # 节点类型：Shadowsocks（固定为 ss）</span></span>
<span class="line"><span>    server: x.x.x.x # 服务器 IP（您的 VPS 公网 IP）</span></span>
<span class="line"><span>    port: 8388 # 服务器端口（配置文件中 server_port）</span></span>
<span class="line"><span>    password: &#39;xxxxxxxxx&#39; # 连接密码（配置文件中 password）</span></span>
<span class="line"><span>    cipher:</span></span>
<span class="line"><span>      chacha20-ietf-poly1305 # 【关键】加密方式（必须与服务端一致！）</span></span>
<span class="line"><span>      # 若服务端实际用 chacha20-ietf-poly1305，此处改为该值</span></span>
<span class="line"><span>    udp: true # 启用 UDP 转发（推荐勾选，避免 DNS 污染）</span></span>
<span class="line"><span></span></span>
<span class="line"><span># 代理组（定义节点分组，用于分流）</span></span>
<span class="line"><span>proxy-groups:</span></span>
<span class="line"><span>  - name: &#39;PROXY&#39; # 默认代理组名称（不可改，Clash 内置逻辑依赖）</span></span>
<span class="line"><span>    type: select # 手动选择节点（可选 url-test/ fallback 自动测速）</span></span>
<span class="line"><span>    proxies: # 包含的节点（这里仅添加您的 SS 节点）</span></span>
<span class="line"><span>      - &#39;My-Shadowsocks-Server&#39; # 对应上面 proxies 中的节点名称</span></span>
<span class="line"><span></span></span>
<span class="line"><span>  - name: &#39;Auto&#39; # 自动测速组（可选，自动选延迟最低的节点）</span></span>
<span class="line"><span>    type: url-test # 基于 URL 测速（需配置 url 和 interval）</span></span>
<span class="line"><span>    proxies:</span></span>
<span class="line"><span>      - &#39;My-Shadowsocks-Server&#39;</span></span>
<span class="line"><span>    url: &#39;http://www.gstatic.com/generate_204&#39; # 测速 URL（Google 验证页）</span></span>
<span class="line"><span>    interval: 300 # 测速间隔（秒）</span></span>
<span class="line"><span></span></span>
<span class="line"><span># 规则列表（流量分流逻辑：国内直连，国外走代理）</span></span>
<span class="line"><span>rules:</span></span>
<span class="line"><span>  - DOMAIN-SUFFIX,local,DIRECT # 本地域名直连</span></span>
<span class="line"><span>  - IP-CIDR,127.0.0.0/8,DIRECT # 本地回环直连</span></span>
<span class="line"><span>  - IP-CIDR,192.168.0.0/16,DIRECT # 局域网直连</span></span>
<span class="line"><span>  - IP-CIDR,10.0.0.0/8,DIRECT # 局域网直连</span></span>
<span class="line"><span>  - IP-CIDR,172.16.0.0/12,DIRECT # 局域网直连</span></span>
<span class="line"><span>  - DOMAIN-KEYWORD,google,PROXY # 含 google 的域名走代理</span></span>
<span class="line"><span>  - DOMAIN-KEYWORD,youtube,PROXY # 含 youtube 的域名走代理</span></span>
<span class="line"><span>  - DOMAIN-SUFFIX,github.io,PROXY # GitHub 相关走代理</span></span>
<span class="line"><span>  - DOMAIN-SUFFIX,twitter.com,PROXY # Twitter 走代理</span></span>
<span class="line"><span>  - GEOIP,CN,DIRECT # 中国 IP 直连（避免国内流量绕路）</span></span>
<span class="line"><span>  - MATCH,PROXY # 其余所有流量走默认代理组（PROXY）</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br><span class="line-number">40</span><br><span class="line-number">41</span><br><span class="line-number">42</span><br><span class="line-number">43</span><br><span class="line-number">44</span><br><span class="line-number">45</span><br><span class="line-number">46</span><br><span class="line-number">47</span><br><span class="line-number">48</span><br><span class="line-number">49</span><br><span class="line-number">50</span><br><span class="line-number">51</span><br><span class="line-number">52</span><br></div></div><p><img src="https://cdn.jsdelivr.net/gh/Ruin-L/image@main/img/20260123153601825.png" alt=""></p><h2 id="三、问题排查" tabindex="-1">三、问题排查 <a class="header-anchor" href="#三、问题排查" aria-label="Permalink to &quot;三、问题排查&quot;">​</a></h2><p>使用一下的命令将结果发给AI排查</p><div class="language- vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span>sudo tcpdump -i eth0 port 8388 -nn</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br></div></div>`,26)),a(p),a(e)])}const k=l(o,[["render",t]]);export{v as __pageData,k as default};
