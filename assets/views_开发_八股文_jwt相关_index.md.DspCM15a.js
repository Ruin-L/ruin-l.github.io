import{_ as t,C as a,c as l,o as p,aB as r,G as n}from"./chunks/framework.B_fJ6ASn.js";const b=JSON.parse('{"title":"JWT","description":"","frontmatter":{},"headers":[],"relativePath":"views/开发/八股文/jwt相关/index.md","filePath":"views/开发/八股文/jwt相关/index.md","lastUpdated":1765250787000}'),o={name:"views/开发/八股文/jwt相关/index.md"};function h(d,s,c,u,k,g){const i=a("NolebaseGitContributors"),e=a("NolebaseGitChangelog");return p(),l("div",null,[s[0]||(s[0]=r(`<h1 id="jwt" tabindex="-1">JWT <a class="header-anchor" href="#jwt" aria-label="Permalink to &quot;JWT&quot;">​</a></h1><p>JWT（JSON Web Token）是一种开放标准（RFC 7519），用于在各方之间以紧凑、自包含的 JSON 对象安全传输信息。其核心是通过数字签名确保数据的完整性和真实性，广泛应用于身份认证、授权和信息交换等场景。</p><hr><h2 id="jwt-的核心结构" tabindex="-1"><strong>JWT 的核心结构</strong> <a class="header-anchor" href="#jwt-的核心结构" aria-label="Permalink to &quot;**JWT 的核心结构**&quot;">​</a></h2><p>JWT 由三部分组成，用点（<code>.</code>）分隔：</p><ol><li><p><strong>Header（头部）</strong></p><p>包含令牌类型（<code>JWT</code>）和签名算法（如 <code>HS256</code>或 <code>RS256</code>），示例：</p></li></ol><div class="language- vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span>   { &quot;alg&quot;: &quot;HS256&quot;, &quot;typ&quot;: &quot;JWT&quot; }</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br></div></div><p>通过 Base64Url 编码后形成第一部分。</p><ol><li><p><strong>Payload（载荷）</strong></p><p>存储实际数据（声明），包括：</p></li></ol><ul><li><p><strong>标准声明</strong> ：如 <code>iss</code>（签发者）、<code>exp</code>（过期时间）、<code>sub</code>（用户 ID）。</p></li><li><p><strong>自定义声明</strong> ：如用户角色、权限等。</p><p>示例：</p></li></ul><div class="language- vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span>   { &quot;sub&quot;: &quot;12345&quot;, &quot;name&quot;: &quot;Alice&quot;, &quot;admin&quot;: true }</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br></div></div><p>同样经过 Base64Url 编码。</p><ol><li><p><strong>Signature（签名）</strong></p><p>由头部和载荷拼接后，通过密钥和指定算法生成，用于验证数据未被篡改。例如使用 HMAC 算法：</p></li></ol><div class="language- vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span>   HMACSHA256(Header.Payload, secret)</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br></div></div><p>签名结果经过 Base64Url 编码，形成第三部分。</p><hr><h2 id="jwt-的应用场景" tabindex="-1"><strong>JWT 的应用场景</strong> <a class="header-anchor" href="#jwt-的应用场景" aria-label="Permalink to &quot;**JWT 的应用场景**&quot;">​</a></h2><ol><li><p><strong>身份认证</strong></p><ul><li>用户登录后，服务端生成 JWT 返回客户端，后续请求通过 <code>Authorization: Bearer &lt;token&gt;</code>携带令牌，服务端验证签名即可识别用户身份。</li><li>支持无状态会话，适用于分布式系统和微服务架构。</li></ul></li><li><p><strong>信息交换</strong></p><ul><li>安全传输数据（如权限信息），签名确保数据未被篡改。</li></ul></li><li><p><strong>单点登录（SSO）</strong></p></li></ol><ul><li>跨域场景下，用户一次登录即可访问多个系统，减少重复认证。</li></ul><hr><h2 id="jwt-的优缺点" tabindex="-1"><strong>JWT 的优缺点</strong> <a class="header-anchor" href="#jwt-的优缺点" aria-label="Permalink to &quot;**JWT 的优缺点**&quot;">​</a></h2><p><strong>优点</strong> ：</p><ul><li><p><strong>无状态</strong> ：服务端无需存储会话信息，降低服务器压力。</p></li><li><p><strong>跨平台</strong> ：基于 JSON 格式，兼容多种编程语言。</p></li><li><p><strong>安全性</strong> ：签名防止数据篡改，支持加密（如 JWE）增强保密性。</p><p><strong>缺点</strong> ：</p></li><li><p><strong>不可撤销</strong> ：令牌一旦签发，在有效期内无法直接撤销（需结合黑名单或刷新令牌机制）。</p></li><li><p><strong>数据明文</strong> ：Payload 可被解码，需避免存储敏感信息（如密码）。</p></li><li><p><strong>存储风险</strong> ：若通过 <code>localStorage</code>存储，可能被 XSS 攻击窃取。</p></li></ul><hr><h2 id="jwt-的典型使用流程" tabindex="-1"><strong>JWT 的典型使用流程</strong> <a class="header-anchor" href="#jwt-的典型使用流程" aria-label="Permalink to &quot;**JWT 的典型使用流程**&quot;">​</a></h2><ol><li><strong>用户登录</strong> ：客户端提交凭证（如用户名/密码）。</li><li><strong>服务端验证</strong> ：验证通过后生成 JWT，返回给客户端。</li><li><strong>客户端携带令牌</strong> ：后续请求将 JWT 放入请求头。</li><li><strong>服务端验证</strong> ：解析 JWT，验证签名和有效期，确认用户身份。</li></ol><hr><h2 id="安全建议" tabindex="-1"><strong>安全建议</strong> <a class="header-anchor" href="#安全建议" aria-label="Permalink to &quot;**安全建议**&quot;">​</a></h2><ul><li><strong>使用 HTTPS</strong> ：防止传输过程中被截获。</li><li><strong>设置短有效期</strong> ：减少令牌泄露后的风险，结合刷新令牌机制。</li><li><strong>选择强算法</strong> ：如 <code>RS256</code>（非对称加密）优于 <code>HS256</code>（对称加密）。</li><li><strong>验证所有声明</strong> ：包括 <code>exp</code>（过期时间）、<code>iss</code>（签发者）等。</li></ul><hr><h2 id="示例代码-生成与验证" tabindex="-1"><strong>示例代码（生成与验证）</strong> <a class="header-anchor" href="#示例代码-生成与验证" aria-label="Permalink to &quot;**示例代码（生成与验证）**&quot;">​</a></h2><div class="language-javascript vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">javascript</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">import</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> jwt</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">from</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> datetime import datetime, timedelta</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"># 生成JWT</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">secret = </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;your_secret_key&quot;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">payload = {</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">    &quot;sub&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;user123&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">    &quot;exp&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: datetime.utcnow() + timedelta(hours=1)</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">token = jwt.encode(payload, secret, algorithm=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;HS256&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"># 验证JWT</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">try:</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    decoded = jwt.decode(token, secret, algorithms=[</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;HS256&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">])</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    print(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;Valid token:&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, decoded)</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">except jwt.ExpiredSignatureError:</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    print(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;Token expired&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">except jwt.InvalidTokenError:</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    print(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;Invalid token&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br></div></div><hr><h2 id="总结" tabindex="-1"><strong>总结</strong> <a class="header-anchor" href="#总结" aria-label="Permalink to &quot;**总结**&quot;">​</a></h2><p>JWT 通过紧凑的结构和签名机制，实现了安全、高效的身份认证与信息传输。尽管存在不可撤销等限制，但通过合理设计（如结合刷新令牌、短有效期），它仍是现代 Web 应用中广泛使用的认证方案。</p>`,35)),n(i),n(e)])}const m=t(o,[["render",h]]);export{b as __pageData,m as default};
