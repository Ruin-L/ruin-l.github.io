import{_ as l,C as a,c as t,o as p,aB as r,G as i}from"./chunks/framework.B_fJ6ASn.js";const F=JSON.parse('{"title":"Dify éƒ¨ç½²å’Œè¿è¡Œ","description":"","frontmatter":{},"headers":[],"relativePath":"views/å¼€å‘/åç«¯/Dify éƒ¨ç½²å’Œè¿è¡Œ/index.md","filePath":"views/å¼€å‘/åç«¯/Dify éƒ¨ç½²å’Œè¿è¡Œ/index.md","lastUpdated":1768208076000}'),h={name:"views/å¼€å‘/åç«¯/Dify éƒ¨ç½²å’Œè¿è¡Œ/index.md"};function d(o,s,c,k,b,g){const n=a("NolebaseGitContributors"),e=a("NolebaseGitChangelog");return p(),t("div",null,[s[0]||(s[0]=r(`<h1 id="dify-éƒ¨ç½²å’Œè¿è¡Œ" tabindex="-1">Dify éƒ¨ç½²å’Œè¿è¡Œ <a class="header-anchor" href="#dify-éƒ¨ç½²å’Œè¿è¡Œ" aria-label="Permalink to &quot;Dify éƒ¨ç½²å’Œè¿è¡Œ&quot;">â€‹</a></h1><h3 id="_1-ä¸ºä»€ä¹ˆé€‰æ‹©éƒ¨ç½²-0-15-4-è€Œä¸æ˜¯æœ€æ–°ç‰ˆ" tabindex="-1">1 ä¸ºä»€ä¹ˆé€‰æ‹©éƒ¨ç½² 0.15.4 è€Œä¸æ˜¯æœ€æ–°ç‰ˆï¼Ÿ <a class="header-anchor" href="#_1-ä¸ºä»€ä¹ˆé€‰æ‹©éƒ¨ç½²-0-15-4-è€Œä¸æ˜¯æœ€æ–°ç‰ˆ" aria-label="Permalink to &quot;1 ä¸ºä»€ä¹ˆé€‰æ‹©éƒ¨ç½² 0.15.4 è€Œä¸æ˜¯æœ€æ–°ç‰ˆï¼Ÿ&quot;">â€‹</a></h3><h4 id="_1-1-æœ€æ–°ç‰ˆ-dify-çš„éƒ¨ç½²éš¾ç‚¹" tabindex="-1">1.1 æœ€æ–°ç‰ˆ <strong>Dify</strong> çš„éƒ¨ç½²éš¾ç‚¹ <a class="header-anchor" href="#_1-1-æœ€æ–°ç‰ˆ-dify-çš„éƒ¨ç½²éš¾ç‚¹" aria-label="Permalink to &quot;1.1 æœ€æ–°ç‰ˆ **Dify** çš„éƒ¨ç½²éš¾ç‚¹&quot;">â€‹</a></h4><p>ä» Dify <strong>v1.x.x</strong> ç‰ˆæœ¬å¼€å§‹ï¼Œå¼•å…¥äº†æ’ä»¶æœåŠ¡ <code>plugin-daemon</code>ï¼Œæ­¤æœåŠ¡åŸºäº <strong>Go</strong> ç¼–å†™ï¼Œå¹¶éœ€å•ç‹¬ç¼–è¯‘ã€è¿è¡Œã€‚ç”±äºè¯¥æœåŠ¡è®¾è®¡ä¸ºåœ¨ <a href="https://so.csdn.net/so/search?q=Linux&amp;spm=1001.2101.3001.7020" target="_blank" rel="noreferrer">Linux</a>/<strong>Docker</strong> ç¯å¢ƒä¸­è¿è¡Œï¼š</p><ul><li>âŒ Windows åŸç”Ÿç¯å¢ƒè¿è¡Œ <code>plugin-daemon</code> å¤æ‚ï¼Œéœ€è¦æœ¬åœ°é…ç½® Go ç¯å¢ƒå¹¶æ‰‹åŠ¨ç¼–è¯‘ã€‚</li><li>âŒ å®˜æ–¹ä¸å†æä¾› Windows ä¸‹çš„é Docker éƒ¨ç½²æ–¹å¼ã€‚</li><li>âŒ æ’ä»¶æœåŠ¡ä¾èµ– Unix Socketï¼Œä¸å…¼å®¹ Windowsã€‚</li><li>âœ… æ¨èéƒ¨ç½²æ–¹å¼ä¸ºä½¿ç”¨ Docker æˆ– WSLã€‚</li></ul><h4 id="_1-2-ä¸ºä»€ä¹ˆé€‰æ‹©-0-15-4-ç‰ˆæœ¬" tabindex="-1">1.2 ä¸ºä»€ä¹ˆé€‰æ‹© 0.15.4 ç‰ˆæœ¬ï¼Ÿ <a class="header-anchor" href="#_1-2-ä¸ºä»€ä¹ˆé€‰æ‹©-0-15-4-ç‰ˆæœ¬" aria-label="Permalink to &quot;1.2 ä¸ºä»€ä¹ˆé€‰æ‹© 0.15.4 ç‰ˆæœ¬ï¼Ÿ&quot;">â€‹</a></h4><ul><li>âœ… <strong>æ— æ’ä»¶æœåŠ¡ä¾èµ–</strong> ï¼Œæºç å¹²å‡€ï¼Œéƒ¨ç½²é€»è¾‘æ¸…æ™°ã€‚</li><li>âœ… å¯åœ¨çº¯ Windows ç³»ç»Ÿä¸­è¿è¡Œï¼Œæ— éœ€å®‰è£… Docker/WSLã€‚</li><li>âœ… é€‚åˆæœ¬åœ°è°ƒè¯•ã€äºŒæ¬¡å¼€å‘æˆ–éæ­£å¼ç¯å¢ƒéƒ¨ç½²ã€‚</li></ul><hr><h3 id="_2-æºç å‡†å¤‡å’Œç¯å¢ƒé…ç½®" tabindex="-1">2 æºç å‡†å¤‡å’Œç¯å¢ƒé…ç½® <a class="header-anchor" href="#_2-æºç å‡†å¤‡å’Œç¯å¢ƒé…ç½®" aria-label="Permalink to &quot;2 æºç å‡†å¤‡å’Œç¯å¢ƒé…ç½®&quot;">â€‹</a></h3><h4 id="_2-1-å…‹éš†-dify-æºç ä»“åº“" tabindex="-1">2.1 å…‹éš† Dify æºç ä»“åº“ <a class="header-anchor" href="#_2-1-å…‹éš†-dify-æºç ä»“åº“" aria-label="Permalink to &quot;2.1 å…‹éš† Dify æºç ä»“åº“&quot;">â€‹</a></h4><div class="language-bash vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">git</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> clone</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> https://github.com/langgenius/dify.git</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">cd</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> dify</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">git</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> checkout</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> tags/v0.15.4</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">æ™ºèƒ½ä½“ç¼–ç¨‹bash123</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><h4 id="_2-1-ç›´æ¥ä¸‹è½½å¯¹å°±ç‰ˆæœ¬çš„æºç ä»“åº“" tabindex="-1">2.1 ç›´æ¥ä¸‹è½½å¯¹å°±ç‰ˆæœ¬çš„æºç ä»“åº“ <a class="header-anchor" href="#_2-1-ç›´æ¥ä¸‹è½½å¯¹å°±ç‰ˆæœ¬çš„æºç ä»“åº“" aria-label="Permalink to &quot;2.1 ç›´æ¥ä¸‹è½½å¯¹å°±ç‰ˆæœ¬çš„æºç ä»“åº“&quot;">â€‹</a></h4><p><img src="https://i-blog.csdnimg.cn/direct/43007b1055eb46b6b8bab2187f154800.png" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°"></p><hr><h3 id="_3-å®‰è£…å’Œé…ç½®-postgresql-æ•°æ®åº“" tabindex="-1">3 å®‰è£…å’Œé…ç½® <strong>PostgreSQL</strong> æ•°æ®åº“ <a class="header-anchor" href="#_3-å®‰è£…å’Œé…ç½®-postgresql-æ•°æ®åº“" aria-label="Permalink to &quot;3 å®‰è£…å’Œé…ç½® **PostgreSQL** æ•°æ®åº“&quot;">â€‹</a></h3><blockquote><p>ğŸ’¡ Dify ä¾èµ– PostgreSQL æ•°æ®åº“ã€‚å»ºè®®ä½¿ç”¨ PostgreSQL 14 æˆ–ä»¥ä¸Šç‰ˆæœ¬ã€‚</p></blockquote><h4 id="_3-1-ä¸‹è½½-postgresql" tabindex="-1">3.1 ä¸‹è½½ PostgreSQL <a class="header-anchor" href="#_3-1-ä¸‹è½½-postgresql" aria-label="Permalink to &quot;3.1 ä¸‹è½½ PostgreSQL&quot;">â€‹</a></h4><p>å‰å¾€å®˜ç½‘ä¸‹è½½å®‰è£…ï¼š ğŸ‘‰ <a href="https://www.postgresql.org/download/windows/" target="_blank" rel="noreferrer">https://www.postgresql.org/download/windows/</a></p><h4 id="_3-2-å®‰è£…-postgresql" tabindex="-1">3.2 å®‰è£… PostgreSQL <a class="header-anchor" href="#_3-2-å®‰è£…-postgresql" aria-label="Permalink to &quot;3.2 å®‰è£… PostgreSQL&quot;">â€‹</a></h4><p>å®‰è£…æ—¶è®°å¾—ï¼š</p><ul><li>è®°ä¸‹ç”¨æˆ·åå’Œå¯†ç ï¼ˆä¾‹å¦‚ï¼š<code>postgres</code> / <code>your_password</code>ï¼‰</li><li>ç«¯å£ä¸€èˆ¬é»˜è®¤ä¸º <code>5432</code></li><li>å®‰è£…å®Œæˆåå¯ä»¥ç”¨ pgAdmin GUI å·¥å…·ç®¡ç†æ•°æ®åº“</li></ul><h4 id="_3-3-åˆ›å»ºæ•°æ®åº“" tabindex="-1">3.3 åˆ›å»º<strong>æ•°æ®åº“</strong> <a class="header-anchor" href="#_3-3-åˆ›å»ºæ•°æ®åº“" aria-label="Permalink to &quot;3.3 åˆ›å»º**æ•°æ®åº“**&quot;">â€‹</a></h4><ol><li>ä½¿ç”¨ pgAdmin æˆ–å‘½ä»¤è¡Œè¿æ¥ PostgreSQL</li><li>åˆ›å»ºæ•°æ®åº“ <code>dify</code></li></ol><div class="language-sql vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">sql</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">CREATE</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> DATABASE</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> dify</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">æ™ºèƒ½ä½“ç¼–ç¨‹sql1</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><p><img src="https://i-blog.csdnimg.cn/direct/1d2fcf37ed7c4fb6b07bbe9c2211293f.png" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°"></p><hr><h3 id="_4-åç«¯æœåŠ¡éƒ¨ç½²-api" tabindex="-1">4 åç«¯æœåŠ¡éƒ¨ç½²ï¼ˆAPIï¼‰ <a class="header-anchor" href="#_4-åç«¯æœåŠ¡éƒ¨ç½²-api" aria-label="Permalink to &quot;4 åç«¯æœåŠ¡éƒ¨ç½²ï¼ˆAPIï¼‰&quot;">â€‹</a></h3><h4 id="_4-1-é…ç½®-python-ç¯å¢ƒ" tabindex="-1">4.1 é…ç½® Python ç¯å¢ƒ <a class="header-anchor" href="#_4-1-é…ç½®-python-ç¯å¢ƒ" aria-label="Permalink to &quot;4.1 é…ç½® Python ç¯å¢ƒ&quot;">â€‹</a></h4><p>Dify ä½¿ç”¨ <a href="https://python-poetry.org/" target="_blank" rel="noreferrer"><code>Poetry</code></a> ç®¡ç†ä¾èµ–ã€‚</p><ol><li>å®‰è£… Python 3.12ï¼ˆå»ºè®®ä½¿ç”¨ <a href="https://www.python.org/downloads/windows/" target="_blank" rel="noreferrer">å®˜æ–¹å®‰è£…å™¨</a>ï¼‰</li><li>å®‰è£… Poetryï¼š</li></ol><div class="language-bash vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">pip</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> install</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> poetry</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">æ™ºèƒ½ä½“ç¼–ç¨‹bash1</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><p>éªŒè¯å®‰è£…ï¼š</p><div class="language-bash vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">poetry</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> --version</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">æ™ºèƒ½ä½“ç¼–ç¨‹bash1</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><h4 id="_4-2-å¤åˆ¶ç¯å¢ƒæ–‡ä»¶" tabindex="-1">4.2 å¤åˆ¶ç¯å¢ƒæ–‡ä»¶ <a class="header-anchor" href="#_4-2-å¤åˆ¶ç¯å¢ƒæ–‡ä»¶" aria-label="Permalink to &quot;4.2 å¤åˆ¶ç¯å¢ƒæ–‡ä»¶&quot;">â€‹</a></h4><div class="language-bash vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">cd</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> api</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">copy</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> .env.example</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> .env</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">æ™ºèƒ½ä½“ç¼–ç¨‹bash12</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><h4 id="_4-3-é…ç½®-secret-key" tabindex="-1">4.3 é…ç½® SECRET_KEY <a class="header-anchor" href="#_4-3-é…ç½®-secret-key" aria-label="Permalink to &quot;4.3 é…ç½® SECRET_KEY&quot;">â€‹</a></h4><p>æ‰“å¼€ <code>.env</code> æ–‡ä»¶ï¼Œå°† <code>SECRET_KEY</code> ä¿®æ”¹ä¸ºä»»æ„ 42 å­—ç¬¦çš„å­—ç¬¦ä¸²ã€‚ä¾‹å¦‚ä½¿ç”¨ Python ç”Ÿæˆï¼š</p><div class="language-python vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">python</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">import</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> base64, os</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">print</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(base64.b64encode(os.urandom(</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">32</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)).decode())</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">æ™ºèƒ½ä½“ç¼–ç¨‹pythonè¿è¡Œ12</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><p>ç„¶åå¤åˆ¶è¾“å‡ºå†…å®¹æ›¿æ¢ <code>.env</code> ä¸­çš„ <code>SECRET_KEY=...</code></p><h4 id="_4-4-è®¾ç½®æ•°æ®åº“è¿æ¥" tabindex="-1">4.4 è®¾ç½®æ•°æ®åº“è¿æ¥ <a class="header-anchor" href="#_4-4-è®¾ç½®æ•°æ®åº“è¿æ¥" aria-label="Permalink to &quot;4.4 è®¾ç½®æ•°æ®åº“è¿æ¥&quot;">â€‹</a></h4><p>åœ¨ <code>.env</code> ä¸­é…ç½®ï¼š</p><div class="language-env vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">env</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span># PostgreSQL database configuration</span></span>
<span class="line"><span>DB_USERNAME=root</span></span>
<span class="line"><span>DB_PASSWORD=root</span></span>
<span class="line"><span>DB_HOST=10.0.0.93</span></span>
<span class="line"><span>DB_PORT=5432</span></span>
<span class="line"><span>DB_DATABASE=dify</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><p>å°†å…¶æ”¹ä¸ºä½ è‡ªå·±çš„ PostgreSQL ç”¨æˆ·åã€å¯†ç ã€‚</p><h4 id="_4-5-å®‰è£…ä¾èµ–å¹¶åˆå§‹åŒ–ç¯å¢ƒ" tabindex="-1">4.5 å®‰è£…ä¾èµ–å¹¶åˆå§‹åŒ–ç¯å¢ƒ <a class="header-anchor" href="#_4-5-å®‰è£…ä¾èµ–å¹¶åˆå§‹åŒ–ç¯å¢ƒ" aria-label="Permalink to &quot;4.5 å®‰è£…ä¾èµ–å¹¶åˆå§‹åŒ–ç¯å¢ƒ&quot;">â€‹</a></h4><div class="language-bash vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">poetry</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> env</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> use</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> python3.12</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">poetry</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> install</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">æ™ºèƒ½ä½“ç¼–ç¨‹bash123</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><h4 id="_4-6-æ•°æ®åº“è¿ç§»" tabindex="-1">4.6 æ•°æ®åº“è¿ç§» <a class="header-anchor" href="#_4-6-æ•°æ®åº“è¿ç§»" aria-label="Permalink to &quot;4.6 æ•°æ®åº“è¿ç§»&quot;">â€‹</a></h4><div class="language-bash vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">poetry</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> run</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> python</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -m</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> flask</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> db</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> upgrade</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">æ™ºèƒ½ä½“ç¼–ç¨‹bash1</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><p>æ•°æ®åº“è¿ç§»ç»“æœå®Œæˆæœ‰ 73 å¼ è¡¨ï¼ŒæŸ¥çœ‹æ•°æ®åº“è¡¨çŠ¶å†µï¼Œå¦‚ä¸‹å›¾ï¼š <img src="https://i-blog.csdnimg.cn/direct/5ee625d6ca2a4329b6204a19b7a73450.png" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°"></p><h4 id="_4-7-å¯åŠ¨åç«¯æœåŠ¡" tabindex="-1">4.7 å¯åŠ¨åç«¯æœåŠ¡ <a class="header-anchor" href="#_4-7-å¯åŠ¨åç«¯æœåŠ¡" aria-label="Permalink to &quot;4.7 å¯åŠ¨åç«¯æœåŠ¡&quot;">â€‹</a></h4><div class="language-bash vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">poetry</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> run</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> python</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -m</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> flask</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> run</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> --host</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 0.0.0.0</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> --port=5001</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">æ™ºèƒ½ä½“ç¼–ç¨‹bash1</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><p><img src="https://i-blog.csdnimg.cn/direct/db229f432d3045a9b95a4cc8c954bc1a.png" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°"></p><hr><h3 id="_5-å¯åŠ¨å¼‚æ­¥ä»»åŠ¡-worker" tabindex="-1">5 å¯åŠ¨å¼‚æ­¥ä»»åŠ¡ Worker <a class="header-anchor" href="#_5-å¯åŠ¨å¼‚æ­¥ä»»åŠ¡-worker" aria-label="Permalink to &quot;5 å¯åŠ¨å¼‚æ­¥ä»»åŠ¡ Worker&quot;">â€‹</a></h3><p>å¼‚æ­¥ä»»åŠ¡å¤„ç†å¦‚æ•°æ®é›†å¯¼å…¥ã€ç´¢å¼•ç­‰æ“ä½œï¼š</p><div class="language-bash vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">poetry</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> run</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> python</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -m</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> celery</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -A</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> app.celery</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> worker</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -P</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> gevent</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -c</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 1</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> --loglevel</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> INFO</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -Q</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> dataset,generation,mail,ops_trace,app_deletion</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br></div></div><p>æ³¨æ„è¿™ä¸ªä»»åŠ¡ä¸å¯åŠ¨çš„è¯ï¼ŒçŸ¥è¯†åº“æ–‡æ¡£çš„å‘é‡ä¸ä¼šè¿›è¡Œï¼Œä¸Šè¿°ä¸º windows çš„å¯åŠ¨å‘½ä»¤ï¼Œæ ¸å¿ƒéœ€è¦åœ¨è™šæ‹Ÿç¯å¢ƒé‡Œã€‚</p><p><img src="https://i-blog.csdnimg.cn/direct/45ae49e3ac454fe895e8def00f0c9426.png" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°"></p><hr><h3 id="_6-å‰ç«¯éƒ¨ç½²-web" tabindex="-1">6 å‰ç«¯éƒ¨ç½²ï¼ˆWEBï¼‰ <a class="header-anchor" href="#_6-å‰ç«¯éƒ¨ç½²-web" aria-label="Permalink to &quot;6 å‰ç«¯éƒ¨ç½²ï¼ˆWEBï¼‰&quot;">â€‹</a></h3><h4 id="_6-1-å®‰è£…-node-js-å’Œ-ä¾èµ–" tabindex="-1">6.1 å®‰è£… Node.js å’Œ ä¾èµ– <a class="header-anchor" href="#_6-1-å®‰è£…-node-js-å’Œ-ä¾èµ–" aria-label="Permalink to &quot;6.1 å®‰è£… Node.js å’Œ ä¾èµ–&quot;">â€‹</a></h4><p>ä¸‹è½½ LTS ç‰ˆ Node.jsï¼š<a href="https://nodejs.org/en/download" target="_blank" rel="noreferrer">https://nodejs.org/en/download</a> è¿™é‡Œéœ€è¦ V20 ä»¥ä¸Šçš„ç‰ˆæœ¬ï¼Œä¸ç„¶å¯èƒ½ä¼šæŠ¥å„ç§é”™.</p><h4 id="_6-2-å®‰è£…å‰ç«¯ä¾èµ–" tabindex="-1">6.2 å®‰è£…å‰ç«¯ä¾èµ– <a class="header-anchor" href="#_6-2-å®‰è£…å‰ç«¯ä¾èµ–" aria-label="Permalink to &quot;6.2 å®‰è£…å‰ç«¯ä¾èµ–&quot;">â€‹</a></h4><div class="language-bash vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">cd</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> ../web</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">npm</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> install</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">æ™ºèƒ½ä½“ç¼–ç¨‹bash12</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><h4 id="_6-3-é…ç½®ç¯å¢ƒå˜é‡" tabindex="-1">6.3 é…ç½®ç¯å¢ƒå˜é‡ <a class="header-anchor" href="#_6-3-é…ç½®ç¯å¢ƒå˜é‡" aria-label="Permalink to &quot;6.3 é…ç½®ç¯å¢ƒå˜é‡&quot;">â€‹</a></h4><div class="language-bash vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">copy</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> .env.example</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> .env.local</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">æ™ºèƒ½ä½“ç¼–ç¨‹bash1</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><p>ä¿®æ”¹ <code>.env.local</code> æ–‡ä»¶ä¸­çš„ä»¥ä¸‹å†…å®¹ï¼š</p><div class="language-env vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">env</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span>NEXT_PUBLIC_API_PREFIX=http://localhost:5001/console/api</span></span>
<span class="line"><span>NEXT_PUBLIC_PUBLIC_API_PREFIX=http://localhost:5001/api</span></span>
<span class="line"><span>æ™ºèƒ½ä½“ç¼–ç¨‹env12</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><p>å…¶ä½™ä¿æŒé»˜è®¤å³å¯ã€‚</p><h4 id="_6-4-å¯åŠ¨å‰ç«¯å¼€å‘æœåŠ¡" tabindex="-1">6.4 å¯åŠ¨å‰ç«¯å¼€å‘æœåŠ¡ <a class="header-anchor" href="#_6-4-å¯åŠ¨å‰ç«¯å¼€å‘æœåŠ¡" aria-label="Permalink to &quot;6.4 å¯åŠ¨å‰ç«¯å¼€å‘æœåŠ¡&quot;">â€‹</a></h4><div class="language-bash vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">npm</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> run</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> dev</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">æ™ºèƒ½ä½“ç¼–ç¨‹bash1</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><p><img src="https://i-blog.csdnimg.cn/direct/6b4cc1c5e8464046a1c52451eb6d7b9a.png" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°"></p><p>è®¿é—®æµè§ˆå™¨ï¼š<a href="http://localhost:3000/" target="_blank" rel="noreferrer">http://localhost:3000/</a><img src="https://i-blog.csdnimg.cn/direct/bdec6359e09347cfab2e7157350f9b9f.png" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°"><img src="https://i-blog.csdnimg.cn/direct/ead8140878f64baba0f6a203e8517156.png" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°"></p><hr><h3 id="_7-æ€»ç»“ä¸åç»­å»ºè®®" tabindex="-1">7 æ€»ç»“ä¸åç»­å»ºè®® <a class="header-anchor" href="#_7-æ€»ç»“ä¸åç»­å»ºè®®" aria-label="Permalink to &quot;7 æ€»ç»“ä¸åç»­å»ºè®®&quot;">â€‹</a></h3><h4 id="_7-1-æˆåŠŸéƒ¨ç½²æ ‡å¿—" tabindex="-1">7.1 æˆåŠŸéƒ¨ç½²æ ‡å¿— <a class="header-anchor" href="#_7-1-æˆåŠŸéƒ¨ç½²æ ‡å¿—" aria-label="Permalink to &quot;7.1 æˆåŠŸéƒ¨ç½²æ ‡å¿—&quot;">â€‹</a></h4><ul><li><a href="http://localhost:3000/" target="_blank" rel="noreferrer">http://localhost:3000/</a> å¯è®¿é—®æ§åˆ¶å°ç•Œé¢</li><li>åç«¯ 5001 æ¥å£è¿”å›æ•°æ®æ­£å¸¸</li><li>å¯é€šè¿‡æ§åˆ¶å°æ·»åŠ  API Keysã€æ¨¡å‹ç­‰æ“ä½œ</li></ul><h4 id="_7-2-åç»­å¯é€‰é…ç½®" tabindex="-1">7.2 åç»­å¯é€‰é…ç½® <a class="header-anchor" href="#_7-2-åç»­å¯é€‰é…ç½®" aria-label="Permalink to &quot;7.2 åç»­å¯é€‰é…ç½®&quot;">â€‹</a></h4><ul><li>âœ… ä½¿ç”¨ Nginx åšåå‘ä»£ç†ï¼Œå®ç°æ­£å¼éƒ¨ç½²</li><li>âœ… é…ç½® httpsã€åŸŸåè®¿é—®</li><li>âœ… å‰åç«¯æ‰“åŒ…è¿è¡Œåœ¨ç”Ÿäº§ç¯å¢ƒ</li></ul><h4 id="_7-3-æ¨èä½¿ç”¨åœºæ™¯" tabindex="-1">7.3 æ¨èä½¿ç”¨åœºæ™¯ <a class="header-anchor" href="#_7-3-æ¨èä½¿ç”¨åœºæ™¯" aria-label="Permalink to &quot;7.3 æ¨èä½¿ç”¨åœºæ™¯&quot;">â€‹</a></h4><ul><li>æœ¬åœ°æµ‹è¯•æˆ–å®šåˆ¶å¼€å‘</li><li>æƒ³æ·±å…¥äº†è§£ Dify åŸç†çš„å¼€å‘è€…</li><li>ä¸æ„¿æ„å®‰è£… Docker / WSL çš„å¼€å‘ç¯å¢ƒ</li></ul><hr><h3 id="_8-é™„å½•-é—®é¢˜æ’æŸ¥" tabindex="-1">8 é™„å½•ï¼šé—®é¢˜æ’æŸ¥ <a class="header-anchor" href="#_8-é™„å½•-é—®é¢˜æ’æŸ¥" aria-label="Permalink to &quot;8 é™„å½•ï¼šé—®é¢˜æ’æŸ¥&quot;">â€‹</a></h3><table tabindex="0"><thead><tr><th>é—®é¢˜</th><th>å¯èƒ½åŸå› </th><th>è§£å†³æ–¹æ¡ˆ</th></tr></thead><tbody><tr><td>åç«¯æŠ¥é”™è¿æ¥æ•°æ®åº“å¤±è´¥</td><td>æ•°æ®åº“é…ç½®ä¸æ­£ç¡®</td><td>æ£€æŸ¥ <code>.env</code> ä¸­çš„ <code>DATABASE_URL</code></td></tr><tr><td>å¯åŠ¨ Celery æŠ¥é”™æ‰¾ä¸åˆ° gevent</td><td>gevent æœªå®‰è£…</td><td><code>poetry install</code> åè‡ªåŠ¨å®‰è£…</td></tr><tr><td>å‰ç«¯è®¿é—® 5001 æŠ¥è·¨åŸŸé”™è¯¯</td><td>æ²¡æœ‰è®¾ç½®å…è®¸è·¨åŸŸ</td><td>ä¿®æ”¹ Flask åç«¯æ·»åŠ  CORS æ”¯æŒ</td></tr></tbody></table><hr><p>ğŸ“ å¦‚éœ€å°† plugin-daemon æ‰‹åŠ¨è¿è¡Œäº Windowsï¼Œéœ€è¦é¢å¤–é…ç½® Go ç¯å¢ƒï¼Œå»ºè®®ä½¿ç”¨ Linux æˆ– Docker æ–¹å¼æ›´ä¸ºç¨³å¦¥ã€‚</p><h3 id="_9-linux-éƒ¨ç½²æ³¨æ„äº‹é¡¹" tabindex="-1">9 linux éƒ¨ç½²æ³¨æ„äº‹é¡¹ <a class="header-anchor" href="#_9-linux-éƒ¨ç½²æ³¨æ„äº‹é¡¹" aria-label="Permalink to &quot;9 linux éƒ¨ç½²æ³¨æ„äº‹é¡¹&quot;">â€‹</a></h3><p>éœ€è¦è‡ªå·±ç”Ÿæˆä¸€ä¸ª rsa å¯†é’¥ï¼Œå¦åˆ™çº¿ä¸Šæ¨¡å‹ã€å›¾æ ‡ç­‰å†…å®¹ä¼šæ— æ³•è®¿é—®ï¼Œè®¿é—®å¤±è´¥</p><div class="language-bash vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">cd</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> /var/www/Dify/api</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">source</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> .venv/bin/activate</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">python</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -c</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &quot;</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">from Crypto.PublicKey import RSA</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">import os</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">tenant_id = &#39;d81ee652-f0df-4c18-9d94-d6f67f6cfa58&#39;</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">storage_path = &#39;/var/www/Dify/api/storage&#39;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"># åˆ›å»ºç›®å½•</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">dir_path = f&#39;{storage_path}/privkeys/{tenant_id}&#39;</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">os.makedirs(dir_path, exist_ok=True)</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"># ç”Ÿæˆå¯†é’¥</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">private_key = RSA.generate(2048)</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">pem_private = private_key.export_key()</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"># å†™å…¥æ–‡ä»¶</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">filepath = f&#39;{dir_path}/private.pem&#39;</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">with open(filepath, &#39;wb&#39;) as f:</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">    f.write(pem_private)</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">print(f&#39;RSA private key saved to: {filepath}&#39;)</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">print(f&#39;Key size: {len(pem_private)} bytes&#39;)</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">print(f&#39;Directory exists: {os.path.exists(dir_path)}&#39;)</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br></div></div>`,88)),i(n),i(e)])}const m=l(h,[["render",d]]);export{F as __pageData,m as default};
