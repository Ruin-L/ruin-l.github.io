import{_ as p,C as s,c as l,o as r,aB as t,G as e}from"./chunks/framework.B_fJ6ASn.js";const v=JSON.parse('{"title":"web 网页打包为安卓 app","description":"","frontmatter":{},"headers":[],"relativePath":"views/软件/系统操作/web网页打包为安卓app/index.md","filePath":"views/软件/系统操作/web网页打包为安卓app/index.md","lastUpdated":1769598864000}'),o={name:"views/软件/系统操作/web网页打包为安卓app/index.md"};function d(c,a,u,b,h,g){const n=s("NolebaseGitContributors"),i=s("NolebaseGitChangelog");return r(),l("div",null,[a[0]||(a[0]=t(`<h1 id="web-网页打包为安卓-app" tabindex="-1">web 网页打包为安卓 app <a class="header-anchor" href="#web-网页打包为安卓-app" aria-label="Permalink to &quot;web 网页打包为安卓 app&quot;">​</a></h1><p>日常开发中，我们可能需要将前端的页面变为一个安卓 app，方便用户的在平板或者手机上使用，此时我们有两种解决方案。其中网页转 app 方案需要服务器，第二种方案无需服务器。</p><h2 id="一、使用网页转应用-app" tabindex="-1">一、使用网页转应用 APP <a class="header-anchor" href="#一、使用网页转应用-app" aria-label="Permalink to &quot;一、使用网页转应用 APP&quot;">​</a></h2><h2 id="app-下载" tabindex="-1">APP 下载 <a class="header-anchor" href="#app-下载" aria-label="Permalink to &quot;APP 下载&quot;">​</a></h2><p><a href="https://cloud.189.cn/t/AZBBfuIZ7BBn" target="_blank" rel="noreferrer">下载链接(天翼云盘)</a>（访问码：9nne）</p><h2 id="配置" tabindex="-1">配置 <a class="header-anchor" href="#配置" aria-label="Permalink to &quot;配置&quot;">​</a></h2><img src="https://cdn.jsdelivr.net/gh/Ruin-L/image/img/20250930135316.jpg" width="260" alt="配置示意图"><h2 id="注意事项" tabindex="-1">注意事项 <a class="header-anchor" href="#注意事项" aria-label="Permalink to &quot;注意事项&quot;">​</a></h2><blockquote><p>打包后出来的应用并不自带浏览器功能，实际使用的浏览器为系统默认 webview，如果系统的浏览器内核版本很低，那么很可能在该设备上访问我们的网站是空白的，此时我们需要更改打包配置来兼容低版本安卓，可参照我的另外一篇文章【<a href="/views/开发/前端/兼容旧版浏览器/#兼容旧版浏览器">兼容旧版本浏览器</a>】。</p></blockquote><h2 id="二、使用-capacitor-配合安卓-studio" tabindex="-1">二、使用 Capacitor 配合安卓 Studio <a class="header-anchor" href="#二、使用-capacitor-配合安卓-studio" aria-label="Permalink to &quot;二、使用 Capacitor 配合安卓 Studio&quot;">​</a></h2><p>以下是使用 Capacitor 将 Vue 项目打包为安卓应用的完整步骤：</p><hr><h3 id="一、环境准备" tabindex="-1"><strong>一、环境准备</strong> <a class="header-anchor" href="#一、环境准备" aria-label="Permalink to &quot;**一、环境准备**&quot;">​</a></h3><ol><li><strong>安装基础工具</strong><ul><li><p>确保已安装 Node.js、npm 和 Android Studio（需配置 Android SDK 及命令行工具）</p></li><li><p>验证环境：</p><div class="language- vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span>node -v</span></span>
<span class="line"><span>npm -v</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div></li></ul></li></ol><hr><h3 id="二、vue-项目配置" tabindex="-1"><strong>二、Vue 项目配置</strong> <a class="header-anchor" href="#二、vue-项目配置" aria-label="Permalink to &quot;**二、Vue 项目配置**&quot;">​</a></h3><ol><li><p><strong>构建生产环境代码</strong></p><p>在 Vue 项目根目录执行：</p><div class="language- vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span>npm run build</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br></div></div><p>生成 <code>dist</code>目录（包含 HTML/CSS/JS 等静态文件）</p></li><li><p><strong>安装 Capacitor 依赖</strong></p><div class="language- vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span>npm install @capacitor/core @capacitor/cli</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br></div></div></li><li><p><strong>初始化 Capacitor</strong></p><div class="language- vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span>npx cap init</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br></div></div><ul><li>设置应用名称（如 <code>My Vue App</code>）</li><li>设置应用包名（如 <code>com.example.myapp</code>，需符合反向域名格式）</li><li>确认 Web 资源目录为 <code>dist</code></li></ul></li></ol><hr><h3 id="三、添加-android-平台" tabindex="-1"><strong>三、添加 Android 平台</strong> <a class="header-anchor" href="#三、添加-android-平台" aria-label="Permalink to &quot;**三、添加 Android 平台**&quot;">​</a></h3><ol><li><p><strong>安装 Android 支持库</strong></p><div class="language- vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span>npm install @capacitor/android</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br></div></div></li><li><p><strong>添加 Android 平台</strong></p><div class="language- vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span>npx cap add android</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br></div></div><ul><li>自动生成 <code>android/</code>目录（包含完整的 Android Studio 项目）</li></ul></li></ol><hr><h3 id="四、同步与构建" tabindex="-1"><strong>四、同步与构建</strong> <a class="header-anchor" href="#四、同步与构建" aria-label="Permalink to &quot;**四、同步与构建**&quot;">​</a></h3><ol><li><p><strong>同步 Web 资源</strong></p><div class="language- vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span>npx cap copy android</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br></div></div><ul><li>将 <code>dist</code>内容复制到 Android 项目的 <code>assets</code>目录</li></ul></li><li><p><strong>打开 Android Studio</strong></p><div class="language- vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span>npx cap open android</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br></div></div><ul><li>等待 Gradle 同步完成（首次需下载依赖）</li></ul></li><li><p><strong>构建 APK</strong></p><ul><li><p>在 Android Studio 中点击：</p><p><code>Build -&gt; Build Bundle(s)/APK(s) -&gt; Build APK(s)</code></p></li><li><p>生成的 APK 位于 <code>android/app/build/outputs/apk/debug/app-debug.apk</code></p></li></ul></li></ol><hr><h3 id="五、关键配置" tabindex="-1"><strong>五、关键配置</strong> <a class="header-anchor" href="#五、关键配置" aria-label="Permalink to &quot;**五、关键配置**&quot;">​</a></h3><ol><li><p><strong>网络请求兼容性</strong></p><ul><li><strong>方法 1（推荐）</strong> ：后端启用 HTTPS</li><li><strong>方法 2</strong> ：在 <code>android/app/src/main/res/xml/network_security_config.xml</code>中允许 HTTP：</li></ul><div class="language- vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span>&lt;base-config cleartextTrafficPermitted=&quot;true&quot; /&gt;</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br></div></div><ul><li><p>在 <code>AndroidManifest.xml</code>中引用配置：</p><div class="language- vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span>&lt;application</span></span>
<span class="line"><span>  android:networkSecurityConfig=&quot;@xml/network_security_config&quot;</span></span>
<span class="line"><span>  ...&gt;</span></span>
<span class="line"><span>&lt;/application&gt;</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div></li><li><p>修改 <code>capacitor.config.json</code>的 <code>server.androidScheme</code>为 <code>http</code></p></li></ul></li><li><p><strong>应用图标适配</strong></p><ul><li>使用工具生成多分辨率图标（如 Android Asset Studio）</li><li>替换 <code>android/app/src/main/res/mipmap-*</code>目录下的图标文件</li></ul></li></ol><hr><h3 id="六、发布-release-版本" tabindex="-1"><strong>六、发布 Release 版本</strong> <a class="header-anchor" href="#六、发布-release-版本" aria-label="Permalink to &quot;**六、发布 Release 版本**&quot;">​</a></h3><ol><li><p><strong>生成签名密钥</strong></p><div class="language- vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span>keytool -genkey -v -keystore my-app-release-key.keystore -alias my-app-alias -keyalg RSA -keysize 2048 -validity 10000</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br></div></div></li><li><p><strong>配置 <code>keystore.properties</code></strong></p><div class="language- vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span>storePassword=your_password</span></span>
<span class="line"><span>keyAlias=your_alias</span></span>
<span class="line"><span>keyPassword=your_password</span></span>
<span class="line"><span>storeFile=android/app/my-app-release-key.keystore</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div></li><li><p><strong>修改 <code>build.gradle</code></strong></p><div class="language- vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span>android {</span></span>
<span class="line"><span>  signingConfigs {</span></span>
<span class="line"><span>    release {</span></span>
<span class="line"><span>      storeFile file(keystoreProperties.storeFile)</span></span>
<span class="line"><span>      storePassword keystoreProperties.storePassword</span></span>
<span class="line"><span>      keyAlias keystoreProperties.keyAlias</span></span>
<span class="line"><span>      keyPassword keystoreProperties.keyPassword</span></span>
<span class="line"><span>    }</span></span>
<span class="line"><span>  }</span></span>
<span class="line"><span>  buildTypes {</span></span>
<span class="line"><span>    release {</span></span>
<span class="line"><span>      signingConfig signingConfigs.release</span></span>
<span class="line"><span>      minifyEnabled true</span></span>
<span class="line"><span>      shrinkResources true</span></span>
<span class="line"><span>    }</span></span>
<span class="line"><span>  }</span></span>
<span class="line"><span>}</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br></div></div></li><li><p><strong>构建 Release APK</strong></p><div class="language- vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span>cd android</span></span>
<span class="line"><span>./gradlew assembleRelease</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><ul><li>APK 位于 <code>android/app/build/outputs/apk/release/app-release.apk</code></li></ul></li></ol><hr><h3 id="七、常见问题" tabindex="-1"><strong>七、常见问题</strong> <a class="header-anchor" href="#七、常见问题" aria-label="Permalink to &quot;**七、常见问题**&quot;">​</a></h3><ul><li><strong>JDK 版本错误</strong> ：确保使用 JDK 17 或 21，避免编译错误</li><li><strong>白屏问题</strong> ：检查 <code>INTERNET</code>权限是否声明</li><li><strong>跨域问题</strong> ：后端需配置 CORS 允许 <code>http://localhost</code></li></ul><hr><p>通过以上步骤，即可将 Vue 项目打包为安卓应用。建议首次构建后通过 Android Studio 调试，确保功能正常。</p>`,34)),e(n),e(i)])}const k=p(o,[["render",d]]);export{v as __pageData,k as default};
