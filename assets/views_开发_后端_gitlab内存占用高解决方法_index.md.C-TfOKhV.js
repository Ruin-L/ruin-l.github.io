import{_ as m,C as c,c as l,o as t,aB as a,j as o,G as e,a as _}from"./chunks/framework.B_fJ6ASn.js";const y=JSON.parse('{"title":"gitlab内存占用高解决方法","description":"","frontmatter":{},"headers":[],"relativePath":"views/开发/后端/gitlab内存占用高解决方法/index.md","filePath":"views/开发/后端/gitlab内存占用高解决方法/index.md","lastUpdated":1769162354000}'),r={name:"views/开发/后端/gitlab内存占用高解决方法/index.md"};function i(C,n,h,w,p,k){const d=c("NolebaseGitContributors"),s=c("NolebaseGitChangelog");return t(),l("div",null,[n[0]||(n[0]=a('<h1 id="gitlab内存占用高解决方法" tabindex="-1">gitlab内存占用高解决方法 <a class="header-anchor" href="#gitlab内存占用高解决方法" aria-label="Permalink to &quot;gitlab内存占用高解决方法&quot;">​</a></h1><h4 id="一、问题定位-gitlab进程内存占用过高" tabindex="-1"><strong>一、问题定位：GitLab进程内存占用过高</strong> <a class="header-anchor" href="#一、问题定位-gitlab进程内存占用过高" aria-label="Permalink to &quot;**一、问题定位：GitLab进程内存占用过高**&quot;">​</a></h4><p>从 <code>top</code>输出可见， <strong>git用户下的bundle进程</strong> （如PID 3765、3751等）是内存占用的主要来源，每个进程占用约1GB内存（RES列），且CPU使用率极低（%CPU≈0）。结合GitLab的运行机制，这些进程均为Puma（GitLab默认Web服务器）的Worker线程，用于处理Web请求。</p><p><strong>关键依据</strong> ：</p><ul><li>GitLab社区版从13.x版本开始默认使用Puma替代Unicorn，Puma的Worker数量默认等于CPU核心数（+1），若服务器CPU核心数较多（如8核），则会启动大量Worker，导致内存占用飙升。</li><li>若Puma配置未限制Worker数量或内存，长期运行会导致内存泄漏（如Ruby的GC未及时回收对象），即使重启服务，若配置未改，进程仍会快速增长。</li></ul><h4 id="二、解决方案-优化gitlab配置与内存管理" tabindex="-1"><strong>二、解决方案：优化GitLab配置与内存管理</strong> <a class="header-anchor" href="#二、解决方案-优化gitlab配置与内存管理" aria-label="Permalink to &quot;**二、解决方案：优化GitLab配置与内存管理**&quot;">​</a></h4><h5 id="_1-紧急缓解-释放现有内存" tabindex="-1"><strong>1. 紧急缓解：释放现有内存</strong> <a class="header-anchor" href="#_1-紧急缓解-释放现有内存" aria-label="Permalink to &quot;**1. 紧急缓解：释放现有内存**&quot;">​</a></h5><ul><li><p><strong>重启Puma服务</strong> ：Puma是内存泄漏的重灾区，重启可立即释放其占用的内存（如案例中从13GB降至1GB）。</p><p>操作：<code>sudo gitlab-ctl restart puma</code>（注意：会导致短暂服务中断，建议在低峰期执行）。</p></li><li><p><strong>创建Swap空间</strong> ：若服务器无Swap，内存耗尽时会触发OOM（Out of Memory）错误。创建4GB Swap文件可缓解内存压力：</p></li></ul>',8)),n[1]||(n[1]=o("pre",{class:"ybc-pre-component ybc-pre-component_not-math"},[o("div",{class:"hyc-common-markdown__code hidden"},[o("div",{class:"hyc-common-markdown__code__code-btn hidden"},[o("div",{class:"hyc-common-markdown__code__langComponent expand"},[o("span",{class:"hyc-common-markdown__code__langComponent__text"},"bash"),o("svg",{xmlns:"http://www.w3.org/2000/svg",width:"17",height:"17",viewBox:"0 0 17 17",fill:"none",class:"hyc-common-markdown__code__langComponent__logo hidden"},[o("path",{d:"M4.74219 10.7988L8.74219 6.79883L12.7422 10.7988",stroke:"black","stroke-opacity":"0.4","stroke-width":"1.14286","stroke-linecap":"round","stroke-linejoin":"round"})])])])]),o("div",{class:"hyc-common-markdown__code","data-has-scroll":"false"},[o("div",{class:"hyc-common-markdown__code__hd"},[o("div",{class:"hyc-common-markdown__code__hd__inner"},[o("div",{class:"hyc-common-markdown__code__hd__l"},[o("div",{class:"hyc-common-markdown__code__hd__l__lang"},[o("div",{class:"hyc-common-markdown__code__langComponent expand"},[o("span",{class:"hyc-common-markdown__code__langComponent__text"},"bash"),o("svg",{xmlns:"http://www.w3.org/2000/svg",width:"17",height:"17",viewBox:"0 0 17 17",fill:"none",class:"hyc-common-markdown__code__langComponent__logo hidden"},[o("path",{d:"M4.74219 10.7988L8.74219 6.79883L12.7422 10.7988",stroke:"black","stroke-opacity":"0.4","stroke-width":"1.14286","stroke-linecap":"round","stroke-linejoin":"round"})])])])]),o("div",{class:"hyc-common-markdown__code__hd__r"},[o("div",{class:"hyc-common-markdown__code__option"},[o("svg",{width:"1rem",height:"1rem",class:"hyc-common-markdown__code__option__logo",viewBox:"0 0 16 16",fill:"none",xmlns:"http://www.w3.org/2000/svg"},[o("path",{"fill-rule":"evenodd","clip-rule":"evenodd",d:"M6.18563 1.02148H6.27219C7.2371 1.02147 8.02186 1.02145 8.64056 1.10464C9.28576 1.19138 9.83952 1.37836 10.2808 1.81962C10.722 2.26088 10.909 2.81464 10.9958 3.45984C11.013 3.58781 11.0266 3.72289 11.0374 3.8652C11.4689 3.87473 11.8501 3.8954 12.1831 3.94018C12.8283 4.02693 13.3821 4.21391 13.8234 4.65517C14.2646 5.09643 14.4516 5.65018 14.5383 6.29538C14.6215 6.9141 14.6215 7.69882 14.6215 8.66375V10.167C14.6215 11.1319 14.6215 11.9166 14.5383 12.5354C14.4516 13.1806 14.2646 13.7343 13.8234 14.1756C13.3821 14.6168 12.8283 14.8038 12.1831 14.8906C11.5644 14.9737 10.7797 14.9737 9.81476 14.9737H9.72821C8.76328 14.9737 7.97855 14.9737 7.35983 14.8906C6.71463 14.8038 6.16088 14.6168 5.71962 14.1756C5.27836 13.7343 5.09138 13.1806 5.00464 12.5354C4.98743 12.4074 4.97379 12.2723 4.96296 12.13C4.53148 12.1205 4.15032 12.0998 3.81726 12.055C3.17206 11.9683 2.6183 11.7813 2.17704 11.34C1.73578 10.8988 1.5488 10.345 1.46206 9.69981C1.37888 9.0811 1.37889 8.29639 1.37891 7.33148V5.82821C1.37889 4.8633 1.37888 4.07854 1.46206 3.45984C1.5488 2.81464 1.73578 2.26088 2.17704 1.81962C2.6183 1.37836 3.17206 1.19138 3.81726 1.10464C4.43596 1.02145 5.22072 1.02147 6.18563 1.02148ZM4.92325 10.9287C4.92148 10.6885 4.92148 10.4347 4.92148 10.167V8.66375C4.92147 7.69882 4.92145 6.9141 5.00464 6.29538C5.09138 5.65018 5.27836 5.09643 5.71962 4.65517C6.16088 4.21391 6.71463 4.02693 7.35983 3.94018C7.97855 3.857 8.76327 3.85701 9.7282 3.85703H9.81477C9.82079 3.85703 9.82681 3.85703 9.83282 3.85703C9.82532 3.77412 9.8166 3.69516 9.80646 3.61973C9.73761 3.1076 9.61339 2.84929 9.43225 2.66815C9.25111 2.48701 8.9928 2.36279 8.48066 2.29394C7.95127 2.22276 7.24761 2.22149 6.22891 2.22149C5.21021 2.22149 4.50655 2.22276 3.97716 2.29394C3.46502 2.36279 3.20671 2.48701 3.02557 2.66815C2.84443 2.84929 2.72021 3.1076 2.65136 3.61973C2.58018 4.14913 2.57891 4.85279 2.57891 5.87149V7.28816C2.57891 8.30685 2.58018 9.01052 2.65136 9.53991C2.72021 10.052 2.84443 10.3104 3.02557 10.4915C3.20671 10.6726 3.46502 10.7969 3.97716 10.8657C4.24274 10.9014 4.55218 10.9195 4.92325 10.9287ZM6.19393 6.45528C6.26279 5.94314 6.38701 5.68483 6.56815 5.5037C6.74928 5.32256 7.0076 5.19834 7.51973 5.12948C8.04913 5.05831 8.75279 5.05703 9.77149 5.05703C10.7902 5.05703 11.4938 5.05831 12.0232 5.12948C12.5354 5.19834 12.7937 5.32256 12.9748 5.50369C13.156 5.68483 13.2802 5.94314 13.349 6.45528C13.4202 6.98467 13.4215 7.68834 13.4215 8.70703V10.1237C13.4215 11.1424 13.4202 11.8461 13.349 12.3755C13.2802 12.8876 13.156 13.1459 12.9748 13.327C12.7937 13.5082 12.5354 13.6324 12.0232 13.7013C11.4938 13.7724 10.7902 13.7737 9.77149 13.7737C8.75279 13.7737 8.04913 13.7724 7.51973 13.7013C7.0076 13.6324 6.74929 13.5082 6.56815 13.327C6.38701 13.1459 6.26279 12.8876 6.19393 12.3755C6.12276 11.8461 6.12149 11.1424 6.12149 10.1237V8.70704C6.12149 7.68834 6.12276 6.98467 6.19393 6.45528Z"})]),o("span",{class:"hyc-common-markdown__code__option__text"},"复制")]),o("div",{class:"hyc-common-markdown__code__line"}),o("div",{class:"hyc-common-markdown__code__expand canvas-btn_canvas-btn__vTDT5"},[o("span",{class:"yb-icon iconfont-yb icon-yb-ic_expand_16"})])])])]),o("pre",{class:"hyc-common-markdown__code-lan"},[o("code",{classname:"language-bash"},`sudo fallocate -l 4G /swapfile
  sudo chmod 600 /swapfile
  sudo mkswap /swapfile
  sudo swapon /swapfile
  echo '/swapfile none swap sw 0 0' | sudo tee -a /etc/fstab  # 永久生效`)])])],-1)),n[2]||(n[2]=a('<h5 id="_2-长期优化-调整gitlab配置" tabindex="-1"><strong>2. 长期优化：调整GitLab配置</strong> <a class="header-anchor" href="#_2-长期优化-调整gitlab配置" aria-label="Permalink to &quot;**2. 长期优化：调整GitLab配置**&quot;">​</a></h5><p><strong>目标</strong> ：限制Puma/Sidekiq的资源占用，避免内存泄漏积累。</p><p><strong>操作步骤</strong> ：</p><ul><li><strong>修改Puma配置</strong> ：编辑 <code>/etc/gitlab/gitlab.rb</code>，调整以下参数：</li></ul>',4)),n[3]||(n[3]=o("pre",{class:"ybc-pre-component ybc-pre-component_not-math"},[o("div",{class:"hyc-common-markdown__code hidden"},[o("div",{class:"hyc-common-markdown__code__code-btn hidden"},[o("div",{class:"hyc-common-markdown__code__langComponent expand"},[o("span",{class:"hyc-common-markdown__code__langComponent__text"},"ruby"),o("svg",{xmlns:"http://www.w3.org/2000/svg",width:"17",height:"17",viewBox:"0 0 17 17",fill:"none",class:"hyc-common-markdown__code__langComponent__logo hidden"},[o("path",{d:"M4.74219 10.7988L8.74219 6.79883L12.7422 10.7988",stroke:"black","stroke-opacity":"0.4","stroke-width":"1.14286","stroke-linecap":"round","stroke-linejoin":"round"})])])])]),o("div",{class:"hyc-common-markdown__code","data-has-scroll":"false"},[o("div",{class:"hyc-common-markdown__code__hd"},[o("div",{class:"hyc-common-markdown__code__hd__inner"},[o("div",{class:"hyc-common-markdown__code__hd__l"},[o("div",{class:"hyc-common-markdown__code__hd__l__lang"},[o("div",{class:"hyc-common-markdown__code__langComponent expand"},[o("span",{class:"hyc-common-markdown__code__langComponent__text"},"ruby"),o("svg",{xmlns:"http://www.w3.org/2000/svg",width:"17",height:"17",viewBox:"0 0 17 17",fill:"none",class:"hyc-common-markdown__code__langComponent__logo hidden"},[o("path",{d:"M4.74219 10.7988L8.74219 6.79883L12.7422 10.7988",stroke:"black","stroke-opacity":"0.4","stroke-width":"1.14286","stroke-linecap":"round","stroke-linejoin":"round"})])])])]),o("div",{class:"hyc-common-markdown__code__hd__r"},[o("div",{class:"hyc-common-markdown__code__option"},[o("svg",{width:"1rem",height:"1rem",class:"hyc-common-markdown__code__option__logo",viewBox:"0 0 16 16",fill:"none",xmlns:"http://www.w3.org/2000/svg"},[o("path",{"fill-rule":"evenodd","clip-rule":"evenodd",d:"M6.18563 1.02148H6.27219C7.2371 1.02147 8.02186 1.02145 8.64056 1.10464C9.28576 1.19138 9.83952 1.37836 10.2808 1.81962C10.722 2.26088 10.909 2.81464 10.9958 3.45984C11.013 3.58781 11.0266 3.72289 11.0374 3.8652C11.4689 3.87473 11.8501 3.8954 12.1831 3.94018C12.8283 4.02693 13.3821 4.21391 13.8234 4.65517C14.2646 5.09643 14.4516 5.65018 14.5383 6.29538C14.6215 6.9141 14.6215 7.69882 14.6215 8.66375V10.167C14.6215 11.1319 14.6215 11.9166 14.5383 12.5354C14.4516 13.1806 14.2646 13.7343 13.8234 14.1756C13.3821 14.6168 12.8283 14.8038 12.1831 14.8906C11.5644 14.9737 10.7797 14.9737 9.81476 14.9737H9.72821C8.76328 14.9737 7.97855 14.9737 7.35983 14.8906C6.71463 14.8038 6.16088 14.6168 5.71962 14.1756C5.27836 13.7343 5.09138 13.1806 5.00464 12.5354C4.98743 12.4074 4.97379 12.2723 4.96296 12.13C4.53148 12.1205 4.15032 12.0998 3.81726 12.055C3.17206 11.9683 2.6183 11.7813 2.17704 11.34C1.73578 10.8988 1.5488 10.345 1.46206 9.69981C1.37888 9.0811 1.37889 8.29639 1.37891 7.33148V5.82821C1.37889 4.8633 1.37888 4.07854 1.46206 3.45984C1.5488 2.81464 1.73578 2.26088 2.17704 1.81962C2.6183 1.37836 3.17206 1.19138 3.81726 1.10464C4.43596 1.02145 5.22072 1.02147 6.18563 1.02148ZM4.92325 10.9287C4.92148 10.6885 4.92148 10.4347 4.92148 10.167V8.66375C4.92147 7.69882 4.92145 6.9141 5.00464 6.29538C5.09138 5.65018 5.27836 5.09643 5.71962 4.65517C6.16088 4.21391 6.71463 4.02693 7.35983 3.94018C7.97855 3.857 8.76327 3.85701 9.7282 3.85703H9.81477C9.82079 3.85703 9.82681 3.85703 9.83282 3.85703C9.82532 3.77412 9.8166 3.69516 9.80646 3.61973C9.73761 3.1076 9.61339 2.84929 9.43225 2.66815C9.25111 2.48701 8.9928 2.36279 8.48066 2.29394C7.95127 2.22276 7.24761 2.22149 6.22891 2.22149C5.21021 2.22149 4.50655 2.22276 3.97716 2.29394C3.46502 2.36279 3.20671 2.48701 3.02557 2.66815C2.84443 2.84929 2.72021 3.1076 2.65136 3.61973C2.58018 4.14913 2.57891 4.85279 2.57891 5.87149V7.28816C2.57891 8.30685 2.58018 9.01052 2.65136 9.53991C2.72021 10.052 2.84443 10.3104 3.02557 10.4915C3.20671 10.6726 3.46502 10.7969 3.97716 10.8657C4.24274 10.9014 4.55218 10.9195 4.92325 10.9287ZM6.19393 6.45528C6.26279 5.94314 6.38701 5.68483 6.56815 5.5037C6.74928 5.32256 7.0076 5.19834 7.51973 5.12948C8.04913 5.05831 8.75279 5.05703 9.77149 5.05703C10.7902 5.05703 11.4938 5.05831 12.0232 5.12948C12.5354 5.19834 12.7937 5.32256 12.9748 5.50369C13.156 5.68483 13.2802 5.94314 13.349 6.45528C13.4202 6.98467 13.4215 7.68834 13.4215 8.70703V10.1237C13.4215 11.1424 13.4202 11.8461 13.349 12.3755C13.2802 12.8876 13.156 13.1459 12.9748 13.327C12.7937 13.5082 12.5354 13.6324 12.0232 13.7013C11.4938 13.7724 10.7902 13.7737 9.77149 13.7737C8.75279 13.7737 8.04913 13.7724 7.51973 13.7013C7.0076 13.6324 6.74929 13.5082 6.56815 13.327C6.38701 13.1459 6.26279 12.8876 6.19393 12.3755C6.12276 11.8461 6.12149 11.1424 6.12149 10.1237V8.70704C6.12149 7.68834 6.12276 6.98467 6.19393 6.45528Z"})]),o("span",{class:"hyc-common-markdown__code__option__text"},"复制")]),o("div",{class:"hyc-common-markdown__code__line"}),o("div",{class:"hyc-common-markdown__code__expand canvas-btn_canvas-btn__vTDT5"},[o("span",{class:"yb-icon iconfont-yb icon-yb-ic_expand_16"})])])])]),o("pre",{class:"hyc-common-markdown__code-lan"},[o("code",{classname:"language-ruby"},`# 限制Puma Worker数量（建议等于或略小于CPU核心数，如4核设为2-4）
  puma['worker_processes'] = 4  
  # 单个Worker内存限制（最小1GB，最大2GB）
  puma['worker_memory_limit_min'] = "1024MB"  
  puma['worker_memory_limit_max'] = "2048MB"  
  # 内存杀手：超过2GB或处理5000个请求后重启Worker
  puma['worker_memory_killer'] = {  
    'max_requests' => 5000,  
    'max_ram' => "2048MB",   
    'check_interval' => 60   
  }`)])])],-1)),n[4]||(n[4]=o("p",null,[o("strong",null,"说明"),_(" ："),o("code",null,"worker_processes"),_("需根据CPU核心数调整（如8核服务器设为4），避免过多Worker抢占内存；"),o("code",null,"worker_memory_killer"),_("可自动重启泄漏的Worker，防止内存持续增长。")],-1)),n[5]||(n[5]=o("ul",null,[o("li",null,[o("strong",null,"优化Sidekiq配置"),_(" ：Sidekiq是GitLab的后台任务处理器，减少并发数可降低内存占用：")])],-1)),n[6]||(n[6]=o("pre",{class:"ybc-pre-component ybc-pre-component_not-math"},[o("div",{class:"hyc-common-markdown__code hidden"},[o("div",{class:"hyc-common-markdown__code__code-btn hidden"},[o("div",{class:"hyc-common-markdown__code__langComponent expand"},[o("span",{class:"hyc-common-markdown__code__langComponent__text"},"ruby"),o("svg",{xmlns:"http://www.w3.org/2000/svg",width:"17",height:"17",viewBox:"0 0 17 17",fill:"none",class:"hyc-common-markdown__code__langComponent__logo hidden"},[o("path",{d:"M4.74219 10.7988L8.74219 6.79883L12.7422 10.7988",stroke:"black","stroke-opacity":"0.4","stroke-width":"1.14286","stroke-linecap":"round","stroke-linejoin":"round"})])])])]),o("div",{class:"hyc-common-markdown__code","data-has-scroll":"false"},[o("div",{class:"hyc-common-markdown__code__hd"},[o("div",{class:"hyc-common-markdown__code__hd__inner"},[o("div",{class:"hyc-common-markdown__code__hd__l"},[o("div",{class:"hyc-common-markdown__code__hd__l__lang"},[o("div",{class:"hyc-common-markdown__code__langComponent expand"},[o("span",{class:"hyc-common-markdown__code__langComponent__text"},"ruby"),o("svg",{xmlns:"http://www.w3.org/2000/svg",width:"17",height:"17",viewBox:"0 0 17 17",fill:"none",class:"hyc-common-markdown__code__langComponent__logo hidden"},[o("path",{d:"M4.74219 10.7988L8.74219 6.79883L12.7422 10.7988",stroke:"black","stroke-opacity":"0.4","stroke-width":"1.14286","stroke-linecap":"round","stroke-linejoin":"round"})])])])]),o("div",{class:"hyc-common-markdown__code__hd__r"},[o("div",{class:"hyc-common-markdown__code__option"},[o("svg",{width:"1rem",height:"1rem",class:"hyc-common-markdown__code__option__logo",viewBox:"0 0 16 16",fill:"none",xmlns:"http://www.w3.org/2000/svg"},[o("path",{"fill-rule":"evenodd","clip-rule":"evenodd",d:"M6.18563 1.02148H6.27219C7.2371 1.02147 8.02186 1.02145 8.64056 1.10464C9.28576 1.19138 9.83952 1.37836 10.2808 1.81962C10.722 2.26088 10.909 2.81464 10.9958 3.45984C11.013 3.58781 11.0266 3.72289 11.0374 3.8652C11.4689 3.87473 11.8501 3.8954 12.1831 3.94018C12.8283 4.02693 13.3821 4.21391 13.8234 4.65517C14.2646 5.09643 14.4516 5.65018 14.5383 6.29538C14.6215 6.9141 14.6215 7.69882 14.6215 8.66375V10.167C14.6215 11.1319 14.6215 11.9166 14.5383 12.5354C14.4516 13.1806 14.2646 13.7343 13.8234 14.1756C13.3821 14.6168 12.8283 14.8038 12.1831 14.8906C11.5644 14.9737 10.7797 14.9737 9.81476 14.9737H9.72821C8.76328 14.9737 7.97855 14.9737 7.35983 14.8906C6.71463 14.8038 6.16088 14.6168 5.71962 14.1756C5.27836 13.7343 5.09138 13.1806 5.00464 12.5354C4.98743 12.4074 4.97379 12.2723 4.96296 12.13C4.53148 12.1205 4.15032 12.0998 3.81726 12.055C3.17206 11.9683 2.6183 11.7813 2.17704 11.34C1.73578 10.8988 1.5488 10.345 1.46206 9.69981C1.37888 9.0811 1.37889 8.29639 1.37891 7.33148V5.82821C1.37889 4.8633 1.37888 4.07854 1.46206 3.45984C1.5488 2.81464 1.73578 2.26088 2.17704 1.81962C2.6183 1.37836 3.17206 1.19138 3.81726 1.10464C4.43596 1.02145 5.22072 1.02147 6.18563 1.02148ZM4.92325 10.9287C4.92148 10.6885 4.92148 10.4347 4.92148 10.167V8.66375C4.92147 7.69882 4.92145 6.9141 5.00464 6.29538C5.09138 5.65018 5.27836 5.09643 5.71962 4.65517C6.16088 4.21391 6.71463 4.02693 7.35983 3.94018C7.97855 3.857 8.76327 3.85701 9.7282 3.85703H9.81477C9.82079 3.85703 9.82681 3.85703 9.83282 3.85703C9.82532 3.77412 9.8166 3.69516 9.80646 3.61973C9.73761 3.1076 9.61339 2.84929 9.43225 2.66815C9.25111 2.48701 8.9928 2.36279 8.48066 2.29394C7.95127 2.22276 7.24761 2.22149 6.22891 2.22149C5.21021 2.22149 4.50655 2.22276 3.97716 2.29394C3.46502 2.36279 3.20671 2.48701 3.02557 2.66815C2.84443 2.84929 2.72021 3.1076 2.65136 3.61973C2.58018 4.14913 2.57891 4.85279 2.57891 5.87149V7.28816C2.57891 8.30685 2.58018 9.01052 2.65136 9.53991C2.72021 10.052 2.84443 10.3104 3.02557 10.4915C3.20671 10.6726 3.46502 10.7969 3.97716 10.8657C4.24274 10.9014 4.55218 10.9195 4.92325 10.9287ZM6.19393 6.45528C6.26279 5.94314 6.38701 5.68483 6.56815 5.5037C6.74928 5.32256 7.0076 5.19834 7.51973 5.12948C8.04913 5.05831 8.75279 5.05703 9.77149 5.05703C10.7902 5.05703 11.4938 5.05831 12.0232 5.12948C12.5354 5.19834 12.7937 5.32256 12.9748 5.50369C13.156 5.68483 13.2802 5.94314 13.349 6.45528C13.4202 6.98467 13.4215 7.68834 13.4215 8.70703V10.1237C13.4215 11.1424 13.4202 11.8461 13.349 12.3755C13.2802 12.8876 13.156 13.1459 12.9748 13.327C12.7937 13.5082 12.5354 13.6324 12.0232 13.7013C11.4938 13.7724 10.7902 13.7737 9.77149 13.7737C8.75279 13.7737 8.04913 13.7724 7.51973 13.7013C7.0076 13.6324 6.74929 13.5082 6.56815 13.327C6.38701 13.1459 6.26279 12.8876 6.19393 12.3755C6.12276 11.8461 6.12149 11.1424 6.12149 10.1237V8.70704C6.12149 7.68834 6.12276 6.98467 6.19393 6.45528Z"})]),o("span",{class:"hyc-common-markdown__code__option__text"},"复制")]),o("div",{class:"hyc-common-markdown__code__line"}),o("div",{class:"hyc-common-markdown__code__expand canvas-btn_canvas-btn__vTDT5"},[o("span",{class:"yb-icon iconfont-yb icon-yb-ic_expand_16"})])])])]),o("pre",{class:"hyc-common-markdown__code-lan"},[o("code",{classname:"language-ruby"},`# 减少Sidekiq并发数（默认25，建议10-15）
  sidekiq['max_concurrency'] = 15  
  sidekiq['min_concurrency'] = 5`)])])],-1)),n[7]||(n[7]=o("ul",null,[o("li",null,[o("strong",null,"应用配置"),_(" ：修改后执行以下命令使配置生效：")])],-1)),n[8]||(n[8]=o("pre",{class:"ybc-pre-component ybc-pre-component_not-math"},[o("div",{class:"hyc-common-markdown__code hidden"},[o("div",{class:"hyc-common-markdown__code__code-btn hidden"},[o("div",{class:"hyc-common-markdown__code__langComponent expand"},[o("span",{class:"hyc-common-markdown__code__langComponent__text"},"bash"),o("svg",{xmlns:"http://www.w3.org/2000/svg",width:"17",height:"17",viewBox:"0 0 17 17",fill:"none",class:"hyc-common-markdown__code__langComponent__logo hidden"},[o("path",{d:"M4.74219 10.7988L8.74219 6.79883L12.7422 10.7988",stroke:"black","stroke-opacity":"0.4","stroke-width":"1.14286","stroke-linecap":"round","stroke-linejoin":"round"})])])])]),o("div",{class:"hyc-common-markdown__code","data-has-scroll":"false"},[o("div",{class:"hyc-common-markdown__code__hd"},[o("div",{class:"hyc-common-markdown__code__hd__inner"},[o("div",{class:"hyc-common-markdown__code__hd__l"},[o("div",{class:"hyc-common-markdown__code__hd__l__lang"},[o("div",{class:"hyc-common-markdown__code__langComponent expand"},[o("span",{class:"hyc-common-markdown__code__langComponent__text"},"bash"),o("svg",{xmlns:"http://www.w3.org/2000/svg",width:"17",height:"17",viewBox:"0 0 17 17",fill:"none",class:"hyc-common-markdown__code__langComponent__logo hidden"},[o("path",{d:"M4.74219 10.7988L8.74219 6.79883L12.7422 10.7988",stroke:"black","stroke-opacity":"0.4","stroke-width":"1.14286","stroke-linecap":"round","stroke-linejoin":"round"})])])])]),o("div",{class:"hyc-common-markdown__code__hd__r"},[o("div",{class:"hyc-common-markdown__code__option"},[o("svg",{width:"1rem",height:"1rem",class:"hyc-common-markdown__code__option__logo",viewBox:"0 0 16 16",fill:"none",xmlns:"http://www.w3.org/2000/svg"},[o("path",{"fill-rule":"evenodd","clip-rule":"evenodd",d:"M6.18563 1.02148H6.27219C7.2371 1.02147 8.02186 1.02145 8.64056 1.10464C9.28576 1.19138 9.83952 1.37836 10.2808 1.81962C10.722 2.26088 10.909 2.81464 10.9958 3.45984C11.013 3.58781 11.0266 3.72289 11.0374 3.8652C11.4689 3.87473 11.8501 3.8954 12.1831 3.94018C12.8283 4.02693 13.3821 4.21391 13.8234 4.65517C14.2646 5.09643 14.4516 5.65018 14.5383 6.29538C14.6215 6.9141 14.6215 7.69882 14.6215 8.66375V10.167C14.6215 11.1319 14.6215 11.9166 14.5383 12.5354C14.4516 13.1806 14.2646 13.7343 13.8234 14.1756C13.3821 14.6168 12.8283 14.8038 12.1831 14.8906C11.5644 14.9737 10.7797 14.9737 9.81476 14.9737H9.72821C8.76328 14.9737 7.97855 14.9737 7.35983 14.8906C6.71463 14.8038 6.16088 14.6168 5.71962 14.1756C5.27836 13.7343 5.09138 13.1806 5.00464 12.5354C4.98743 12.4074 4.97379 12.2723 4.96296 12.13C4.53148 12.1205 4.15032 12.0998 3.81726 12.055C3.17206 11.9683 2.6183 11.7813 2.17704 11.34C1.73578 10.8988 1.5488 10.345 1.46206 9.69981C1.37888 9.0811 1.37889 8.29639 1.37891 7.33148V5.82821C1.37889 4.8633 1.37888 4.07854 1.46206 3.45984C1.5488 2.81464 1.73578 2.26088 2.17704 1.81962C2.6183 1.37836 3.17206 1.19138 3.81726 1.10464C4.43596 1.02145 5.22072 1.02147 6.18563 1.02148ZM4.92325 10.9287C4.92148 10.6885 4.92148 10.4347 4.92148 10.167V8.66375C4.92147 7.69882 4.92145 6.9141 5.00464 6.29538C5.09138 5.65018 5.27836 5.09643 5.71962 4.65517C6.16088 4.21391 6.71463 4.02693 7.35983 3.94018C7.97855 3.857 8.76327 3.85701 9.7282 3.85703H9.81477C9.82079 3.85703 9.82681 3.85703 9.83282 3.85703C9.82532 3.77412 9.8166 3.69516 9.80646 3.61973C9.73761 3.1076 9.61339 2.84929 9.43225 2.66815C9.25111 2.48701 8.9928 2.36279 8.48066 2.29394C7.95127 2.22276 7.24761 2.22149 6.22891 2.22149C5.21021 2.22149 4.50655 2.22276 3.97716 2.29394C3.46502 2.36279 3.20671 2.48701 3.02557 2.66815C2.84443 2.84929 2.72021 3.1076 2.65136 3.61973C2.58018 4.14913 2.57891 4.85279 2.57891 5.87149V7.28816C2.57891 8.30685 2.58018 9.01052 2.65136 9.53991C2.72021 10.052 2.84443 10.3104 3.02557 10.4915C3.20671 10.6726 3.46502 10.7969 3.97716 10.8657C4.24274 10.9014 4.55218 10.9195 4.92325 10.9287ZM6.19393 6.45528C6.26279 5.94314 6.38701 5.68483 6.56815 5.5037C6.74928 5.32256 7.0076 5.19834 7.51973 5.12948C8.04913 5.05831 8.75279 5.05703 9.77149 5.05703C10.7902 5.05703 11.4938 5.05831 12.0232 5.12948C12.5354 5.19834 12.7937 5.32256 12.9748 5.50369C13.156 5.68483 13.2802 5.94314 13.349 6.45528C13.4202 6.98467 13.4215 7.68834 13.4215 8.70703V10.1237C13.4215 11.1424 13.4202 11.8461 13.349 12.3755C13.2802 12.8876 13.156 13.1459 12.9748 13.327C12.7937 13.5082 12.5354 13.6324 12.0232 13.7013C11.4938 13.7724 10.7902 13.7737 9.77149 13.7737C8.75279 13.7737 8.04913 13.7724 7.51973 13.7013C7.0076 13.6324 6.74929 13.5082 6.56815 13.327C6.38701 13.1459 6.26279 12.8876 6.19393 12.3755C6.12276 11.8461 6.12149 11.1424 6.12149 10.1237V8.70704C6.12149 7.68834 6.12276 6.98467 6.19393 6.45528Z"})]),o("span",{class:"hyc-common-markdown__code__option__text"},"复制")]),o("div",{class:"hyc-common-markdown__code__line"}),o("div",{class:"hyc-common-markdown__code__expand canvas-btn_canvas-btn__vTDT5"},[o("span",{class:"yb-icon iconfont-yb icon-yb-ic_expand_16"})])])])]),o("pre",{class:"hyc-common-markdown__code-lan"},[o("code",{classname:"language-bash"},`sudo gitlab-ctl reconfigure  
  sudo gitlab-ctl restart`)])])],-1)),n[9]||(n[9]=o("h5",{id:"_3-监控与自动化-预防内存泄漏",tabindex:"-1"},[o("strong",null,"3. 监控与自动化：预防内存泄漏"),_(),o("a",{class:"header-anchor",href:"#_3-监控与自动化-预防内存泄漏","aria-label":'Permalink to "**3. 监控与自动化：预防内存泄漏**"'},"​")],-1)),n[10]||(n[10]=o("ul",null,[o("li",null,[o("strong",null,"实时监控"),_(" ：使用 "),o("code",null,"htop"),_("（交互式进程监控）或 "),o("code",null,"free -h"),_("（内存概况）查看内存占用，及时发现异常进程：")])],-1)),n[11]||(n[11]=o("pre",{class:"ybc-pre-component ybc-pre-component_not-math"},[o("div",{class:"hyc-common-markdown__code hidden"},[o("div",{class:"hyc-common-markdown__code__code-btn hidden"},[o("div",{class:"hyc-common-markdown__code__langComponent expand"},[o("span",{class:"hyc-common-markdown__code__langComponent__text"},"bash"),o("svg",{xmlns:"http://www.w3.org/2000/svg",width:"17",height:"17",viewBox:"0 0 17 17",fill:"none",class:"hyc-common-markdown__code__langComponent__logo hidden"},[o("path",{d:"M4.74219 10.7988L8.74219 6.79883L12.7422 10.7988",stroke:"black","stroke-opacity":"0.4","stroke-width":"1.14286","stroke-linecap":"round","stroke-linejoin":"round"})])])])]),o("div",{class:"hyc-common-markdown__code","data-has-scroll":"false"},[o("div",{class:"hyc-common-markdown__code__hd"},[o("div",{class:"hyc-common-markdown__code__hd__inner"},[o("div",{class:"hyc-common-markdown__code__hd__l"},[o("div",{class:"hyc-common-markdown__code__hd__l__lang"},[o("div",{class:"hyc-common-markdown__code__langComponent expand"},[o("span",{class:"hyc-common-markdown__code__langComponent__text"},"bash"),o("svg",{xmlns:"http://www.w3.org/2000/svg",width:"17",height:"17",viewBox:"0 0 17 17",fill:"none",class:"hyc-common-markdown__code__langComponent__logo hidden"},[o("path",{d:"M4.74219 10.7988L8.74219 6.79883L12.7422 10.7988",stroke:"black","stroke-opacity":"0.4","stroke-width":"1.14286","stroke-linecap":"round","stroke-linejoin":"round"})])])])]),o("div",{class:"hyc-common-markdown__code__hd__r"},[o("div",{class:"hyc-common-markdown__code__option"},[o("svg",{width:"1rem",height:"1rem",class:"hyc-common-markdown__code__option__logo",viewBox:"0 0 16 16",fill:"none",xmlns:"http://www.w3.org/2000/svg"},[o("path",{"fill-rule":"evenodd","clip-rule":"evenodd",d:"M6.18563 1.02148H6.27219C7.2371 1.02147 8.02186 1.02145 8.64056 1.10464C9.28576 1.19138 9.83952 1.37836 10.2808 1.81962C10.722 2.26088 10.909 2.81464 10.9958 3.45984C11.013 3.58781 11.0266 3.72289 11.0374 3.8652C11.4689 3.87473 11.8501 3.8954 12.1831 3.94018C12.8283 4.02693 13.3821 4.21391 13.8234 4.65517C14.2646 5.09643 14.4516 5.65018 14.5383 6.29538C14.6215 6.9141 14.6215 7.69882 14.6215 8.66375V10.167C14.6215 11.1319 14.6215 11.9166 14.5383 12.5354C14.4516 13.1806 14.2646 13.7343 13.8234 14.1756C13.3821 14.6168 12.8283 14.8038 12.1831 14.8906C11.5644 14.9737 10.7797 14.9737 9.81476 14.9737H9.72821C8.76328 14.9737 7.97855 14.9737 7.35983 14.8906C6.71463 14.8038 6.16088 14.6168 5.71962 14.1756C5.27836 13.7343 5.09138 13.1806 5.00464 12.5354C4.98743 12.4074 4.97379 12.2723 4.96296 12.13C4.53148 12.1205 4.15032 12.0998 3.81726 12.055C3.17206 11.9683 2.6183 11.7813 2.17704 11.34C1.73578 10.8988 1.5488 10.345 1.46206 9.69981C1.37888 9.0811 1.37889 8.29639 1.37891 7.33148V5.82821C1.37889 4.8633 1.37888 4.07854 1.46206 3.45984C1.5488 2.81464 1.73578 2.26088 2.17704 1.81962C2.6183 1.37836 3.17206 1.19138 3.81726 1.10464C4.43596 1.02145 5.22072 1.02147 6.18563 1.02148ZM4.92325 10.9287C4.92148 10.6885 4.92148 10.4347 4.92148 10.167V8.66375C4.92147 7.69882 4.92145 6.9141 5.00464 6.29538C5.09138 5.65018 5.27836 5.09643 5.71962 4.65517C6.16088 4.21391 6.71463 4.02693 7.35983 3.94018C7.97855 3.857 8.76327 3.85701 9.7282 3.85703H9.81477C9.82079 3.85703 9.82681 3.85703 9.83282 3.85703C9.82532 3.77412 9.8166 3.69516 9.80646 3.61973C9.73761 3.1076 9.61339 2.84929 9.43225 2.66815C9.25111 2.48701 8.9928 2.36279 8.48066 2.29394C7.95127 2.22276 7.24761 2.22149 6.22891 2.22149C5.21021 2.22149 4.50655 2.22276 3.97716 2.29394C3.46502 2.36279 3.20671 2.48701 3.02557 2.66815C2.84443 2.84929 2.72021 3.1076 2.65136 3.61973C2.58018 4.14913 2.57891 4.85279 2.57891 5.87149V7.28816C2.57891 8.30685 2.58018 9.01052 2.65136 9.53991C2.72021 10.052 2.84443 10.3104 3.02557 10.4915C3.20671 10.6726 3.46502 10.7969 3.97716 10.8657C4.24274 10.9014 4.55218 10.9195 4.92325 10.9287ZM6.19393 6.45528C6.26279 5.94314 6.38701 5.68483 6.56815 5.5037C6.74928 5.32256 7.0076 5.19834 7.51973 5.12948C8.04913 5.05831 8.75279 5.05703 9.77149 5.05703C10.7902 5.05703 11.4938 5.05831 12.0232 5.12948C12.5354 5.19834 12.7937 5.32256 12.9748 5.50369C13.156 5.68483 13.2802 5.94314 13.349 6.45528C13.4202 6.98467 13.4215 7.68834 13.4215 8.70703V10.1237C13.4215 11.1424 13.4202 11.8461 13.349 12.3755C13.2802 12.8876 13.156 13.1459 12.9748 13.327C12.7937 13.5082 12.5354 13.6324 12.0232 13.7013C11.4938 13.7724 10.7902 13.7737 9.77149 13.7737C8.75279 13.7737 8.04913 13.7724 7.51973 13.7013C7.0076 13.6324 6.74929 13.5082 6.56815 13.327C6.38701 13.1459 6.26279 12.8876 6.19393 12.3755C6.12276 11.8461 6.12149 11.1424 6.12149 10.1237V8.70704C6.12149 7.68834 6.12276 6.98467 6.19393 6.45528Z"})]),o("span",{class:"hyc-common-markdown__code__option__text"},"复制")]),o("div",{class:"hyc-common-markdown__code__line"}),o("div",{class:"hyc-common-markdown__code__expand canvas-btn_canvas-btn__vTDT5"},[o("span",{class:"yb-icon iconfont-yb icon-yb-ic_expand_16"})])])])]),o("pre",{class:"hyc-common-markdown__code-lan"},[o("code",{classname:"language-bash"},"sudo apt install htop && htop  # 安装并运行htop")])])],-1)),n[12]||(n[12]=o("ul",null,[o("li",null,[o("strong",null,"自动重启Puma"),_(" ：通过Crontab每日凌晨重启Puma，防止长期运行导致的内存泄漏积累（建议在低峰期执行）：")])],-1)),n[13]||(n[13]=o("pre",{class:"ybc-pre-component ybc-pre-component_not-math"},[o("div",{class:"hyc-common-markdown__code hidden"},[o("div",{class:"hyc-common-markdown__code__code-btn hidden"},[o("div",{class:"hyc-common-markdown__code__langComponent expand"},[o("span",{class:"hyc-common-markdown__code__langComponent__text"},"bash"),o("svg",{xmlns:"http://www.w3.org/2000/svg",width:"17",height:"17",viewBox:"0 0 17 17",fill:"none",class:"hyc-common-markdown__code__langComponent__logo hidden"},[o("path",{d:"M4.74219 10.7988L8.74219 6.79883L12.7422 10.7988",stroke:"black","stroke-opacity":"0.4","stroke-width":"1.14286","stroke-linecap":"round","stroke-linejoin":"round"})])])])]),o("div",{class:"hyc-common-markdown__code","data-has-scroll":"false"},[o("div",{class:"hyc-common-markdown__code__hd"},[o("div",{class:"hyc-common-markdown__code__hd__inner"},[o("div",{class:"hyc-common-markdown__code__hd__l"},[o("div",{class:"hyc-common-markdown__code__hd__l__lang"},[o("div",{class:"hyc-common-markdown__code__langComponent expand"},[o("span",{class:"hyc-common-markdown__code__langComponent__text"},"bash"),o("svg",{xmlns:"http://www.w3.org/2000/svg",width:"17",height:"17",viewBox:"0 0 17 17",fill:"none",class:"hyc-common-markdown__code__langComponent__logo hidden"},[o("path",{d:"M4.74219 10.7988L8.74219 6.79883L12.7422 10.7988",stroke:"black","stroke-opacity":"0.4","stroke-width":"1.14286","stroke-linecap":"round","stroke-linejoin":"round"})])])])]),o("div",{class:"hyc-common-markdown__code__hd__r"},[o("div",{class:"hyc-common-markdown__code__option"},[o("svg",{width:"1rem",height:"1rem",class:"hyc-common-markdown__code__option__logo",viewBox:"0 0 16 16",fill:"none",xmlns:"http://www.w3.org/2000/svg"},[o("path",{"fill-rule":"evenodd","clip-rule":"evenodd",d:"M6.18563 1.02148H6.27219C7.2371 1.02147 8.02186 1.02145 8.64056 1.10464C9.28576 1.19138 9.83952 1.37836 10.2808 1.81962C10.722 2.26088 10.909 2.81464 10.9958 3.45984C11.013 3.58781 11.0266 3.72289 11.0374 3.8652C11.4689 3.87473 11.8501 3.8954 12.1831 3.94018C12.8283 4.02693 13.3821 4.21391 13.8234 4.65517C14.2646 5.09643 14.4516 5.65018 14.5383 6.29538C14.6215 6.9141 14.6215 7.69882 14.6215 8.66375V10.167C14.6215 11.1319 14.6215 11.9166 14.5383 12.5354C14.4516 13.1806 14.2646 13.7343 13.8234 14.1756C13.3821 14.6168 12.8283 14.8038 12.1831 14.8906C11.5644 14.9737 10.7797 14.9737 9.81476 14.9737H9.72821C8.76328 14.9737 7.97855 14.9737 7.35983 14.8906C6.71463 14.8038 6.16088 14.6168 5.71962 14.1756C5.27836 13.7343 5.09138 13.1806 5.00464 12.5354C4.98743 12.4074 4.97379 12.2723 4.96296 12.13C4.53148 12.1205 4.15032 12.0998 3.81726 12.055C3.17206 11.9683 2.6183 11.7813 2.17704 11.34C1.73578 10.8988 1.5488 10.345 1.46206 9.69981C1.37888 9.0811 1.37889 8.29639 1.37891 7.33148V5.82821C1.37889 4.8633 1.37888 4.07854 1.46206 3.45984C1.5488 2.81464 1.73578 2.26088 2.17704 1.81962C2.6183 1.37836 3.17206 1.19138 3.81726 1.10464C4.43596 1.02145 5.22072 1.02147 6.18563 1.02148ZM4.92325 10.9287C4.92148 10.6885 4.92148 10.4347 4.92148 10.167V8.66375C4.92147 7.69882 4.92145 6.9141 5.00464 6.29538C5.09138 5.65018 5.27836 5.09643 5.71962 4.65517C6.16088 4.21391 6.71463 4.02693 7.35983 3.94018C7.97855 3.857 8.76327 3.85701 9.7282 3.85703H9.81477C9.82079 3.85703 9.82681 3.85703 9.83282 3.85703C9.82532 3.77412 9.8166 3.69516 9.80646 3.61973C9.73761 3.1076 9.61339 2.84929 9.43225 2.66815C9.25111 2.48701 8.9928 2.36279 8.48066 2.29394C7.95127 2.22276 7.24761 2.22149 6.22891 2.22149C5.21021 2.22149 4.50655 2.22276 3.97716 2.29394C3.46502 2.36279 3.20671 2.48701 3.02557 2.66815C2.84443 2.84929 2.72021 3.1076 2.65136 3.61973C2.58018 4.14913 2.57891 4.85279 2.57891 5.87149V7.28816C2.57891 8.30685 2.58018 9.01052 2.65136 9.53991C2.72021 10.052 2.84443 10.3104 3.02557 10.4915C3.20671 10.6726 3.46502 10.7969 3.97716 10.8657C4.24274 10.9014 4.55218 10.9195 4.92325 10.9287ZM6.19393 6.45528C6.26279 5.94314 6.38701 5.68483 6.56815 5.5037C6.74928 5.32256 7.0076 5.19834 7.51973 5.12948C8.04913 5.05831 8.75279 5.05703 9.77149 5.05703C10.7902 5.05703 11.4938 5.05831 12.0232 5.12948C12.5354 5.19834 12.7937 5.32256 12.9748 5.50369C13.156 5.68483 13.2802 5.94314 13.349 6.45528C13.4202 6.98467 13.4215 7.68834 13.4215 8.70703V10.1237C13.4215 11.1424 13.4202 11.8461 13.349 12.3755C13.2802 12.8876 13.156 13.1459 12.9748 13.327C12.7937 13.5082 12.5354 13.6324 12.0232 13.7013C11.4938 13.7724 10.7902 13.7737 9.77149 13.7737C8.75279 13.7737 8.04913 13.7724 7.51973 13.7013C7.0076 13.6324 6.74929 13.5082 6.56815 13.327C6.38701 13.1459 6.26279 12.8876 6.19393 12.3755C6.12276 11.8461 6.12149 11.1424 6.12149 10.1237V8.70704C6.12149 7.68834 6.12276 6.98467 6.19393 6.45528Z"})]),o("span",{class:"hyc-common-markdown__code__option__text"},"复制")]),o("div",{class:"hyc-common-markdown__code__line"}),o("div",{class:"hyc-common-markdown__code__expand canvas-btn_canvas-btn__vTDT5"},[o("span",{class:"yb-icon iconfont-yb icon-yb-ic_expand_16"})])])])]),o("pre",{class:"hyc-common-markdown__code-lan"},[o("code",{classname:"language-bash"},"crontab -e")])])],-1)),n[14]||(n[14]=o("p",null,"添加以下内容（每日3点重启）：",-1)),n[15]||(n[15]=o("pre",{class:"ybc-pre-component ybc-pre-component_not-math"},[o("div",{class:"hyc-common-markdown__code hidden"},[o("div",{class:"hyc-common-markdown__code__code-btn hidden"},[o("div",{class:"hyc-common-markdown__code__langComponent expand"},[o("span",{class:"hyc-common-markdown__code__langComponent__text"},"bash"),o("svg",{xmlns:"http://www.w3.org/2000/svg",width:"17",height:"17",viewBox:"0 0 17 17",fill:"none",class:"hyc-common-markdown__code__langComponent__logo hidden"},[o("path",{d:"M4.74219 10.7988L8.74219 6.79883L12.7422 10.7988",stroke:"black","stroke-opacity":"0.4","stroke-width":"1.14286","stroke-linecap":"round","stroke-linejoin":"round"})])])])]),o("div",{class:"hyc-common-markdown__code","data-has-scroll":"false"},[o("div",{class:"hyc-common-markdown__code__hd"},[o("div",{class:"hyc-common-markdown__code__hd__inner"},[o("div",{class:"hyc-common-markdown__code__hd__l"},[o("div",{class:"hyc-common-markdown__code__hd__l__lang"},[o("div",{class:"hyc-common-markdown__code__langComponent expand"},[o("span",{class:"hyc-common-markdown__code__langComponent__text"},"bash"),o("svg",{xmlns:"http://www.w3.org/2000/svg",width:"17",height:"17",viewBox:"0 0 17 17",fill:"none",class:"hyc-common-markdown__code__langComponent__logo hidden"},[o("path",{d:"M4.74219 10.7988L8.74219 6.79883L12.7422 10.7988",stroke:"black","stroke-opacity":"0.4","stroke-width":"1.14286","stroke-linecap":"round","stroke-linejoin":"round"})])])])]),o("div",{class:"hyc-common-markdown__code__hd__r"},[o("div",{class:"hyc-common-markdown__code__option"},[o("svg",{width:"1rem",height:"1rem",class:"hyc-common-markdown__code__option__logo",viewBox:"0 0 16 16",fill:"none",xmlns:"http://www.w3.org/2000/svg"},[o("path",{"fill-rule":"evenodd","clip-rule":"evenodd",d:"M6.18563 1.02148H6.27219C7.2371 1.02147 8.02186 1.02145 8.64056 1.10464C9.28576 1.19138 9.83952 1.37836 10.2808 1.81962C10.722 2.26088 10.909 2.81464 10.9958 3.45984C11.013 3.58781 11.0266 3.72289 11.0374 3.8652C11.4689 3.87473 11.8501 3.8954 12.1831 3.94018C12.8283 4.02693 13.3821 4.21391 13.8234 4.65517C14.2646 5.09643 14.4516 5.65018 14.5383 6.29538C14.6215 6.9141 14.6215 7.69882 14.6215 8.66375V10.167C14.6215 11.1319 14.6215 11.9166 14.5383 12.5354C14.4516 13.1806 14.2646 13.7343 13.8234 14.1756C13.3821 14.6168 12.8283 14.8038 12.1831 14.8906C11.5644 14.9737 10.7797 14.9737 9.81476 14.9737H9.72821C8.76328 14.9737 7.97855 14.9737 7.35983 14.8906C6.71463 14.8038 6.16088 14.6168 5.71962 14.1756C5.27836 13.7343 5.09138 13.1806 5.00464 12.5354C4.98743 12.4074 4.97379 12.2723 4.96296 12.13C4.53148 12.1205 4.15032 12.0998 3.81726 12.055C3.17206 11.9683 2.6183 11.7813 2.17704 11.34C1.73578 10.8988 1.5488 10.345 1.46206 9.69981C1.37888 9.0811 1.37889 8.29639 1.37891 7.33148V5.82821C1.37889 4.8633 1.37888 4.07854 1.46206 3.45984C1.5488 2.81464 1.73578 2.26088 2.17704 1.81962C2.6183 1.37836 3.17206 1.19138 3.81726 1.10464C4.43596 1.02145 5.22072 1.02147 6.18563 1.02148ZM4.92325 10.9287C4.92148 10.6885 4.92148 10.4347 4.92148 10.167V8.66375C4.92147 7.69882 4.92145 6.9141 5.00464 6.29538C5.09138 5.65018 5.27836 5.09643 5.71962 4.65517C6.16088 4.21391 6.71463 4.02693 7.35983 3.94018C7.97855 3.857 8.76327 3.85701 9.7282 3.85703H9.81477C9.82079 3.85703 9.82681 3.85703 9.83282 3.85703C9.82532 3.77412 9.8166 3.69516 9.80646 3.61973C9.73761 3.1076 9.61339 2.84929 9.43225 2.66815C9.25111 2.48701 8.9928 2.36279 8.48066 2.29394C7.95127 2.22276 7.24761 2.22149 6.22891 2.22149C5.21021 2.22149 4.50655 2.22276 3.97716 2.29394C3.46502 2.36279 3.20671 2.48701 3.02557 2.66815C2.84443 2.84929 2.72021 3.1076 2.65136 3.61973C2.58018 4.14913 2.57891 4.85279 2.57891 5.87149V7.28816C2.57891 8.30685 2.58018 9.01052 2.65136 9.53991C2.72021 10.052 2.84443 10.3104 3.02557 10.4915C3.20671 10.6726 3.46502 10.7969 3.97716 10.8657C4.24274 10.9014 4.55218 10.9195 4.92325 10.9287ZM6.19393 6.45528C6.26279 5.94314 6.38701 5.68483 6.56815 5.5037C6.74928 5.32256 7.0076 5.19834 7.51973 5.12948C8.04913 5.05831 8.75279 5.05703 9.77149 5.05703C10.7902 5.05703 11.4938 5.05831 12.0232 5.12948C12.5354 5.19834 12.7937 5.32256 12.9748 5.50369C13.156 5.68483 13.2802 5.94314 13.349 6.45528C13.4202 6.98467 13.4215 7.68834 13.4215 8.70703V10.1237C13.4215 11.1424 13.4202 11.8461 13.349 12.3755C13.2802 12.8876 13.156 13.1459 12.9748 13.327C12.7937 13.5082 12.5354 13.6324 12.0232 13.7013C11.4938 13.7724 10.7902 13.7737 9.77149 13.7737C8.75279 13.7737 8.04913 13.7724 7.51973 13.7013C7.0076 13.6324 6.74929 13.5082 6.56815 13.327C6.38701 13.1459 6.26279 12.8876 6.19393 12.3755C6.12276 11.8461 6.12149 11.1424 6.12149 10.1237V8.70704C6.12149 7.68834 6.12276 6.98467 6.19393 6.45528Z"})]),o("span",{class:"hyc-common-markdown__code__option__text"},"复制")]),o("div",{class:"hyc-common-markdown__code__line"}),o("div",{class:"hyc-common-markdown__code__expand canvas-btn_canvas-btn__vTDT5"},[o("span",{class:"yb-icon iconfont-yb icon-yb-ic_expand_16"})])])])]),o("pre",{class:"hyc-common-markdown__code-lan"},[o("code",{classname:"language-bash"},"0 3 * * * /usr/bin/gitlab-ctl restart puma")])])],-1)),n[16]||(n[16]=o("h5",{id:"_4-升级gitlab版本",tabindex:"-1"},[o("strong",null,"4. 升级GitLab版本"),_(),o("a",{class:"header-anchor",href:"#_4-升级gitlab版本","aria-label":'Permalink to "**4. 升级GitLab版本**"'},"​")],-1)),n[17]||(n[17]=o("p",null,"旧版本GitLab可能存在已知内存泄漏问题（如Puma的Worker未正确释放内存），升级到最新稳定版（如GitLab 16.x）可修复这些问题。升级前需备份数据：",-1)),n[18]||(n[18]=o("pre",{class:"ybc-pre-component ybc-pre-component_not-math"},[o("div",{class:"hyc-common-markdown__code hidden"},[o("div",{class:"hyc-common-markdown__code__code-btn hidden"},[o("div",{class:"hyc-common-markdown__code__langComponent expand"},[o("span",{class:"hyc-common-markdown__code__langComponent__text"},"bash"),o("svg",{xmlns:"http://www.w3.org/2000/svg",width:"17",height:"17",viewBox:"0 0 17 17",fill:"none",class:"hyc-common-markdown__code__langComponent__logo hidden"},[o("path",{d:"M4.74219 10.7988L8.74219 6.79883L12.7422 10.7988",stroke:"black","stroke-opacity":"0.4","stroke-width":"1.14286","stroke-linecap":"round","stroke-linejoin":"round"})])])])]),o("div",{class:"hyc-common-markdown__code","data-has-scroll":"false"},[o("div",{class:"hyc-common-markdown__code__hd"},[o("div",{class:"hyc-common-markdown__code__hd__inner"},[o("div",{class:"hyc-common-markdown__code__hd__l"},[o("div",{class:"hyc-common-markdown__code__hd__l__lang"},[o("div",{class:"hyc-common-markdown__code__langComponent expand"},[o("span",{class:"hyc-common-markdown__code__langComponent__text"},"bash"),o("svg",{xmlns:"http://www.w3.org/2000/svg",width:"17",height:"17",viewBox:"0 0 17 17",fill:"none",class:"hyc-common-markdown__code__langComponent__logo hidden"},[o("path",{d:"M4.74219 10.7988L8.74219 6.79883L12.7422 10.7988",stroke:"black","stroke-opacity":"0.4","stroke-width":"1.14286","stroke-linecap":"round","stroke-linejoin":"round"})])])])]),o("div",{class:"hyc-common-markdown__code__hd__r"},[o("div",{class:"hyc-common-markdown__code__option"},[o("svg",{width:"1rem",height:"1rem",class:"hyc-common-markdown__code__option__logo",viewBox:"0 0 16 16",fill:"none",xmlns:"http://www.w3.org/2000/svg"},[o("path",{"fill-rule":"evenodd","clip-rule":"evenodd",d:"M6.18563 1.02148H6.27219C7.2371 1.02147 8.02186 1.02145 8.64056 1.10464C9.28576 1.19138 9.83952 1.37836 10.2808 1.81962C10.722 2.26088 10.909 2.81464 10.9958 3.45984C11.013 3.58781 11.0266 3.72289 11.0374 3.8652C11.4689 3.87473 11.8501 3.8954 12.1831 3.94018C12.8283 4.02693 13.3821 4.21391 13.8234 4.65517C14.2646 5.09643 14.4516 5.65018 14.5383 6.29538C14.6215 6.9141 14.6215 7.69882 14.6215 8.66375V10.167C14.6215 11.1319 14.6215 11.9166 14.5383 12.5354C14.4516 13.1806 14.2646 13.7343 13.8234 14.1756C13.3821 14.6168 12.8283 14.8038 12.1831 14.8906C11.5644 14.9737 10.7797 14.9737 9.81476 14.9737H9.72821C8.76328 14.9737 7.97855 14.9737 7.35983 14.8906C6.71463 14.8038 6.16088 14.6168 5.71962 14.1756C5.27836 13.7343 5.09138 13.1806 5.00464 12.5354C4.98743 12.4074 4.97379 12.2723 4.96296 12.13C4.53148 12.1205 4.15032 12.0998 3.81726 12.055C3.17206 11.9683 2.6183 11.7813 2.17704 11.34C1.73578 10.8988 1.5488 10.345 1.46206 9.69981C1.37888 9.0811 1.37889 8.29639 1.37891 7.33148V5.82821C1.37889 4.8633 1.37888 4.07854 1.46206 3.45984C1.5488 2.81464 1.73578 2.26088 2.17704 1.81962C2.6183 1.37836 3.17206 1.19138 3.81726 1.10464C4.43596 1.02145 5.22072 1.02147 6.18563 1.02148ZM4.92325 10.9287C4.92148 10.6885 4.92148 10.4347 4.92148 10.167V8.66375C4.92147 7.69882 4.92145 6.9141 5.00464 6.29538C5.09138 5.65018 5.27836 5.09643 5.71962 4.65517C6.16088 4.21391 6.71463 4.02693 7.35983 3.94018C7.97855 3.857 8.76327 3.85701 9.7282 3.85703H9.81477C9.82079 3.85703 9.82681 3.85703 9.83282 3.85703C9.82532 3.77412 9.8166 3.69516 9.80646 3.61973C9.73761 3.1076 9.61339 2.84929 9.43225 2.66815C9.25111 2.48701 8.9928 2.36279 8.48066 2.29394C7.95127 2.22276 7.24761 2.22149 6.22891 2.22149C5.21021 2.22149 4.50655 2.22276 3.97716 2.29394C3.46502 2.36279 3.20671 2.48701 3.02557 2.66815C2.84443 2.84929 2.72021 3.1076 2.65136 3.61973C2.58018 4.14913 2.57891 4.85279 2.57891 5.87149V7.28816C2.57891 8.30685 2.58018 9.01052 2.65136 9.53991C2.72021 10.052 2.84443 10.3104 3.02557 10.4915C3.20671 10.6726 3.46502 10.7969 3.97716 10.8657C4.24274 10.9014 4.55218 10.9195 4.92325 10.9287ZM6.19393 6.45528C6.26279 5.94314 6.38701 5.68483 6.56815 5.5037C6.74928 5.32256 7.0076 5.19834 7.51973 5.12948C8.04913 5.05831 8.75279 5.05703 9.77149 5.05703C10.7902 5.05703 11.4938 5.05831 12.0232 5.12948C12.5354 5.19834 12.7937 5.32256 12.9748 5.50369C13.156 5.68483 13.2802 5.94314 13.349 6.45528C13.4202 6.98467 13.4215 7.68834 13.4215 8.70703V10.1237C13.4215 11.1424 13.4202 11.8461 13.349 12.3755C13.2802 12.8876 13.156 13.1459 12.9748 13.327C12.7937 13.5082 12.5354 13.6324 12.0232 13.7013C11.4938 13.7724 10.7902 13.7737 9.77149 13.7737C8.75279 13.7737 8.04913 13.7724 7.51973 13.7013C7.0076 13.6324 6.74929 13.5082 6.56815 13.327C6.38701 13.1459 6.26279 12.8876 6.19393 12.3755C6.12276 11.8461 6.12149 11.1424 6.12149 10.1237V8.70704C6.12149 7.68834 6.12276 6.98467 6.19393 6.45528Z"})]),o("span",{class:"hyc-common-markdown__code__option__text"},"复制")]),o("div",{class:"hyc-common-markdown__code__line"}),o("div",{class:"hyc-common-markdown__code__expand canvas-btn_canvas-btn__vTDT5"},[o("span",{class:"yb-icon iconfont-yb icon-yb-ic_expand_16"})])])])]),o("pre",{class:"hyc-common-markdown__code-lan"},[o("code",{classname:"language-bash"},`sudo apt update  
sudo apt upgrade gitlab-ce  # 社区版`)])])],-1)),n[19]||(n[19]=a('<h3 id="总结" tabindex="-1">总结 <a class="header-anchor" href="#总结" aria-label="Permalink to &quot;总结&quot;">​</a></h3><p>当前内存占用高的核心原因是 <strong>GitLab的Puma进程未优化配置</strong> ，导致大量bundle进程占用内存。通过 <strong>调整Puma/Sidekiq配置</strong> 、 <strong>创建Swap空间</strong> 、<strong>自动重启Puma</strong>及 <strong>升级版本</strong> ，可有效解决内存泄漏问题，确保服务稳定运行。</p>',2)),e(d),e(s)])}const v=m(r,[["render",i]]);export{y as __pageData,v as default};
