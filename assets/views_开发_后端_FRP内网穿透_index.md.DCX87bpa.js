import{_ as p,C as a,c as l,o as r,aB as t,G as n}from"./chunks/framework.B_fJ6ASn.js";const E=JSON.parse('{"title":"FRP 内网穿透","description":"","frontmatter":{},"headers":[],"relativePath":"views/开发/后端/FRP内网穿透/index.md","filePath":"views/开发/后端/FRP内网穿透/index.md","lastUpdated":1769598864000}'),c={name:"views/开发/后端/FRP内网穿透/index.md"};function h(o,s,b,d,k,u){const e=a("NolebaseGitContributors"),i=a("NolebaseGitChangelog");return r(),l("div",null,[s[0]||(s[0]=t(`<h1 id="frp-内网穿透" tabindex="-1">FRP 内网穿透 <a class="header-anchor" href="#frp-内网穿透" aria-label="Permalink to &quot;FRP 内网穿透&quot;">​</a></h1><p>FRP 是一款开源内网穿透工具，它可以把我们内网服务暴露在公网之中。但是有一个前提，我们需要一台公网服务器，并且带宽速度要快。这么做的好处是我们可以用自己的高配置服务器，配合各大云服务商价格最低的轻量应用服务器实现低成本的部署外网服务。而且所有数据包括代码都在我们本地服务器，云服务器只是单纯做转发。</p><h2 id="linux-用法" tabindex="-1">Linux 用法 <a class="header-anchor" href="#linux-用法" aria-label="Permalink to &quot;Linux 用法&quot;">​</a></h2><p>将下载好后的 Frp 放到本地服务器和线上云服务器，其中本地服务器需要配置 frpc.toml(客户端)文件，线上服务器需要配置 frps.toml(服务端)。</p><h5 id="frpc-toml-配置示例" tabindex="-1">frpc.toml 配置示例 <a class="header-anchor" href="#frpc-toml-配置示例" aria-label="Permalink to &quot;frpc.toml 配置示例&quot;">​</a></h5><div class="language-toml vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">toml</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># 公网地址</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">serverAddr = </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;192.168.155.93&quot;</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">#公网端口号默认</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">serverPort = </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">7000</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">[[</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">proxies</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">]]</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">#需要转发的服务名字</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">name = </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;test-tcp&quot;</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">#服务类型默认TCP就行</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">type = </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;tcp&quot;</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">#本地服务IP</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">localIP = </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;127.0.0.1&quot;</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">#本地服务端口</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">localPort = </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">22</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">#转发后的服务端口</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">remotePort = </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">6000</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br></div></div><blockquote><p>上述配置文件最终的外网访问链接为 192.168.155.93:6000</p></blockquote><h5 id="frps-toml-配置示例" tabindex="-1">frps.toml 配置示例 <a class="header-anchor" href="#frps-toml-配置示例" aria-label="Permalink to &quot;frps.toml 配置示例&quot;">​</a></h5><div class="language-toml vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">toml</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">#【服务端口】</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">bindPort = </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">7001</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">#【授权码，请改成更复杂的 客户端会用到】</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">auth.token = </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;token123456&quot;</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">#【服务端通过此端口接监听和接收公网用户的http请求】</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">vhostHTTPPort = </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">7002</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"> #</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">#【dashboard配置】</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">webServer.addr = </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;0.0.0.0&quot;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">webServer.port = </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">7003</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">#【dashboard 用户名密码，可选，默认为空】</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">webServer.user = </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;admin&quot;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">webServer.password = </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;admin&quot;</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br></div></div><p>配置完成后可以用 Linux 的 systemctl，让其在后台运行并且开机自启，详情查看<a href="/views/开发/后端/linux下systemctl的使用/">Linux 下 systemctl 的使用</a>，上述 frps 的配置文件实际如果图方便的话只用配置 bindPort 即可。</p><h5 id="systemctl-服务端的配置文件内容示例" tabindex="-1">systemctl 服务端的配置文件内容示例 <a class="header-anchor" href="#systemctl-服务端的配置文件内容示例" aria-label="Permalink to &quot;systemctl 服务端的配置文件内容示例&quot;">​</a></h5><div class="language-service vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">service</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span>[Unit]</span></span>
<span class="line"><span>Description=Frp Server Service</span></span>
<span class="line"><span>After=network.target</span></span>
<span class="line"><span></span></span>
<span class="line"><span>[Service]</span></span>
<span class="line"><span>Type=simple</span></span>
<span class="line"><span>User=root</span></span>
<span class="line"><span>Restart=always</span></span>
<span class="line"><span>RestartSec=5s</span></span>
<span class="line"><span>ExecStart=/home/ecs-user/.setData/frp_0.61.2_linux_amd64/frps -c /home/ecs-user/.setData/frp_0.61.2_linux_amd64/frps.toml</span></span>
<span class="line"><span># 日志输出（可选）</span></span>
<span class="line"><span>StandardOutput=file:/var/log/frps.log</span></span>
<span class="line"><span>StandardError=file:/var/log/frps_error.log</span></span>
<span class="line"><span></span></span>
<span class="line"><span>[Install]</span></span>
<span class="line"><span>WantedBy=multi-user.target</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br></div></div><h5 id="systemctl-客户端的配置文件内容示例" tabindex="-1">systemctl 客户端的配置文件内容示例 <a class="header-anchor" href="#systemctl-客户端的配置文件内容示例" aria-label="Permalink to &quot;systemctl 客户端的配置文件内容示例&quot;">​</a></h5><div class="language-service vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">service</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span>[Unit]</span></span>
<span class="line"><span>Description=Frp Client Service</span></span>
<span class="line"><span>After=network.target</span></span>
<span class="line"><span></span></span>
<span class="line"><span>[Service]</span></span>
<span class="line"><span>Type=simple</span></span>
<span class="line"><span>User=root</span></span>
<span class="line"><span>WorkingDirectory=/home/text/frp_0.61.2_linux_amd64</span></span>
<span class="line"><span>ExecStart=/home/text/frp_0.61.2_linux_amd64/frpc -c frpc.toml</span></span>
<span class="line"><span>Restart=always</span></span>
<span class="line"><span>RestartSec=10</span></span>
<span class="line"><span>StandardOutput=journal</span></span>
<span class="line"><span>StandardError=journal</span></span>
<span class="line"><span></span></span>
<span class="line"><span>[Install]</span></span>
<span class="line"><span>WantedBy=multi-user.target</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br></div></div><blockquote><p>路径注意替换成自己的</p></blockquote><h2 id="windows-下的用法" tabindex="-1">windows 下的用法 <a class="header-anchor" href="#windows-下的用法" aria-label="Permalink to &quot;windows 下的用法&quot;">​</a></h2><p>windows 的服务端和客户端配置和 linux 基本一致，除了执行方式不一样，故不作赘述。这里只提供 windows 端带有 UI 界面的 frpc 的客户端应用。</p><p><img src="https://cdn.jsdelivr.net/gh/Ruin-L/image@main/img/20251218130347293.png" alt="img"></p><p><a href="https://cloud.189.cn/t/MBZjmym6nqya%EF%BC%88%E8%AE%BF%E9%97%AE%E7%A0%81%EF%BC%9Aqlf5%EF%BC%89" target="_blank" rel="noreferrer">windows 应用下载链接</a></p><p>注意如果启动失败的话注意看日志，也有可能是杀毒软件导致的，保险起见请关闭杀毒软件在启动。</p><h2 id="mac-下的用法" tabindex="-1">mac 下的用法 <a class="header-anchor" href="#mac-下的用法" aria-label="Permalink to &quot;mac 下的用法&quot;">​</a></h2><p>同上述，这里只提供带有 UI 界面的客户端下载链接。</p><p><a href="https://cloud.189.cn/t/vuQVfeFVJBZj%EF%BC%88%E8%AE%BF%E9%97%AE%E7%A0%81%EF%BC%9A4nde%EF%BC%89" target="_blank" rel="noreferrer">mac 版 frpc-desktop</a></p>`,23)),n(e),n(i)])}const g=p(c,[["render",h]]);export{E as __pageData,g as default};
